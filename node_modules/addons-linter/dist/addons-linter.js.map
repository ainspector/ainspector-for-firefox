{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.js","webpack:///(webpack)/buildin/module.js","webpack:///./src/cli.js","webpack:///./node_modules/babel-runtime/helpers/taggedTemplateLiteral.js","webpack:///./node_modules/babel-runtime/core-js/object/define-properties.js","webpack:///./node_modules/core-js/library/fn/object/define-properties.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-properties.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/babel-runtime/core-js/object/freeze.js","webpack:///./node_modules/core-js/library/fn/object/freeze.js","webpack:///./node_modules/core-js/library/modules/es6.object.freeze.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_object-sap.js","webpack:///external \"yargs\"","webpack:///external \"common-tags\"","webpack:///./src/logger.js","webpack:///external \"pino\"","webpack:///./src/yargs-options.js","webpack:///./src/linter.js","webpack:///./node_modules/babel-runtime/regenerator/index.js","webpack:///external \"regenerator-runtime\"","webpack:///./node_modules/babel-runtime/helpers/asyncToGenerator.js","webpack:///./node_modules/babel-runtime/core-js/promise.js","webpack:///./node_modules/core-js/library/fn/promise.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/modules/es6.promise.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_an-instance.js","webpack:///./node_modules/core-js/library/modules/_for-of.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_species-constructor.js","webpack:///./node_modules/core-js/library/modules/_task.js","webpack:///./node_modules/core-js/library/modules/_invoke.js","webpack:///./node_modules/core-js/library/modules/_microtask.js","webpack:///./node_modules/core-js/library/modules/_new-promise-capability.js","webpack:///./node_modules/core-js/library/modules/_perform.js","webpack:///./node_modules/core-js/library/modules/_user-agent.js","webpack:///./node_modules/core-js/library/modules/_promise-resolve.js","webpack:///./node_modules/core-js/library/modules/_redefine-all.js","webpack:///./node_modules/core-js/library/modules/_set-species.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/core-js/library/modules/es7.promise.finally.js","webpack:///./node_modules/core-js/library/modules/es7.promise.try.js","webpack:///./node_modules/babel-runtime/helpers/slicedToArray.js","webpack:///./node_modules/babel-runtime/core-js/is-iterable.js","webpack:///./node_modules/core-js/library/fn/is-iterable.js","webpack:///./node_modules/core-js/library/modules/core.is-iterable.js","webpack:///./node_modules/babel-runtime/core-js/get-iterator.js","webpack:///./node_modules/core-js/library/fn/get-iterator.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator.js","webpack:///./node_modules/babel-runtime/helpers/classCallCheck.js","webpack:///./node_modules/babel-runtime/helpers/createClass.js","webpack:///./node_modules/babel-runtime/core-js/object/define-property.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///external \"path\"","webpack:///external \"columnify\"","webpack:///external \"chalk\"","webpack:///external \"dispensary\"","webpack:///./src/io/utils.js","webpack:///external \"fs\"","webpack:///external \"es6-promisify\"","webpack:///external \"upath\"","webpack:///./src/const.js","webpack:///./src/libraries.js","webpack:///./src/messages/index.js","webpack:///./src/messages/css.js","webpack:///./src/utils.js","webpack:///external \"url\"","webpack:///external \"whatwg-url\"","webpack:///external \"jed\"","webpack:///external \"semver\"","webpack:///external \"os-locale\"","webpack:///./src/messages/html.js","webpack:///./src/messages/javascript.js","webpack:///./src/messages/json.js","webpack:///./src/messages/layout.js","webpack:///./src/messages/manifestjson.js","webpack:///./src/messages/fluent.js","webpack:///./src/messages/locale-messagesjson.js","webpack:///./src/collector.js","webpack:///./src/message.js","webpack:///./src/parsers/manifestjson.js","webpack:///./node_modules/babel-runtime/helpers/possibleConstructorReturn.js","webpack:///./node_modules/babel-runtime/helpers/typeof.js","webpack:///./node_modules/babel-runtime/core-js/symbol/iterator.js","webpack:///./node_modules/core-js/library/fn/symbol/iterator.js","webpack:///./node_modules/core-js/library/modules/_wks-ext.js","webpack:///./node_modules/babel-runtime/core-js/symbol.js","webpack:///./node_modules/core-js/library/fn/symbol/index.js","webpack:///./node_modules/core-js/library/modules/es6.symbol.js","webpack:///./node_modules/core-js/library/modules/_wks-define.js","webpack:///./node_modules/core-js/library/modules/_enum-keys.js","webpack:///./node_modules/core-js/library/modules/_object-gops.js","webpack:///./node_modules/core-js/library/modules/_object-pie.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/_object-gopn-ext.js","webpack:///./node_modules/core-js/library/modules/_object-gopn.js","webpack:///./node_modules/core-js/library/modules/_object-gopd.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.async-iterator.js","webpack:///./node_modules/core-js/library/modules/es7.symbol.observable.js","webpack:///./node_modules/babel-runtime/helpers/inherits.js","webpack:///./node_modules/babel-runtime/core-js/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.set-prototype-of.js","webpack:///./node_modules/core-js/library/modules/_set-proto.js","webpack:///./node_modules/babel-runtime/core-js/object/create.js","webpack:///./node_modules/core-js/library/fn/object/create.js","webpack:///./node_modules/core-js/library/modules/es6.object.create.js","webpack:///external \"relaxed-json\"","webpack:///external \"probe-image-size\"","webpack:///./src/schema/validator.js","webpack:///./node_modules/babel-runtime/helpers/extends.js","webpack:///./node_modules/babel-runtime/core-js/object/assign.js","webpack:///./node_modules/core-js/library/fn/object/assign.js","webpack:///./node_modules/core-js/library/modules/es6.object.assign.js","webpack:///./node_modules/core-js/library/modules/_object-assign.js","webpack:///external \"ajv\"","webpack:///external \"ajv-merge-patch\"","webpack:///./src/schema/deepmerge.js","webpack:///external \"deepmerge\"","webpack:///external \"is-mergeable-object\"","webpack:///./src/schema/formats.js","webpack:///./src/schema/imported/index.js","webpack:///./src/parsers/json.js","webpack:///external \"esprima\"","webpack:///./src/blocked_content_script_hosts.txt","webpack:///./src/scanners/binary.js","webpack:///./src/scanners/base.js","webpack:///./src/scanners/css.js","webpack:///external \"postcss\"","webpack:///./src/rules/css/index.js","webpack:///./src/rules/css/invalidNesting.js","webpack:///./src/scanners/filename.js","webpack:///./src/scanners/html.js","webpack:///external \"cheerio\"","webpack:///./src/rules/html/index.js","webpack:///./src/rules/html/warn-on-inline.js","webpack:///./src/rules/html/warn-on-remote-script.js","webpack:///./src/scanners/javascript.js","webpack:///./node_modules/babel-runtime/helpers/defineProperty.js","webpack:///external \"eslint\"","webpack:///external \"espree\"","webpack:///external \"eslint-visitor-keys\"","webpack:///./src/rules/javascript/index.js","webpack:///./src/rules/javascript/deprecated-entities.js","webpack:///./src/rules/javascript/event-listener-fourth.js","webpack:///./src/rules/javascript/global-require-arg.js","webpack:///./src/rules/javascript/opendialog-nonlit-uri.js","webpack:///./src/rules/javascript/opendialog-remote-uri.js","webpack:///./src/rules/javascript/webextension-api.js","webpack:///./src/schema/browser-apis.js","webpack:///./src/rules/javascript/content-scripts-file-absent.js","webpack:///./src/rules/javascript/webextension-unsupported-api.js","webpack:///./src/scanners/json.js","webpack:///./src/parsers/locale-messagesjson.js","webpack:///./node_modules/babel-runtime/helpers/get.js","webpack:///./node_modules/babel-runtime/core-js/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/fn/object/get-prototype-of.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-prototype-of.js","webpack:///./node_modules/babel-runtime/core-js/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/fn/object/get-own-property-descriptor.js","webpack:///./node_modules/core-js/library/modules/es6.object.get-own-property-descriptor.js","webpack:///./src/scanners/langpack.js","webpack:///./src/parsers/fluent.js","webpack:///external \"fluent-syntax\"","webpack:///./src/parsers/properties.js","webpack:///./src/parsers/doctype.js","webpack:///./src/io/index.js","webpack:///./src/io/crx.js","webpack:///external \"crx-parser\"","webpack:///external \"yauzl\"","webpack:///./src/io/xpi.js","webpack:///external \"strip-bom-stream\"","webpack:///external \"first-chunk-stream\"","webpack:///./src/io/base.js","webpack:///./src/io/directory.js","webpack:///./src/miner_blocklist.js"],"names":["isRunFromCLI","createInstance","_module","module","config","useCLI","argv","runAsBinary","level","logLevel","info","terminalWidth","getConfig","_process","process","stdout","columns","width","error","Error","cliArgv","usage","options","demand","help","alias","wrap","createLogger","env","LOG_LEVEL","name","getDefaultConfigValue","describe","type","default","choices","output","metadata","pretty","stack","boring","requiresArg","undefined","constants","messages","Linter","_","packagePath","io","chalk","constructor","enabled","collector","addonMetadata","shouldScanFile","bind","VALIDATION_ERROR","red","VALIDATION_WARNING","yellow","VALIDATION_NOTICE","blue","MESSAGE_TYPES","join","err","_console","console","message","includes","addError","DUPLICATE_XPI_ENTRY","print","ZIP_LIB_CORRUPT_FILE_ERROR","BAD_ZIPFILE","log","toJSON","textOutput","input","_JSON","JSON","args","push","stringify","apply","_terminalWidth","maxColumns","out","summary","showHeaders","minWidth","forEach","messageType","length","outputConfig","code","dataTransform","value","colorize","headingTransform","maxWidth","description","file","line","column","outputColumns","indexOf","toUpperCase","columnSplitter","scanFile","_log","ManifestJSONParser","debug","getFiles","files","Object","prototype","hasOwnProperty","call","MANIFEST_JSON","getFileAsString","json","manifestParser","selfHosted","parsedJSON","icons","validateIcons","getMetadata","warn","addNotice","TYPE_NO_MANIFEST_JSON","totalScannedFileSize","filepath","_lstatPromise","invalidMessage","stats","isFile","isDirectory","promises","filename","Promise","all","match","HIDDEN_FILE_REGEX","FLAGGED_FILE_REGEX","FLAGGED_FILE_EXTENSIONS","extname","ALREADY_SIGNED_REGEX","scanResult","linterMessages","scannedFiles","ScannerClass","getScanner","getFile","fileResultType","fileData","fileSize","size","uncompressedSize","maxSize","MAX_FILE_SIZE_TO_PARSE_MB","filesizeError","assign","FILE_TOO_LARGE","_markBadwordUsage","_markCoinMinerUsage","scanner","disabledLinterRules","disableLinterRules","existingFiles","scan","_addMessage","_filename","recordScannedFile","scannerName","_Crx","_Directory","_Xpi","checkFileExists","endsWith","setScanFileCallback","getAddonMetadata","markSpecialFiles","metadataObject","hasErrors","errors","fileOrDirName","isDir","manifestFileNames","some","v","deps","extractMetadata","f","keys","_files","filesWithoutJSLibraries","filter","jsLibs","scanFiles","exitCode","warningsAsErrors","warnings","exit","handleError","_markEmptyFiles","_addonMetadata","_markJSLibs","_markBannedLibs","_markUnknownOrMinifiedCode","_unadvisedLibraries","pathToFile","BANNED_LIBRARY","addWarning","UNADVISED_LIBRARY","emptyFiles","dispensary","getFilesByExt","map","hashResult","KNOWN_LIBRARY","unknownMinifiedFiles","trim","matches","BADWORDS_RE","en","MOZILLA_COND_OF_USE","filenames","nameRegex","filenameMatch","COINMINER_USAGE_DETECTED","fileDataMatch","matchedLine","matchedColumn","codeRegex","dataPath","cfg","_config","Array","isArray","el","count","walkPromise","path","lstatPromise","readdirPromise","curPath","shouldIncludePath","result","basePath","_curPath","stat","relPath","toUnix","relative","fileName","walk","DEFLATE_COMPRESSION","NO_COMPRESSION","ESLINT_ERROR","ESLINT_WARNING","EXTERNAL_RULE_MAPPING","allowIndirect","ESLINT_RULE_MAPPING","ESLINT_TYPES","PACKAGE_ANY","PACKAGE_EXTENSION","PACKAGE_THEME","PACKAGE_DICTIONARY","PACKAGE_LANGPACK","PACKAGE_SEARCHPROV","PACKAGE_MULTI","PACKAGE_SUBPACKAGE","PACKAGE_TYPES","LOCAL_PROTOCOLS","VALID_MANIFEST_VERSION","MAX_FILE_SIZE_MB","IMAGE_FILE_EXTENSIONS","FLAGGED_FILE_MAGIC_NUMBERS","FLAGGED_FILE_MAGIC_NUMBERS_LENGTH","DEPRECATED_APIS","TEMPORARY_APIS","CSP_KEYWORD_RE","RegExp","MESSAGES_JSON","LOCALES_DIRECTORY","MESSAGE_PLACEHOLDER_REGEXP","BANNED_LIBRARIES","UNADVISED_LIBRARIES","CSS_SYNTAX_ERROR","INVALID_SELECTOR_NESTING","minVersion","gte","version","checkMinNodeVersion","normalizePath","getRootExpression","getNodeReference","getVariable","getLocale","getI18Data","buildI18nObject","getPackageTypeAsString","ignorePrivateFunctions","ensureFilenameExists","isLocalUrl","apiToMessage","isBrowserNamespace","parseCspPolicy","getLineAndColumnFromMatch","couldBeMinifiedCode","SOURCE_MAP_RE","iconPath","pathname","decodeURIComponent","slice","node","root","callee","parent","object","context","getScope","variables","scopeVar","i","variable","defs","body","occurances","lastAssignment","occurance","declarations","init","expression","right","sync","locale","i18ndata","nodeRequire","localesRoot","i18nData","_jed","jed","str","gettext","sprintf","fmt","i18n","numericPackageType","packageKeys","packageType","parseInt","list","filteredList","functionName","startsWith","urlInput","parsedUrl","parse","protocol","string","replace","substr","policy","toLowerCase","parsedPolicy","directives","split","directive","tokens","matchedLines","index","test","sampleSize","indentCountThreshold","hugeLinesLength","hugeLinesThreshold","lineEndIndex","lineStartIndex","lines","indentCount","hugeLinesCount","normalizedCode","currentLine","INLINE_SCRIPT","REMOTE_SCRIPT","_nonLiteralUri","_methodPassedRemoteUri","JS_SYNTAX_ERROR","EVENT_LISTENER_FOURTH","CONTENT_SCRIPT_NOT_FOUND","legacyCode","CONTENT_SCRIPT_EMPTY","method","OPENDIALOG_REMOTE_URI","OPENDIALOG_NONLIT_URI","DANGEROUS_EVAL","NO_IMPLIED_EVAL","UNEXPECTED_GLOGAL_ARG","NO_DOCUMENT_WRITE","UNSAFE_DYNAMIC_VARIABLE_ASSIGNMENT","UNSUPPORTED_API","messageFormat","deprecatedAPI","api","APP_GETDETAILS","EXT_ONREQUEST","EXT_ONREQUESTEXTERNAL","EXT_SENDREQUEST","TABS_GETALLINWINDOW","TABS_GETSELECTED","TABS_ONACTIVECHANGED","TABS_ONSELECTIONCHANGED","TABS_SENDREQUEST","temporaryAPI","STORAGE_LOCAL","STORAGE_SYNC","IDENTITY_GETREDIRECTURL","ESLINT_OVERWRITE_MESSAGE","JSON_INVALID","JSON_BLOCK_COMMENTS","JSON_DUPLICATE_KEY","HIDDEN_FILE","FLAGGED_FILE","FLAGGED_FILE_EXTENSION","FLAGGED_FILE_TYPE","ALREADY_SIGNED","manifestPropMissing","manifestIconMissing","manifestBackgroundMissing","manifestContentScriptFileMissing","manifestDictionaryFileMissing","iconIsNotSquare","iconSizeInvalid","corruptIconFile","noMessagesFileInLocales","MANIFEST_FIELD_REQUIRED","MANIFEST_FIELD_INVALID","MANIFEST_BAD_PERMISSION","MANIFEST_PERMISSIONS","MANIFEST_VERSION_INVALID","MANIFEST_CSP","MANIFEST_CSP_UNSAFE_EVAL","PROP_NAME_INVALID","PROP_VERSION_INVALID","PROP_VERSION_TOOLKIT_ONLY","MANIFEST_UPDATE_URL","MANIFEST_UNUSED_UPDATE","STRICT_MAX_VERSION","property","MANIFEST_ICON_NOT_FOUND","MANIFEST_BACKGROUND_FILE_NOT_FOUND","MANIFEST_CONTENT_SCRIPT_FILE_NOT_FOUND","MANIFEST_DICT_NOT_FOUND","MANIFEST_MULTIPLE_DICTS","MANIFEST_EMPTY_DICTS","MANIFEST_INVALID_CONTENT","ICON_NOT_SQUARE","ICON_SIZE_INVALID","expected","actual","CORRUPT_ICON_FILE","PROP_NAME_MISSING","PROP_VERSION_MISSING","NO_MESSAGES_FILE","NO_DEFAULT_LOCALE","WRONG_ICON_EXTENSION","NO_MESSAGES_FILE_IN_LOCALES","FLUENT_INVALID","NO_MESSAGE","PREDEFINED_MESSAGE_NAME","INVALID_MESSAGE_NAME","MISSING_PLACEHOLDER","INVALID_PLACEHOLDER_NAME","NO_PLACEHOLDER_CONTENT","Collector","messagesByDataPath","opts","_Message","messageList","isDuplicateMessage","_recordMessage","messagesAtDataPath","previousMessages","prevMessage","originalFilename","len","props","requiredProps","Message","data","prop","missingProps","other","every","_type","encoding","getFileAsStream","getImageMetadata","jsonString","RelaxedJSON","isValid","manifest_version","isLanguagePack","isDictionary","isStaticTheme","_validate","baseObject","lowerCaseMessage","overrides","keyword","validate","errorLookup","content_security_policy","validateCspPolicy","update_url","background","scripts","script","validateFileExistsInPackage","page","content_scripts","scriptRule","matchPattern","validateContentScriptMatchPattern","js","css","style","dictionaries","numberOfDictionaries","applications","gecko","strict_max_version","default_locale","msg","matchRx","fileList","filePath","rootPath","langDir","expectedSize","height","mime","_path","pop","validateIcon","messageFunc","validProtocols","candidates","insecureSrcDirective","candidate","values","j","hasProtocol","x","search","id","e","getAddonId","manifestVersion","validator","allErrors","errorDataPath","jsonPointers","verbose","schemas","schemaId","addMetaSchema","require","addFormat","filterErrors","_validateAddon","compile","$ref","validateAddon","_validateStaticTheme","types","ThemeManifest","$merge","with","additionalProperties","validateStaticTheme","_validateLangPack","WebExtensionLangpackManifest","validateLangPack","_validateDictionary","WebExtensionDictionaryManifest","validateDictionary","_validateLocaleMessages","validateLocaleMessages","emptyTarget","clone","oldArrayMerge","target","source","optionsArgument","destination","cloneRequested","shouldClone","a","b","arrayMerge","isValidVersionString","isToolkitVersionString","isAbsoluteUrl","isAnyUrl","isStrictRelativeUrl","isSecureUrl","imageDataOrStrictRelativeUrl","VALIDNUMRX","TOOLKIT_VERSION_REGEX","parts","part","Number","isNaN","isRelativeUrl","url","isUnresolvedRelativeUrl","JSONParser","_jsonString","originalError","manifestString","tokenize","comment","reduce","token","errorData","_checkForDuplicateKeys","duplicate","tolerant","BinaryScanner","buffer","contents","entry","check","BaseScanner","_defaultRules","_parsedContent","_rulesProcessed","_rules","getContents","rules","rule","ruleResults","concat","_getContents","postcss","cssRules","CSSScanner","cssNode","cssInstruction","cssOptions","startLine","start","startColumn","nodes","mediaCssNode","processCode","ast","_cssParser","from","reason","invalidNesting","FilenameScanner","extension","HTMLScanner","htmlDoc","load","$","each","element","attr","warnOnInline","src","warnOnRemoteScript","excludeRules","ECMA_VERSION","excludeFrom","excludeWhat","ruleName","JavaScriptScanner","disabledRules","notEmptyRule","_ESLint","_ruleMapping","_messages","sourceType","detectSourceType","configDefaults","baseConfig","es6","webextension","browser","settings","parser","parserOptions","ecmaVersion","plugins","allowInlineConfig","ignore","patterns","useEslintrc","cli","CLIEngine","rulesAfterExclusion","linter","defineRule","report","executeOnText","results","fatal","shortDescription","ruleId","overwrites","sourceCode","severity","possibleImportExportTypes","KEYS","child","_getSourceType","exc","exports","DEPRECATED_ENTITIES","create","CallExpression","referenceNode","referenceObject","entity","arguments","wantsUntrusted","firstArg","pathVar","uri","MemberExpression","namespace","isDeprecatedApi","isTemporaryApi","hasBrowserApi","schemaArrayNames","schemaObjectNames","current","hasObjectProperty","schema","schemaProperty","hasArrayProperty","namespaceProperties","schemaItem","resolve","arg","fileProperty","properties","find","key","fileValue","loc","isAbsolute","normalizedName","normalize","computed","JSONScanner","localeMessagesJSONParser","jsonParser","LocaleMessagesJSONParser","relaxedJSON","lowercasePlaceholders","params","missingProperty","schemaPath","messageObj","placeholders","placeholder","getLowercasePlaceholders","regexp","visitedLowercaseMessages","messageContent","exec","hasPlaceholder","visitedLowercasePlaceholders","lastIndex","LangpackScanner","ext","ParserClass","FluentParser","_sourceString","resource","parsedData","annotation","annotations","span","end","PropertiesParser","propertiesString","_propertiesString","lineBuffer","cleanedLine","ENTITY_RE","DoctypeParser","dtdString","_dtdString","entities","normalizedValue","Crx","zipLib","_parseCRX","_fs","fs","parseCRX","reject","readFile","fromBuffer","zipFile","_onEventsSubscribed","open","zipfile","on","handleEntry","then","Xpi","entries","wantedFiles","maxSizeBytes","checkPath","openReadStream","readStream","pipe","fileStream","buf","Buffer","chunk","fileString","toString","chunkLength","enc","IOBase","packageOrDirPath","callback","fileStreamType","getChunkAsBuffer","extensions","filesObject","Directory","_walkPromise","relativeFilePath","absoluteDirPath","getPath","autoClose","flags","content","read","MINER_BLOCKLIST"],"mappings":"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cAAc;AACd,cAAc;AACd,cAAc;AACd,eAAe;AACf,eAAe;AACf,eAAe;AACf,gBAAgB;AAChB;;;;;;;AC7DA;AACA;AACA;AACA;AACA;AACA,yCAAyC;;;;;;;ACLzC,6BAA6B;AAC7B,uCAAuC;;;;;;;ACDvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnBA;AACA;AACA;AACA;;;;;;;ACHA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;AACA;AACA;;;;;;;ACfA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;;;;;;;ACFA;AACA,qEAAsE,mBAAmB,UAAU,EAAE,EAAE;AACvG,CAAC;;;;;;;ACFD;AACA;AACA,iCAAiC,QAAQ,mBAAmB,UAAU,EAAE,EAAE;AAC1E,CAAC;;;;;;;ACHD;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA,uBAAuB;AACvB;AACA;AACA;;;;;;;ACHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACZA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,YAAY,eAAe;AAChC;AACA,KAAK;AACL;AACA;;;;;;;ACtBA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,kDAAkD;;AAElD;AACA,qEAAqE;AACrE,CAAC;AACD;AACA;AACA;AACA,CAAC;;;;;;;ACXD;;;;;;;ACAA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;;;;;;;ACHA,kBAAkB,wD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,CAAC;;;;;;;ACRD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,CAAC;AACD;AACA,qBAAqB;AACrB;AACA,SAAS;AACT,GAAG,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpDA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA,qDAAqD,OAAO,EAAE;AAC9D;;;;;;;ACTA,kC;;;;;;ACAA,wC;;;;;;;;;;;;QCGgBgB,Y,GAAAA,Y;;AAHhB;;;;;;AAGO,SAASA,YAAT,GAA0C;AAAA,MAApBd,QAAoB,uEAATC,OAAS;;AAC/C,MAAMN,QAAQK,SAASe,GAAT,CAAaC,SAAb,IAA0B,OAAxC;AACA,SAAO,oBAAK;AACVC,UAAM,eADI;AAEVtB;AAFU,GAAL,EAGJM,QAAQC,MAHJ,CAAP;AAID;;kBAGcY,c;;;;;;ACZf,iC;;;;;;;;;;;;QC2DgBI,qB,GAAAA,qB;AA3DhB,IAAMT,UAAU;AACd,eAAa;AACXU,cAAU,2BADC;AAEXC,UAAM,QAFK;AAGXC,aAAS,OAHE;AAIXC,aAAS,CAAC,OAAD,EAAU,OAAV,EAAmB,MAAnB,EAA2B,MAA3B,EAAmC,OAAnC,EAA4C,OAA5C;AAJE,GADC;AAOd,wBAAsB;AACpBH,cAAU,yBADU;AAEpBC,UAAM,SAFc;AAGpBC,aAAS;AAHW,GAPR;AAYdE,UAAQ;AACNX,WAAO,GADD;AAENO,cAAU,gCAFJ;AAGNC,UAAM,QAHA;AAINC,aAAS,MAJH;AAKNC,aAAS,CAAC,MAAD,EAAS,MAAT;AALH,GAZM;AAmBdE,YAAU;AACRL,cAAU,8BADF;AAERC,UAAM,SAFE;AAGRC,aAAS;AAHD,GAnBI;AAwBdI,UAAQ;AACNN,cAAU,sBADJ;AAENC,UAAM,SAFA;AAGNC,aAAS;AAHH,GAxBM;AA6BdK,SAAO;AACLP,cAAU,yCADL;AAELC,UAAM,SAFD;AAGLC,aAAS;AAHJ,GA7BO;AAkCdM,UAAQ;AACNR,cAAU,gCADJ;AAENC,UAAM,SAFA;AAGNC,aAAS;AAHH,GAlCM;AAuCd,iBAAe;AACbF,cAAU,6DADG;AAEbC,UAAM,SAFO;AAGbC,aAAS;AAHI,GAvCD;AA4Cd,eAAa;AACXT,WAAO,CAAC,GAAD,CADI;AAEXO,cAAU,sBAFC;AAGXC,UAAM,QAHK;AAIXQ,iBAAa;AAJF,GA5CC;AAkDd,0BAAwB;AACtBT,cAAU,8CADY;AAEtBC,UAAM,QAFgB;AAGtBQ,iBAAa;AAHS;AAlDV,CAAhB;;kBAyDenB,O;AAER,SAASS,qBAAT,CAA+BD,IAA/B,EAAqC;AAC1C,MAAIR,QAAQQ,IAAR,KAAiB,aAAaR,QAAQQ,IAAR,CAAlC,EAAiD;AAC/C,WAAOR,QAAQQ,IAAR,EAAcI,OAArB;AACD;AACD,SAAOQ,SAAP;AACD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChED;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;AAEA;;AACA;;AACA;;IAAYC,S;;AACZ;;AACA;;IAAYC,Q;;AACZ;;AAMA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;IAGqBC,M;AACnB,kBAAYzC,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;;AADkB,iDAEIA,OAAO0C,CAFX;;AAEhB,SAAKC,WAFW;;AAGlB,SAAKC,EAAL,GAAU,IAAV;AACA,SAAKC,KAAL,GAAa,IAAI,gBAAMC,WAAV,CACX,EAAEC,SAAS,CAAC,KAAK/C,MAAL,CAAYoC,MAAxB,EADW,CAAb;AAEA,SAAKY,SAAL,GAAiB,wBAAchD,MAAd,CAAjB;AACA,SAAKiD,aAAL,GAAqB,IAArB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBC,IAApB,CAAyB,IAAzB,CAAtB;AACD;;;;6BAqBQtB,I,EAAM;AACb,cAAQA,IAAR;AACE,aAAKU,UAAUa,gBAAf;AACE,iBAAO,KAAKP,KAAL,CAAWQ,GAAlB;AACF,aAAKd,UAAUe,kBAAf;AACE,iBAAO,KAAKT,KAAL,CAAWU,MAAlB;AACF,aAAKhB,UAAUiB,iBAAf;AACE,iBAAO,KAAKX,KAAL,CAAWY,IAAlB;AACF;AACE,gBAAM,IAAI1C,KAAJ,2CACewB,UAAUmB,aAAV,CAAwBC,IAAxB,CAA6B,IAA7B,CADf,EAAN;AARJ;AAWD;;;gCAEWC,G,EAAyB;AAAA,UAApBC,QAAoB,uEAATC,OAAS;;AACnC,UAAIF,IAAIG,OAAJ,CAAYC,QAAZ,CAAqB,mBAArB,CAAJ,EAA+C;AAC7C,aAAKhB,SAAL,CAAeiB,QAAf,CAAwBzB,SAAS0B,mBAAjC;AACA,aAAKC,KAAL,CAAWN,QAAX;AACD,OAHD,MAGO,IAAID,IAAIG,OAAJ,CAAYC,QAAZ,CACTzB,UAAU6B,0BADD,CAAJ,EACkC;AACvC,aAAKpB,SAAL,CAAeiB,QAAf,CAAwBzB,SAAS6B,WAAjC;AACA,aAAKF,KAAL,CAAWN,QAAX;AACD,OAJM,MAIA,IAAI,KAAK7D,MAAL,CAAYmC,KAAZ,KAAsB,IAA1B,EAAgC;AACrC0B,iBAAS/C,KAAT,CAAe8C,IAAIzB,KAAnB;AACD,OAFM,MAEA;AACL0B,iBAAS/C,KAAT,CAAe,KAAK+B,KAAL,CAAWQ,GAAX,CAAeO,IAAIG,OAAJ,IAAeH,GAA9B,CAAf;AACD;AACF;;;4BAEyB;AAAA,UAApBC,QAAoB,uEAATC,OAAS;;AACxB,UAAI,KAAK9D,MAAL,CAAYgC,MAAZ,KAAuB,MAA3B,EAAmC;AACjC;AACD;AACD,UAAI,KAAKhC,MAAL,CAAYgC,MAAZ,KAAuB,MAA3B,EAAmC;AACjC6B,iBAASS,GAAT,CAAa,KAAKC,MAAL,CAAY,KAAKvE,MAAL,CAAYkC,MAAxB,CAAb;AACD,OAFD,MAEO;AACL2B,iBAASS,GAAT,CAAa,KAAKE,UAAL,EAAb;AACD;AACF;;;6BAE+E;AAAA,qFAAJ,EAAI;AAAA,4BAAvEC,KAAuE;AAAA,UAAvEA,KAAuE,8BAA/D,KAAKzC,MAA0D;AAAA,6BAAlDE,MAAkD;AAAA,UAAlDA,MAAkD,+BAAzC,KAAKlC,MAAL,CAAYkC,MAA6B;AAAA,4BAArBwC,KAAqB;AAAA,UAArBA,KAAqB,8BAAbC,IAAa;;AAC9E,UAAMC,OAAO,CAACH,KAAD,CAAb;AACA,UAAIvC,WAAW,IAAf,EAAqB;AACnB0C,aAAKC,IAAL,CAAU,IAAV;AACAD,aAAKC,IAAL,CAAU,CAAV;AACD;AACD,aAAOH,MAAMI,SAAN,CAAgBC,KAAhB,CAAsB,IAAtB,EAA4BH,IAA5B,CAAP;AACD;;;iCAE0C;AAAA;;AAAA,UAAhCI,cAAgC;;AACzC,UAAMC,aAAaD,gBAAnB;AACA,UAAME,MAAM,EAAZ;;AAEAA,UAAIL,IAAJ,CAAS,aAAKnC,CAAL,CAAO,qBAAP,CAAT;AACAwC,UAAIL,IAAJ,CAAS,EAAT;AACAK,UAAIL,IAAJ,CAAS,yBAAU,KAAK7C,MAAL,CAAYmD,OAAtB,EAA+B;AACtCC,qBAAa,KADyB;AAEtCC,kBAAU;AAF4B,OAA/B,CAAT;AAIAH,UAAIL,IAAJ,CAAS,EAAT;;AAEAtC,gBAAUmB,aAAV,CAAwB4B,OAAxB,CAAgC,UAACzD,IAAD,EAAU;AACxC,YAAM0D,cAAiB1D,IAAjB,MAAN;AACA,YAAI,MAAKG,MAAL,CAAYuD,WAAZ,EAAyBC,MAA7B,EAAqC;AACnC,cAAMC,eAAe;AACnBC,kBAAM;AACJC,6BAAe,uBAACC,KAAD,EAAW;AACxB,uBAAO,MAAKC,QAAL,CAAchE,IAAd,EAAoB+D,KAApB,CAAP;AACD,eAHG;AAIJE,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,MAAP,CAAP;AACD,eANG;AAOJqD,wBAAU;AAPN,aADa;AAUnBhC,qBAAS;AACP+B,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,SAAP,CAAP;AACD,eAHM;AAIPqD,wBAAU,CAACd,aAAa,EAAd,IAAoB;AAJvB,aAVU;AAgBnBe,yBAAa;AACXF,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,aAAP,CAAP;AACD,eAHU;AAIXqD,wBAAU,CAACd,aAAa,EAAd,IAAoB;AAJnB,aAhBM;AAsBnBgB,kBAAM;AACJH,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,MAAP,CAAP;AACD,eAHG;AAIJqD,wBAAU,CAACd,aAAa,EAAd,IAAoB;AAJ1B,aAtBa;AA4BnBiB,kBAAM;AACJJ,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,MAAP,CAAP;AACD,eAHG;AAIJqD,wBAAU;AAJN,aA5Ba;AAkCnBI,oBAAQ;AACNL,gCAAkB,4BAAM;AACtB,uBAAO,aAAKpD,CAAL,CAAO,QAAP,CAAP;AACD,eAHK;AAINqD,wBAAU;AAJJ;AAlCW,WAArB;;AA0CA,cAAMK,gBAAgB,CACpB,MADoB,EAEpB,SAFoB,EAGpB,aAHoB,EAIpB,MAJoB,EAKpB,MALoB,EAMpB,QANoB,CAAtB;;AASA;AACA;AACA,cAAInB,aAAa,EAAjB,EAAqB;AACnB,mBAAOmB,cAAcA,cAAcC,OAAd,CAAsB,QAAtB,CAAd,CAAP;AACA,mBAAOZ,aAAaU,MAApB;AACA,mBAAOC,cAAcA,cAAcC,OAAd,CAAsB,aAAtB,CAAd,CAAP;AACA,mBAAOZ,aAAaO,WAApB;AACA,mBAAOI,cAAcA,cAAcC,OAAd,CAAsB,MAAtB,CAAd,CAAP;AACA,mBAAOZ,aAAaS,IAApB;;AAEAT,yBAAa1B,OAAb,CAAqBgC,QAArB,GAAgC,EAAhC;AACAN,yBAAaQ,IAAb,CAAkBF,QAAlB,GAA6B,EAA7B;AACD,WAVD,MAUO,IAAId,aAAa,EAAjB,EAAqB;AAC1B,mBAAOmB,cAAcA,cAAcC,OAAd,CAAsB,aAAtB,CAAd,CAAP;AACA,mBAAOZ,aAAaO,WAApB;;AAEAP,yBAAa1B,OAAb,CAAqBgC,QAArB,GAAgC,CAACd,aAAa,EAAd,IAAoB,GAApD;AACAQ,yBAAaQ,IAAb,CAAkBF,QAAlB,GAA6B,CAACd,aAAa,EAAd,IAAoB,GAAjD;AACD;;AAEDC,cAAIL,IAAJ,CAAYU,YAAYe,WAAZ,EAAZ;AACApB,cAAIL,IAAJ,CAAS,EAAT;AACAK,cAAIL,IAAJ,CAAS,yBAAU,MAAK7C,MAAL,CAAYuD,WAAZ,CAAV,EAAoC;AAC3CQ,sBAAU,EADiC;AAE3CnF,qBAASwF,aAFkC;AAG3CG,4BAAgB,KAH2B;AAI3CvG,oBAAQyF;AAJmC,WAApC,CAAT;AAMD;AACF,OAnFD;;AAqFA,UAAI,KAAKzD,MAAL,CAAYwE,QAAhB,EAA0B;AACxBtB,YAAIL,IAAJ,sBAA4B,KAAK7C,MAAL,CAAYwE,QAAZ,CAAqB7C,IAArB,CAA0B,IAA1B,CAA5B;AACAuB,YAAIL,IAAJ,CAAS,EAAT;AACD;;AAED,aAAOK,IAAIvB,IAAJ,CAAS,IAAT,CAAP;AACD;;;;;wFAwBG,E;+BAFF8C,I;YAAAA,I;0CACAC,kB;YAAAA,kB;;;;;;;sBAEI,KAAKzD,aAAL,KAAuB,I;;;;;AACzBwD,qBAAKE,KAAL,CAAW,kDAAX;iDACO,KAAK1D,a;;;;uBAEM,KAAKL,EAAL,CAAQgE,QAAR,E;;;AAAdC,qB;;qBACFC,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCJ,KAArC,EAA4CtE,UAAU2E,aAAtD,C;;;;;AACFT,qBAAKnG,IAAL,CAAU,wCAAV;;uBACmB,KAAKsC,EAAL,CAAQuE,eAAR,CAAwB5E,UAAU2E,aAAlC,C;;;AAAbE,oB;AACAC,8B,GAAiB,IAAIX,kBAAJ,CACrBU,IADqB,EAErB,KAAKpE,SAFgB,EAGrB;AACEsE,8BAAY,KAAKtH,MAAL,CAAYsH,UAD1B;AAEE1E,sBAAI,KAAKA;AAFX,iBAHqB,C;;qBAQnByE,eAAeE,UAAf,CAA0BC,K;;;;;;uBACtBH,eAAeI,aAAf,E;;;AAER,qBAAKxE,aAAL,GAAqBoE,eAAeK,WAAf,EAArB;;;;;AAEAjB,qBAAKkB,IAAL,SAAgBpF,UAAU2E,aAA1B;AACA,qBAAKlE,SAAL,CAAe4E,SAAf,CAAyBpF,SAASqF,qBAAlC;AACA,qBAAK5E,aAAL,GAAqB,EAArB;;;AAEF,qBAAKA,aAAL,CAAmB6E,oBAAnB,GAA0C,CAA1C;iDACO,KAAK7E,a;;;;;;;;;;;;;;;;;;;6GAGQ8E,Q;YAAUC,a;;;;;;;AACxBC,8B,GAAiB,IAAIlH,KAAJ,YACZgH,QADY,qD;;;uBAGDC,cAAcD,QAAd,C;;;AAAdG,qB;;sBACFA,MAAMC,MAAN,OAAmB,IAAnB,IAA2BD,MAAME,WAAN,OAAwB,I;;;;;kDAC9CF,K;;;;;;;;;;sBAGL,aAAIxC,IAAJ,KAAa,Q;;;;;;;;sBAIbuC,c;;;;;;;;;;;;;;;;;;8BAGEpB,K,EAAO;AAAA;;AACf,UAAMwB,WAAW,EAAjB;AACAxB,YAAMvB,OAAN,CAAc,UAACgD,QAAD,EAAc;AAC1BD,iBAASxD,IAAT,CAAc,OAAK2B,QAAL,CAAc8B,QAAd,CAAd;AACD,OAFD;AAGA,aAAOC,QAAQC,GAAR,CAAYH,QAAZ,CAAP;AACD;;;+BAEUC,Q,EAAU;AACnB,UAAIA,SAASG,KAAT,CAAelG,UAAUmG,iBAAzB,KACAJ,SAASG,KAAT,CAAelG,UAAUoG,kBAAzB,CADA,IAEApG,UAAUqG,uBAAV,CAAkC5E,QAAlC,CAA2C,eAAK6E,OAAL,CAAaP,QAAb,CAA3C,CAFA,IAGAA,SAASG,KAAT,CAAelG,UAAUuG,oBAAzB,CAHJ,EAGoD;AAClD;AACD;;AAED,cAAQ,eAAKD,OAAL,CAAaP,QAAb,CAAR;AACE,aAAK,MAAL;AACE;AACF,aAAK,OAAL;AACA,aAAK,MAAL;AACE;AACF,aAAK,KAAL;AACE;AACF,aAAK,OAAL;AACE;AACF,aAAK,aAAL;AACA,aAAK,MAAL;AACA,aAAK,MAAL;AACE;AACF;AACE;AAfJ;AAiBD;;;;6GAEcA,Q;;;;;;;;;AACTS,0B,GAAa,EAAEC,gBAAgB,EAAlB,EAAsBC,cAAc,EAApC,E;AACXC,4B,GAAe,KAAKC,UAAL,CAAgBb,QAAhB,C;;uBACE,KAAK1F,EAAL,CAAQwG,OAAR,CAAgBd,QAAhB,EAA0BY,aAAaG,cAAvC,C;;;AAAjBC,wB;;;AAEN;AACA;AACA;AACMC,wB,GAAW,OAAO,KAAK3G,EAAL,CAAQiE,KAAR,CAAcyB,QAAd,EAAwBkB,IAA/B,KAAwC,WAAxC,GACf,KAAK5G,EAAL,CAAQiE,KAAR,CAAcyB,QAAd,EAAwBkB,IADT,GAEf,KAAK5G,EAAL,CAAQiE,KAAR,CAAcyB,QAAd,EAAwBmB,gB;AACpBC,uB,GAAU,OAAO,IAAP,GAAcnH,UAAUoH,yB;;sBAEpCT,qCAAkCK,YAAYG,O;;;;;AAC1CE,6B,GAAgB9C,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASsH,cAA3B,EAA2C;AAC/D7D,wBAAMqC,QADyD;AAE/DzG,wBAAMU,UAAUa;AAF+C,iBAA3C,C;;;AAKtB2F,6BAAa;AACXC,kCAAgB,CAACY,aAAD,CADL;AAEXX,gCAAc,CAACX,QAAD;AAFH,iBAAb;;;;;AAKA,oBAAIY,qCAAkCA,mCAAtC,EAAwE;AACtE;AACA,uBAAKa,iBAAL,CAAuBzB,QAAvB,EAAiCgB,QAAjC;;AAEA;AACA,uBAAKU,mBAAL,CAAyB1B,QAAzB,EAAmCgB,QAAnC;;AAEA,sBAAI,KAAKrG,aAAT,EAAwB;AACtB,yBAAKA,aAAL,CAAmB6E,oBAAnB,IAA2CyB,QAA3C;AACD;AACF;;AAEKU,uB,GAAU,IAAIf,YAAJ,CAAiBI,QAAjB,EAA2BhB,QAA3B,EAAqC;AACnDrF,iCAAe,KAAKA,aAD+B;AAEnD;AACA;AACA;AACA;AACAD,6BAAW,KAAKA,SANmC;AAOnD;AACAkH,uCAAqB,KAAKlK,MAAL,CAAYmK,kBARkB;AASnDC,iCAAe,KAAKxH,EAAL,CAAQiE;AAT4B,iBAArC,C;;uBAYGoD,QAAQI,IAAR,E;;;AAAnBtB,0B;;;;AAGF;8BACyCA,U,EAAjCC,c,eAAAA,c,EAAgBC,Y,eAAAA,Y;;;AAExBD,+BAAe1D,OAAf,CAAuB,UAACvB,OAAD,EAAa;AAClC,sBAAI,OAAOA,QAAQlC,IAAf,KAAwB,WAA5B,EAAyC;AACvC,0BAAM,IAAId,KAAJ,CAAU,8BAAV,CAAN;AACD;AACD,yBAAKiC,SAAL,CAAesH,WAAf,CAA2BvG,QAAQlC,IAAnC,EAAyCkC,OAAzC;AACD,iBALD;;AAOAkF,6BAAa3D,OAAb,CAAqB,UAACiF,SAAD,EAAe;AAClC,yBAAKvH,SAAL,CAAewH,iBAAf,CAAiCD,SAAjC,EAA4CrB,aAAauB,WAAzD;AACD,iBAFD;;;;;;;;;;;;;;;;;;;;wFAOE,E;+BADFC,I;YAAAA,I;mCAAY7G,Q;YAAAA,Q,kCAAWC,O;qCAAS6G,U;YAAAA,U;+BAAwBC,I;YAAAA,I;;;;;;;;uBAElD,kC;;;;uBAEc,KAAKC,eAAL,CAAqB,KAAKlI,WAA1B,C;;;AAAduF,qB;;;AAEN,oBAAIA,MAAMC,MAAN,EAAJ,EAAoB;AAClB,sBAAI,KAAKxF,WAAL,CAAiBmI,QAAjB,CAA0B,MAA1B,CAAJ,EAAuC;AACrC,qCAAIxK,IAAJ,CAAS,oDAAT;AACA,yBAAKsC,EAAL,GAAU,IAAI8H,IAAJ,CAAS,KAAK/H,WAAd,CAAV;AACD,mBAHD,MAGO;AACL,qCAAIrC,IAAJ,CAAS,wDAAT;AACA,yBAAKsC,EAAL,GAAU,IAAIgI,IAAJ,CAAS,KAAKjI,WAAd,CAAV;AACD;AACF,iBARD,MAQO;AACL;AACA,mCAAIrC,IAAJ,CAAS,qDAAT;AACA,uBAAKsC,EAAL,GAAU,IAAI+H,UAAJ,CAAe,KAAKhI,WAApB,CAAV;AACD;;AAED,qBAAKC,EAAL,CAAQmI,mBAAR,CAA4B,KAAK7H,cAAjC;;;uBAE0B,KAAK8H,gBAAL,E;;;AAAtB/H,6B;;uBACkB,KAAKgI,gBAAL,CAAsBhI,aAAtB,C;;;AAAtBA,6B;;;AAEA,iCAAI3C,IAAJ,CAAS,8BAAT,EAAyC,KAAKN,MAAL,CAAYiC,QAArD;AACA,oBAAI,KAAKjC,MAAL,CAAYiC,QAAZ,KAAyB,IAA7B,EAAmC;AAC3BiJ,gCAD2B,GACV;AACrB;AACA;AACAC,+BAAW,KAAKnJ,MAAL,CAAYoJ,MAAZ,CAAmB5F,MAAnB,KAA8B,CAHpB;AAIrBvD,8BAAUgB;AAJW,mBADU;;AAQjC;AACA;;AACA,sBAAIiI,eAAeC,SAAnB,EAA8B;AAC5BD,mCAAeE,MAAf,GAAwB,KAAKpJ,MAAL,CAAYoJ,MAApC;AACD;;AAEDvH,2BAASS,GAAT,CAAa,KAAKC,MAAL,CAAY,EAAEE,OAAOyG,cAAT,EAAZ,CAAb;AACD;;kDAEMjI,a;;;;;;;;;;;;;;;;;;mCAGMoI,a,EAAeC,K,EAAO;AACnC,UAAI,KAAKtL,MAAL,CAAYkD,cAAhB,EAAgC;AAC9B,eAAO,KAAKlD,MAAL,CAAYkD,cAAZ,CAA2BmI,aAA3B,EAA0CC,KAA1C,CAAP;AACD;;AAED,UAAI,KAAKtL,MAAL,CAAYwG,QAAhB,EAA0B;AACxB,YAAM+E,oBAAoB,CACxB,eADwB,EACP,cADO,CAA1B;;AAIA;AACA;AACA,YAAID,SAASC,kBAAkBvH,QAAlB,CAA2BqH,aAA3B,CAAb,EAAwD;AACtD,iBAAO,IAAP;AACD;;AAED,eAAO,KAAKrL,MAAL,CAAYwG,QAAZ,CAAqBgF,IAArB,CAA0B,UAACC,CAAD;AAAA,iBAAOA,MAAMJ,aAAb;AAAA,SAA1B,CAAP;AACD;;AAED;AACA,aAAO,IAAP;AACD;;;;;;;YAEUK,I,uEAAO,E;;;;;;;;;;uBAER,KAAKC,eAAL,CAAqBD,IAArB,C;;;;uBACc,KAAK9I,EAAL,CAAQgE,QAAR,E;;;AAAdC,qB;;sBAEF,KAAK7G,MAAL,CAAYwG,QAAZ,IACF,CAAC,KAAKxG,MAAL,CAAYwG,QAAZ,CAAqBgF,IAArB,CAA0B,UAACI,CAAD;AAAA,yBAAO9E,OAAO+E,IAAP,CAAYhF,KAAZ,EAAmB7C,QAAnB,CAA4B4H,CAA5B,CAAP;AAAA,iBAA1B,C;;;;;AACKE,sB,GAAS,KAAK9L,MAAL,CAAYwG,QAAZ,CAAqB7C,IAArB,CAA0B,IAA1B,C;sBACT,IAAI5C,KAAJ,kCAAyC+K,MAAzC,C;;;;AAGR;AACMC,uC,GAA0BjF,OAAO+E,IAAP,CAAYhF,KAAZ,EAAmBmF,MAAnB,CAA0B,UAAC/F,IAAD,EAAU;AAClE,yBAAO,CAACa,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqC,OAAKhE,aAAL,CAAmBgJ,MAAxD,EAAgEhG,IAAhE,CAAR;AACD,iBAF+B,C;;uBAI1B,KAAKiG,SAAL,CAAeH,uBAAf,C;;;;AAEN,qBAAK5H,KAAL,CAAWuH,KAAK7H,QAAhB;AACA;AACA;AACA;AACA,oBAAI,KAAK7D,MAAL,CAAYG,WAAZ,KAA4B,IAAhC,EAAsC;AAChCgM,0BADgC,GACrB,KAAKnK,MAAL,CAAYoJ,MAAZ,CAAmB5F,MAAnB,GAA4B,CAA5B,GAAgC,CAAhC,GAAoC,CADf;;AAEpC,sBAAI2G,aAAa,CAAb,IAAkB,KAAKnM,MAAL,CAAYoM,gBAAZ,KAAiC,IAAvD,EAA6D;AAC3DD,+BAAW,KAAKnK,MAAL,CAAYqK,QAAZ,CAAqB7G,MAArB,GAA8B,CAA9B,GAAkC,CAAlC,GAAsC,CAAjD;AACD;AACD9E,0BAAQ4L,IAAR,CAAaH,QAAb;AACD;;;;;;;;AAED,qBAAKI,WAAL,eAAsBb,KAAK7H,QAA3B;;;;;;;;;;;;;;;;;;;;;YAKM6H,I,uEAAO,E;;;;;sBACX,KAAK1L,MAAL,CAAYiC,QAAZ,KAAyB,I;;;;;;;uBAEnB,KAAK0J,eAAL,CAAqBD,IAArB,C;;;;AAEN;AACA;AACA;AACA,oBAAI,KAAK1L,MAAL,CAAYG,WAAZ,KAA4B,IAAhC,EAAsC;AACpCO,0BAAQ4L,IAAR,CAAa,KAAKtK,MAAL,CAAYoJ,MAAZ,CAAmB5F,MAAnB,GAA4B,CAA5B,GAAgC,CAAhC,GAAoC,CAAjD;AACD;;kDAEM,KAAKxD,M;;;;;;AAEZ,iCAAI2E,KAAJ;AACA,qBAAK4F,WAAL,eAAsBb,KAAK7H,QAA3B;;;;;uBAKE,KAAKwG,IAAL,CAAUqB,IAAV,C;;;kDACC,KAAK1J,M;;;;;;;;;;;;;;;;;;;8GAGSiB,a;;;;;;;;uBACM,KAAKuJ,eAAL,CAAqBvJ,aAArB,C;;;AAAvBwJ,8B;;uBACmB,KAAKC,WAAL,CAAiBD,cAAjB,C;;;AAAvBA,8B;;AACAA,iCAAiB,KAAKE,eAAL,CAAqBF,cAArB,CAAjB;kDACO,KAAKG,0BAAL,CAAgCH,cAAhC,C;;;;;;;;;;;;;;;;;;oCAGOxJ,a,EAA0D;AAAA;;AAAA,UAA3C4J,mBAA2C;;AACxE/F,aAAO+E,IAAP,CAAY5I,cAAcgJ,MAA1B,EAAkC3G,OAAlC,CAA0C,UAACwH,UAAD,EAAgB;AACxD,YAAI,4BAAiB9I,QAAjB,CAA0Bf,cAAcgJ,MAAd,CAAqBa,UAArB,CAA1B,CAAJ,EAAiE;AAC/D,iBAAK9J,SAAL,CAAeiB,QAAf,CACE6C,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASuK,cAA3B,EAA2C;AACzC9G,kBAAM6G;AADmC,WAA3C,CADF;AAKD;;AAED,YAAID,oBAAoB7I,QAApB,CAA6Bf,cAAcgJ,MAAd,CAAqBa,UAArB,CAA7B,CAAJ,EAAoE;AAClE,iBAAK9J,SAAL,CAAegK,UAAf,CACElG,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASyK,iBAA3B,EAA8C;AAC5ChH,kBAAM6G;AADsC,WAA9C,CADF;AAKD;AACF,OAhBD;;AAkBA,aAAO7J,aAAP;AACD;;;;8GAEqBA,a;;;;;;AACdiK,0B,GAAa,E;;uBAEC,KAAKtK,EAAL,CAAQgE,QAAR,E;;;AAAdC,qB;;AACNC,uBAAO+E,IAAP,CAAYhF,KAAZ,EAAmBvB,OAAnB,CAA2B,UAACgD,QAAD,EAAc;AACvC,sBAAI,OAAOzB,MAAMyB,QAAN,EAAgBkB,IAAvB,KAAgC,WAAhC,IACA,OAAO3C,MAAMyB,QAAN,EAAgBmB,gBAAvB,KAA4C,WADhD,EAC6D;AAC3D,0BAAM,IAAI1I,KAAJ,4BAAmCuH,QAAnC,CAAN;AACD;;AAED,sBAAIzB,MAAMyB,QAAN,EAAgBkB,IAAhB,KAAyB,CAAzB,IACA3C,MAAMyB,QAAN,EAAgBmB,gBAAhB,KAAqC,CADzC,EAC4C;AAC1CyD,+BAAWrI,IAAX,CAAgByD,QAAhB;AACD;AACF,iBAVD;;AAYA;AACArF,8BAAciK,UAAd,GAA2BA,UAA3B;kDACOjK,a;;;;;;;;;;;;;;;;;;;+GAGSA,a;;;;;;;;AACVkK,0B,GAAa,0B;AACblB,sB,GAAS,E;;uBACK,KAAKrJ,EAAL,CAAQwK,aAAR,CAAsB,KAAtB,C;;;AAAdvG,qB;;uBAEA0B,QAAQC,GAAR,CAAY3B,MAAMwG,GAAN;AAAA,wGAAU,kBAAO/E,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCACP,OAAK1F,EAAL,CAAQwG,OAAR,CAAgBd,QAAhB,CADO;;AAAA;AACpBrC,gCADoB;AAEpBqH,sCAFoB,GAEPH,WAAW1E,KAAX,CAAiBxC,IAAjB,CAFO;;;AAI1B,gCAAIqH,eAAe,KAAnB,EAA0B;AACxB,+CAAI3G,KAAJ,CAAa2G,UAAb,qBAAuChF,QAAvC;AACA2D,qCAAO3D,QAAP,IAAmBgF,UAAnB;;AAEA,qCAAKtK,SAAL,CAAe4E,SAAf,CACEd,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAAS+K,aAA3B,EAA0C;AACxCtH,sCAAMqC;AADkC,+BAA1C,CADF;AAKD;;AAbyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAV;;AAAA;AAAA;AAAA;AAAA,oBAAZ,C;;;;AAgBN;AACArF,8BAAcgJ,MAAd,GAAuBA,MAAvB;mDACOhJ,a;;;;;;;;;;;;;;;;;;;+GAGwBA,a;;;;;;;;AACzBuK,oC,GAAuB,E;;uBAET,KAAK5K,EAAL,CAAQwK,aAAR,CAAsB,KAAtB,C;;;AAAdvG,qB;;uBAEA0B,QAAQC,GAAR,CAAY3B,MAAMwG,GAAN;AAAA,wGAAU,mBAAO/E,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCACtBA,YAAYrF,cAAcgJ,MADJ;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;AAAA,mCAIH,OAAKrJ,EAAL,CAAQwG,OAAR,CAAgBd,QAAhB,CAJG;;AAAA;AAIpBgB,oCAJoB;;AAK1B,gCAAI,iCAAoBA,QAApB,CAAJ,EAAmC;AACjC,+CAAI3C,KAAJ,gCAAuC2B,QAAvC;AACAkF,mDAAqB3I,IAArB,CAA0ByD,QAA1B;AACD;;AARyB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAV;;AAAA;AAAA;AAAA;AAAA,oBAAZ,C;;;;AAWN;AACArF,8BAAcuK,oBAAd,GAAqCA,oBAArC;mDACOvK,a;;;;;;;;;;;;;;;;;;sCAGSqF,Q,EAAUgB,Q,EAAU;AACpC,UAAIA,YAAYA,SAASmE,IAAT,EAAhB,EAAiC;AAC/B,YAAMC,UAAUpE,SAASb,KAAT,CAAelG,UAAUoL,WAAV,CAAsBC,EAArC,CAAhB;;AAEA,YAAIF,OAAJ,EAAa;AACX,eAAK1K,SAAL,CAAe4E,SAAf,CACEd,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASqL,mBAA3B,EAAgD;AAC9C5H,kBAAMqC;AADwC,WAAhD,CADF;AAKD;AACF;AACF;;;wCAEmBA,Q,EAAUgB,Q,EAAU;AAAA;;AACtC,UAAIA,YAAYA,SAASmE,IAAT,EAAhB,EAAiC;AAC/B,yCAAgBK,SAAhB,CAA0BxI,OAA1B,CAAkC,UAACyI,SAAD,EAAe;AAC/C,cAAMC,gBAAgB1F,SAASG,KAAT,CAAesF,SAAf,CAAtB;;AAEA,cAAIC,aAAJ,EAAmB;AACjB,mBAAKhL,SAAL,CAAegK,UAAf,CACElG,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASyL,wBAA3B,EAAqD;AACnDhI,oBAAMqC;AAD6C,aAArD,CADF;AAID;;AAED,cAAM4F,gBAAgB5E,SAASb,KAAT,CAAesF,SAAf,CAAtB;;AAEA,cAAIG,aAAJ,EAAmB;AAAA,wCACsB,uCACrCA,aADqC,CADtB;AAAA,gBACTC,WADS,yBACTA,WADS;AAAA,gBACIC,aADJ,yBACIA,aADJ;;AAIjB,mBAAKpL,SAAL,CAAegK,UAAf,CACElG,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASyL,wBAA3B,EAAqD;AACnDhI,oBAAMqC,QAD6C;AAEnDnC,sBAAQiI,aAF2C;AAGnDlI,oBAAMiI;AAH6C,aAArD,CADF;AAMD;AACF,SAvBD;;AAyBA,yCAAgBzI,IAAhB,CAAqBJ,OAArB,CAA6B,UAAC+I,SAAD,EAAe;AAC1C,cAAM5F,QAAQa,SAASb,KAAT,CAAe4F,SAAf,CAAd;;AAEA,cAAI5F,KAAJ,EAAW;AAAA,yCAC8B,uCAA0BA,KAA1B,CAD9B;AAAA,gBACD0F,WADC,0BACDA,WADC;AAAA,gBACYC,aADZ,0BACYA,aADZ;;AAGT,mBAAKpL,SAAL,CAAegK,UAAf,CACElG,OAAO+C,MAAP,CAAc,EAAd,EAAkBrH,SAASyL,wBAA3B,EAAqD;AACnDhI,oBAAMqC,QAD6C;AAEnDpC,oBAAMiI,WAF6C;AAGnDhI,sBAAQiI,aAH2C;AAInD;AACA;AACAE,wBAAU7F,MAAM,CAAN;AANyC,aAArD,CADF;AASD;AACF,SAhBD;AAiBD;AACF;;;sBAnnBU8F,G,EAAK;AACd,WAAKC,OAAL,GAAeD,GAAf;;AAEA;AACA;AACA;AACA,UAAI,KAAKC,OAAL,CAAahI,QAAjB,EAA2B;AACzB,YAAIA,WAAWiI,MAAMC,OAAN,CAAc,KAAKF,OAAL,CAAahI,QAA3B,IACb,KAAKgI,OAAL,CAAahI,QADA,GACW,CAAC,KAAKgI,OAAL,CAAahI,QAAd,CAD1B;AAEAA,mBAAWA,SAASwF,MAAT,CAAgB,UAAC2C,EAAD;AAAA,iBAAQA,MAAMA,GAAGnJ,MAAH,GAAY,CAA1B;AAAA,SAAhB,CAAX;;AAEA,aAAKgJ,OAAL,CAAahI,QAAb,GAAwBA,QAAxB;AACD;AACF,K;wBAEY;AACX,aAAO,KAAKgI,OAAZ;AACD;;;wBA4JY;AAAA;;AACX,UAAMxM,SAAS;AACb4M,eAAO,KAAK5L,SAAL,CAAewC,MADT;AAEbL,iBAAS,EAFI;AAGblD,kBAAU,KAAKgB;AAHF,OAAf;;AAMA,UAAI,KAAKjD,MAAL,CAAYwG,QAAhB,EAA0B;AACxBxE,eAAOwE,QAAP,GAAkB,KAAKxG,MAAL,CAAYwG,QAA9B;AACD;;AAEDjE,gBAAUmB,aAAV,CAAwB4B,OAAxB,CAAgC,UAACzD,IAAD,EAAU;AACxC,YAAM0D,cAAiB1D,IAAjB,MAAN;AACAG,eAAOuD,WAAP,IAAsB,OAAKvC,SAAL,CAAeuC,WAAf,CAAtB;AACAvD,eAAOmD,OAAP,CAAeI,WAAf,IAA8B,OAAKvC,SAAL,CAAeuC,WAAf,EAA4BC,MAA1D;AACD,OAJD;AAKA,aAAOxD,MAAP;AACD;;;;;kBA1MkBS,M;;;;;;AChCrB;;;;;;;ACAA,gD;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;AACA;;AAEA;AACA,KAAK;AACL;AACA,E;;;;;;ACrCA,kBAAkB,wD;;;;;;ACAlB;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AACA;;AAEA;AACA;AACA,6BAA6B;AAC7B,cAAc;AACd;AACA,CAAC;AACD;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,UAAU;AACV,CAAC;;;;;;;AChBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;;AAEA,8BAA8B,aAAa;;AAE3C;AACA;AACA;AACA;AACA;AACA,yCAAyC,oCAAoC;AAC7E,6CAA6C,oCAAoC;AACjF,KAAK,4BAA4B,oCAAoC;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA,kCAAkC,2BAA2B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;ACpEA;;;;;;;ACAA;;;;;;;;ACAA;AACA;AACA;AACA;AACA;;AAEA;AACA,6FAAkF,aAAa,EAAE;;AAEjG;AACA,qDAAqD,4BAA4B;AACjF;AACA;;;;;;;ACZA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;;;;;ACxCA;AACA;;;;;;;ACDA;AACA;AACA;;AAEA;AACA,oEAAoE,iCAAiC;AACrG;;;;;;;ACNA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACZA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,eAAe,yBAAyB;AACxC;AACA;AACA;AACA;AACA;AACA;;;;;;;;AClBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC,cAAc;AACd,iBAAiB;AACjB;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;;;;;;ACjCA,8BAA8B;;;;;;;ACA9B;AACA,UAAU;AACV;;;;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;;AAEA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA,6CAA6C;AAC7C;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,mBAAmB,kCAAkC;AACrD,SAAS;AACT;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,eAAe,uCAAuC;AACtD;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA,uBAAuB,0BAA0B;AACjD;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH,kBAAkB,yBAAyB,KAAK;AAChD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB,wBAAwB;AACxB,gBAAgB;AAChB,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0DAA0D,oBAAoB;AAC9E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA,CAAC;;;;;;;AC7RD;AACA;AACA;AACA;AACA,2BAA2B,kBAAkB,EAAE;;AAE/C;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,iBAAiB,EAAE;AAC1D;AACA;AACA;AACA;AACA;AACA,mEAAmE,gBAAgB;AACnF;AACA;AACA,GAAG,4CAA4C,gCAAgC;AAC/E;AACA;AACA;AACA;AACA;AACA;;;;;;;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,uCAAuC,sBAAsB,EAAE;AAC/D;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;ACpEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACjBA;AACA;AACA,YAAY;AACZ,GAAG;AACH,YAAY;AACZ;AACA;;;;;;;ACNA;AACA;;AAEA;;;;;;;ACHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC,GAAG;AACH;;;;;;;ACbA;AACA;;AAEA;AACA;AACA,iCAAiC,qBAAqB;AACtD;AACA,iCAAiC,SAAS,EAAE;AAC5C,CAAC,YAAY;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS,qBAAqB;AAC3D,iCAAiC,aAAa;AAC9C;AACA,GAAG,YAAY;AACf;AACA;;;;;;;;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA,8DAA8D,UAAU,EAAE;AAC1E,KAAK;AACL;AACA,8DAA8D,SAAS,EAAE;AACzE,KAAK;AACL;AACA,CAAC,EAAE;;;;;;;;ACnBH;AACA;AACA;AACA;AACA;;AAEA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,CAAC,EAAE;;;;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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBAAsB;AACtB,sBAAsB,uBAAuB,WAAW,IAAI;AAC5D,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;AACA,KAAK;AACL;AACA,sBAAsB,mCAAmC;AACzD,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,gCAAgC;AAChG;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAA0D,kBAAkB;;AAE5E;AACA;AACA;AACA,oBAAoB,uBAAuB;;AAE3C,oDAAoD,6BAA6B;;AAEjF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH,0BAA0B,eAAe,EAAE;AAC3C,0BAA0B,gBAAgB;AAC1C,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,OAAO,QAAQ,iCAAiC;AACpG,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzOA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,sBAAsB;AAChF,kFAAkF,wBAAwB;AAC1G;;;;;;;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;ACdA;;;;;;;ACAA,cAAc;;;;;;;ACAd;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;;;;;;AClBA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;AACf;AACA;;;;;;;ACfA;;;;;;;ACAA;;;;;;;;ACAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA,sCAAsC,uCAAuC,gBAAgB;;AAE7F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,E;;;;;;AChCA,kBAAkB,yD;;;;;;ACAlB;AACA;;;;;;;ACDA;AACA;AACA,8BAA8B,+CAA8C;;;;;;;ACF5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA,OAAO,YAAY,cAAc;AACjC;AACA;AACA;AACA;AACA;AACA;AACA,KAAK,GAAG;AACR;AACA;;;;;;;ACxBA,kBAAkB,yD;;;;;;ACAlB;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA,8BAA8B,kCAAsC;;;;;;;ACFpE,yC;;;;;;ACAA,6C;;;;;;;;;;;;;;;;;;ACAA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;AASA;;;;;;AAEA,IAAMkc,YAAY,mBAAI;AACpBC,aAAW,IADS;AAEpBC,iBAAe,UAFK;AAGp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","file":"addons-linter.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { getConfig } from 'cli';\nimport Linter from 'linter';\nimport log from 'logger';\n\n\nexport function isRunFromCLI(_module = module) {\n  return require.main === _module;\n}\n\nexport function createInstance({\n  config = getConfig({ useCLI: isRunFromCLI() }).argv, runAsBinary = false,\n} = {}) {\n  log.level = config.logLevel;\n  log.info('Creating new linter instance', { config });\n  // eslint-disable-next-line no-param-reassign\n  config.runAsBinary = runAsBinary;\n  return new Linter(config);\n}\n\nexport default Linter;\n","module.exports = function(module) {\r\n\tif (!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tif (!module.children) module.children = [];\r\n\t\tObject.defineProperty(module, \"loaded\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.l;\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(module, \"id\", {\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function() {\r\n\t\t\t\treturn module.i;\r\n\t\t\t}\r\n\t\t});\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n};\r\n","import yargs from 'yargs';\nimport { oneLine } from 'common-tags';\n\nimport log from 'logger';\nimport options from 'yargs-options';\n\nimport { version } from '../package';\n\nexport function terminalWidth(_process = process) {\n  if (_process && _process.stdout && _process.stdout.columns > 0) {\n    let width = _process.stdout.columns - 2;\n    // Terminals less than ten pixels wide seem silly.\n    if (width < 10) {\n      width = 10;\n    }\n    return width;\n  }\n  return 78;\n}\n\nexport function getConfig({ useCLI = true, argv } = {}) {\n  if (useCLI === false) {\n    log.error(oneLine`Config requested from CLI, but not in CLI mode.\n      Please supply a config instead of relying on the getConfig() call.`);\n    throw new Error('Cannot request config from CLI in library mode');\n  }\n\n  // Used by test.main,js to override CLI arguments (because\n  // the  process.argv array is controlled by jest),\n  // See #1762 for a rationale.\n  const cliArgv = argv ? yargs(argv) : yargs;\n\n  return cliArgv\n    .usage(`Usage: ./$0 [options] addon-package-or-dir \\n\\n\n      Add-ons Linter (JS Edition) v${version}`)\n    .options(options)\n    // Require one non-option.\n    .demand(1)\n    .help('help')\n    .alias('h', 'help')\n    .wrap(terminalWidth());\n}\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperties = require(\"../core-js/object/define-properties\");\n\nvar _defineProperties2 = _interopRequireDefault(_defineProperties);\n\nvar _freeze = require(\"../core-js/object/freeze\");\n\nvar _freeze2 = _interopRequireDefault(_freeze);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (strings, raw) {\n  return (0, _freeze2.default)((0, _defineProperties2.default)(strings, {\n    raw: {\n      value: (0, _freeze2.default)(raw)\n    }\n  }));\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/define-properties\"), __esModule: true };","require('../../modules/es6.object.define-properties');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperties(T, D) {\n  return $Object.defineProperties(T, D);\n};\n","var $export = require('./_export');\n// 19.1.2.3 / 15.2.3.7 Object.defineProperties(O, Properties)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperties: require('./_object-dps') });\n","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var core = module.exports = { version: '2.5.7' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2018 Denis Pushkarev (zloirock.ru)'\n});\n","module.exports = true;\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n","module.exports = { \"default\": require(\"core-js/library/fn/object/freeze\"), __esModule: true };","require('../../modules/es6.object.freeze');\nmodule.exports = require('../../modules/_core').Object.freeze;\n","// 19.1.2.5 Object.freeze(O)\nvar isObject = require('./_is-object');\nvar meta = require('./_meta').onFreeze;\n\nrequire('./_object-sap')('freeze', function ($freeze) {\n  return function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(meta(it)) : it;\n  };\n});\n","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n","// most Object methods by ES6 should accept primitives\nvar $export = require('./_export');\nvar core = require('./_core');\nvar fails = require('./_fails');\nmodule.exports = function (KEY, exec) {\n  var fn = (core.Object || {})[KEY] || Object[KEY];\n  var exp = {};\n  exp[KEY] = exec(fn);\n  $export($export.S + $export.F * fails(function () { fn(1); }), 'Object', exp);\n};\n","module.exports = require(\"yargs\");","module.exports = require(\"common-tags\");","import pino from 'pino';\n\n\nexport function createLogger(_process = process) {\n  const level = _process.env.LOG_LEVEL || 'fatal';\n  return pino({\n    name: 'AddonLinterJS',\n    level,\n  }, process.stdout);\n}\n\n\nexport default createLogger();\n","module.exports = require(\"pino\");","const options = {\n  'log-level': {\n    describe: 'The log-level to generate',\n    type: 'string',\n    default: 'fatal',\n    choices: ['fatal', 'error', 'warn', 'info', 'debug', 'trace'],\n  },\n  'warnings-as-errors': {\n    describe: 'Treat warning as errors',\n    type: 'boolean',\n    default: false,\n  },\n  output: {\n    alias: 'o',\n    describe: 'The type of output to generate',\n    type: 'string',\n    default: 'text',\n    choices: ['json', 'text'],\n  },\n  metadata: {\n    describe: 'Output only metadata as JSON',\n    type: 'boolean',\n    default: 'false',\n  },\n  pretty: {\n    describe: 'Prettify JSON output',\n    type: 'boolean',\n    default: false,\n  },\n  stack: {\n    describe: 'Show stacktraces when errors are thrown',\n    type: 'boolean',\n    default: false,\n  },\n  boring: {\n    describe: 'Disables colorful shell output',\n    type: 'boolean',\n    default: false,\n  },\n  'self-hosted': {\n    describe: 'Disables messages related to hosting on addons.mozilla.org.',\n    type: 'boolean',\n    default: false,\n  },\n  'scan-file': {\n    alias: ['f'],\n    describe: 'Scan a selected file',\n    type: 'string',\n    requiresArg: true,\n  },\n  'disable-linter-rules': {\n    describe: 'Disable list of comma separated eslint rules',\n    type: 'string',\n    requiresArg: true,\n  },\n};\n\nexport default options;\n\nexport function getDefaultConfigValue(name) {\n  if (options[name] && 'default' in options[name]) {\n    return options[name].default;\n  }\n  return undefined;\n}\n","import path from 'path';\n\nimport columnify from 'columnify';\nimport chalk from 'chalk';\nimport Dispensary from 'dispensary';\nimport { oneLine } from 'common-tags';\n\nimport { lstatPromise } from 'io/utils';\nimport { terminalWidth } from 'cli';\nimport * as constants from 'const';\nimport { BANNED_LIBRARIES, UNADVISED_LIBRARIES } from 'libraries';\nimport * as messages from 'messages';\nimport {\n  checkMinNodeVersion,\n  i18n,\n  couldBeMinifiedCode,\n  getLineAndColumnFromMatch,\n} from 'utils';\nimport log from 'logger';\nimport Collector from 'collector';\nimport DefaultManifestJSONParser from 'parsers/manifestjson';\nimport BinaryScanner from 'scanners/binary';\nimport CSSScanner from 'scanners/css';\nimport FilenameScanner from 'scanners/filename';\nimport HTMLScanner from 'scanners/html';\nimport JavaScriptScanner from 'scanners/javascript';\nimport JSONScanner from 'scanners/json';\nimport LangpackScanner from 'scanners/langpack';\nimport { Crx, Directory, Xpi } from 'io';\nimport { MINER_BLOCKLIST } from 'miner_blocklist';\n\n\nexport default class Linter {\n  constructor(config) {\n    this.config = config;\n    ([this.packagePath] = config._);\n    this.io = null;\n    this.chalk = new chalk.constructor(\n      { enabled: !this.config.boring });\n    this.collector = new Collector(config);\n    this.addonMetadata = null;\n    this.shouldScanFile = this.shouldScanFile.bind(this);\n  }\n\n  set config(cfg) {\n    this._config = cfg;\n\n    // normalize the scanFile option:\n    // convert into an array if needed and filter out any undefined\n    // or empty strings.\n    if (this._config.scanFile) {\n      let scanFile = Array.isArray(this._config.scanFile) ?\n        this._config.scanFile : [this._config.scanFile];\n      scanFile = scanFile.filter((el) => el && el.length > 0);\n\n      this._config.scanFile = scanFile;\n    }\n  }\n\n  get config() {\n    return this._config;\n  }\n\n  colorize(type) {\n    switch (type) {\n      case constants.VALIDATION_ERROR:\n        return this.chalk.red;\n      case constants.VALIDATION_WARNING:\n        return this.chalk.yellow;\n      case constants.VALIDATION_NOTICE:\n        return this.chalk.blue;\n      default:\n        throw new Error(oneLine`colorize passed invalid type.\n          Should be one of ${constants.MESSAGE_TYPES.join(', ')}`);\n    }\n  }\n\n  handleError(err, _console = console) {\n    if (err.message.includes('DuplicateZipEntry')) {\n      this.collector.addError(messages.DUPLICATE_XPI_ENTRY);\n      this.print(_console);\n    } else if (err.message.includes(\n      constants.ZIP_LIB_CORRUPT_FILE_ERROR)) {\n      this.collector.addError(messages.BAD_ZIPFILE);\n      this.print(_console);\n    } else if (this.config.stack === true) {\n      _console.error(err.stack);\n    } else {\n      _console.error(this.chalk.red(err.message || err));\n    }\n  }\n\n  print(_console = console) {\n    if (this.config.output === 'none') {\n      return;\n    }\n    if (this.config.output === 'json') {\n      _console.log(this.toJSON(this.config.pretty));\n    } else {\n      _console.log(this.textOutput());\n    }\n  }\n\n  toJSON({ input = this.output, pretty = this.config.pretty, _JSON = JSON } = {}) {\n    const args = [input];\n    if (pretty === true) {\n      args.push(null);\n      args.push(4);\n    }\n    return _JSON.stringify.apply(null, args);\n  }\n\n  textOutput(_terminalWidth = terminalWidth) {\n    const maxColumns = _terminalWidth();\n    const out = [];\n\n    out.push(i18n._('Validation Summary:'));\n    out.push('');\n    out.push(columnify(this.output.summary, {\n      showHeaders: false,\n      minWidth: 15,\n    }));\n    out.push('');\n\n    constants.MESSAGE_TYPES.forEach((type) => {\n      const messageType = `${type}s`;\n      if (this.output[messageType].length) {\n        const outputConfig = {\n          code: {\n            dataTransform: (value) => {\n              return this.colorize(type)(value);\n            },\n            headingTransform: () => {\n              return i18n._('Code');\n            },\n            maxWidth: 35,\n          },\n          message: {\n            headingTransform: () => {\n              return i18n._('Message');\n            },\n            maxWidth: (maxColumns - 35) * 0.25,\n          },\n          description: {\n            headingTransform: () => {\n              return i18n._('Description');\n            },\n            maxWidth: (maxColumns - 35) * 0.5,\n          },\n          file: {\n            headingTransform: () => {\n              return i18n._('File');\n            },\n            maxWidth: (maxColumns - 35) * 0.25,\n          },\n          line: {\n            headingTransform: () => {\n              return i18n._('Line');\n            },\n            maxWidth: 6,\n          },\n          column: {\n            headingTransform: () => {\n              return i18n._('Column');\n            },\n            maxWidth: 6,\n          },\n        };\n\n        const outputColumns = [\n          'code',\n          'message',\n          'description',\n          'file',\n          'line',\n          'column',\n        ];\n\n        // If the terminal is this small we cave and don't size things\n        // contextually anymore.\n        if (maxColumns < 60) {\n          delete outputColumns[outputColumns.indexOf('column')];\n          delete outputConfig.column;\n          delete outputColumns[outputColumns.indexOf('description')];\n          delete outputConfig.description;\n          delete outputColumns[outputColumns.indexOf('line')];\n          delete outputConfig.line;\n\n          outputConfig.message.maxWidth = 15;\n          outputConfig.file.maxWidth = 15;\n        } else if (maxColumns < 78) {\n          delete outputColumns[outputColumns.indexOf('description')];\n          delete outputConfig.description;\n\n          outputConfig.message.maxWidth = (maxColumns - 47) * 0.5;\n          outputConfig.file.maxWidth = (maxColumns - 35) * 0.5;\n        }\n\n        out.push(`${messageType.toUpperCase()}:`);\n        out.push('');\n        out.push(columnify(this.output[messageType], {\n          maxWidth: 35,\n          columns: outputColumns,\n          columnSplitter: '   ',\n          config: outputConfig,\n        }));\n      }\n    });\n\n    if (this.output.scanFile) {\n      out.push(`Selected files: ${this.output.scanFile.join(', ')}`);\n      out.push('');\n    }\n\n    return out.join('\\n');\n  }\n\n  get output() {\n    const output = {\n      count: this.collector.length,\n      summary: {},\n      metadata: this.addonMetadata,\n    };\n\n    if (this.config.scanFile) {\n      output.scanFile = this.config.scanFile;\n    }\n\n    constants.MESSAGE_TYPES.forEach((type) => {\n      const messageType = `${type}s`;\n      output[messageType] = this.collector[messageType];\n      output.summary[messageType] = this.collector[messageType].length;\n    });\n    return output;\n  }\n\n  async getAddonMetadata({\n    _log = log,\n    ManifestJSONParser = DefaultManifestJSONParser,\n  } = {}) {\n    if (this.addonMetadata !== null) {\n      _log.debug('Metadata already set; returning cached metadata.');\n      return this.addonMetadata;\n    }\n    const files = await this.io.getFiles();\n    if (Object.prototype.hasOwnProperty.call(files, constants.MANIFEST_JSON)) {\n      _log.info('Retrieving metadata from manifest.json');\n      const json = await this.io.getFileAsString(constants.MANIFEST_JSON);\n      const manifestParser = new ManifestJSONParser(\n        json,\n        this.collector,\n        {\n          selfHosted: this.config.selfHosted,\n          io: this.io,\n        },\n      );\n      if (manifestParser.parsedJSON.icons) {\n        await manifestParser.validateIcons();\n      }\n      this.addonMetadata = manifestParser.getMetadata();\n    } else {\n      _log.warn(`No ${constants.MANIFEST_JSON} was found in the package metadata`);\n      this.collector.addNotice(messages.TYPE_NO_MANIFEST_JSON);\n      this.addonMetadata = {};\n    }\n    this.addonMetadata.totalScannedFileSize = 0;\n    return this.addonMetadata;\n  }\n\n  async checkFileExists(filepath, _lstatPromise = lstatPromise) {\n    const invalidMessage = new Error(\n      `Path \"${filepath}\" is not a file or directory or does not exist.`);\n    try {\n      const stats = await _lstatPromise(filepath);\n      if (stats.isFile() === true || stats.isDirectory() === true) {\n        return stats;\n      }\n    } catch (err) {\n      if (err.code !== 'ENOENT') {\n        throw err;\n      }\n    }\n    throw invalidMessage;\n  }\n\n  scanFiles(files) {\n    const promises = [];\n    files.forEach((filename) => {\n      promises.push(this.scanFile(filename));\n    });\n    return Promise.all(promises);\n  }\n\n  getScanner(filename) {\n    if (filename.match(constants.HIDDEN_FILE_REGEX) ||\n        filename.match(constants.FLAGGED_FILE_REGEX) ||\n        constants.FLAGGED_FILE_EXTENSIONS.includes(path.extname(filename)) ||\n        filename.match(constants.ALREADY_SIGNED_REGEX)) {\n      return FilenameScanner;\n    }\n\n    switch (path.extname(filename)) {\n      case '.css':\n        return CSSScanner;\n      case '.html':\n      case '.htm':\n        return HTMLScanner;\n      case '.js':\n        return JavaScriptScanner;\n      case '.json':\n        return JSONScanner;\n      case '.properties':\n      case '.ftl':\n      case '.dtd':\n        return LangpackScanner;\n      default:\n        return BinaryScanner;\n    }\n  }\n\n  async scanFile(filename) {\n    let scanResult = { linterMessages: [], scannedFiles: [] };\n    const ScannerClass = this.getScanner(filename);\n    const fileData = await this.io.getFile(filename, ScannerClass.fileResultType);\n\n    // First: check that this file is under our 2MB parsing limit. Otherwise\n    // it will be very slow and may crash the lint with an out-of-memory\n    // error.\n    const fileSize = typeof this.io.files[filename].size !== 'undefined' ?\n      this.io.files[filename].size :\n      this.io.files[filename].uncompressedSize;\n    const maxSize = 1024 * 1024 * constants.MAX_FILE_SIZE_TO_PARSE_MB;\n\n    if (ScannerClass !== BinaryScanner && fileSize >= maxSize) {\n      const filesizeError = Object.assign({}, messages.FILE_TOO_LARGE, {\n        file: filename,\n        type: constants.VALIDATION_ERROR,\n      });\n\n      scanResult = {\n        linterMessages: [filesizeError],\n        scannedFiles: [filename],\n      };\n    } else {\n      if (ScannerClass !== BinaryScanner && ScannerClass !== FilenameScanner) {\n        // Check for badwords across all code files\n        this._markBadwordUsage(filename, fileData);\n\n        // Check for coin miners\n        this._markCoinMinerUsage(filename, fileData);\n\n        if (this.addonMetadata) {\n          this.addonMetadata.totalScannedFileSize += fileSize;\n        }\n      }\n\n      const scanner = new ScannerClass(fileData, filename, {\n        addonMetadata: this.addonMetadata,\n        // This is for the JSONScanner, which is a bit of an anomaly and\n        // accesses the collector directly.\n        // TODO: Bring this in line with other scanners, see:\n        // https://github.com/mozilla/addons-linter/issues/895\n        collector: this.collector,\n        // list of disabled rules for js scanner\n        disabledLinterRules: this.config.disableLinterRules,\n        existingFiles: this.io.files,\n      });\n\n      scanResult = await scanner.scan();\n    }\n\n    // messages should be a list of raw message data objects.\n    const { linterMessages, scannedFiles } = scanResult;\n\n    linterMessages.forEach((message) => {\n      if (typeof message.type === 'undefined') {\n        throw new Error('message.type must be defined');\n      }\n      this.collector._addMessage(message.type, message);\n    });\n\n    scannedFiles.forEach((_filename) => {\n      this.collector.recordScannedFile(_filename, ScannerClass.scannerName);\n    });\n  }\n\n  async extractMetadata({\n    _Crx = Crx, _console = console, _Directory = Directory, _Xpi = Xpi,\n  } = {}) {\n    await checkMinNodeVersion();\n\n    const stats = await this.checkFileExists(this.packagePath);\n\n    if (stats.isFile()) {\n      if (this.packagePath.endsWith('.crx')) {\n        log.info('Package is a file ending in .crx; parsing as a CRX');\n        this.io = new _Crx(this.packagePath);\n      } else {\n        log.info('Package is a file. Attempting to parse as an .xpi/.zip');\n        this.io = new _Xpi(this.packagePath);\n      }\n    } else {\n      // If not a file then it's a directory.\n      log.info('Package path is a directory. Parsing as a directory');\n      this.io = new _Directory(this.packagePath);\n    }\n\n    this.io.setScanFileCallback(this.shouldScanFile);\n\n    let addonMetadata = await this.getAddonMetadata();\n    addonMetadata = await this.markSpecialFiles(addonMetadata);\n\n    log.info('Metadata option is set to %s', this.config.metadata);\n    if (this.config.metadata === true) {\n      const metadataObject = {\n        // Reflects if errors were encountered in extraction\n        // of metadata.\n        hasErrors: this.output.errors.length !== 0,\n        metadata: addonMetadata,\n      };\n\n      // If errors exist the data is available via the\n      // errors list.\n      if (metadataObject.hasErrors) {\n        metadataObject.errors = this.output.errors;\n      }\n\n      _console.log(this.toJSON({ input: metadataObject }));\n    }\n\n    return addonMetadata;\n  }\n\n  shouldScanFile(fileOrDirName, isDir) {\n    if (this.config.shouldScanFile) {\n      return this.config.shouldScanFile(fileOrDirName, isDir);\n    }\n\n    if (this.config.scanFile) {\n      const manifestFileNames = [\n        'manifest.json', 'package.json',\n      ];\n\n      // Always scan sub directories and the manifest files,\n      // or the linter will not be able to detect the addon type.\n      if (isDir || manifestFileNames.includes(fileOrDirName)) {\n        return true;\n      }\n\n      return this.config.scanFile.some((v) => v === fileOrDirName);\n    }\n\n    // Defaults to true.\n    return true;\n  }\n\n  async scan(deps = {}) {\n    try {\n      await this.extractMetadata(deps);\n      const files = await this.io.getFiles();\n\n      if (this.config.scanFile &&\n        !this.config.scanFile.some((f) => Object.keys(files).includes(f))) {\n        const _files = this.config.scanFile.join(', ');\n        throw new Error(`Selected file(s) not found: ${_files}`);\n      }\n\n      // Known libraries do not need to be scanned\n      const filesWithoutJSLibraries = Object.keys(files).filter((file) => {\n        return !Object.prototype.hasOwnProperty.call(this.addonMetadata.jsLibs, file);\n      });\n\n      await this.scanFiles(filesWithoutJSLibraries);\n\n      this.print(deps._console);\n      // This is skipped in code coverage because the\n      // test runs against un-instrumented code.\n      /* istanbul ignore if */\n      if (this.config.runAsBinary === true) {\n        let exitCode = this.output.errors.length > 0 ? 1 : 0;\n        if (exitCode === 0 && this.config.warningsAsErrors === true) {\n          exitCode = this.output.warnings.length > 0 ? 1 : 0;\n        }\n        process.exit(exitCode);\n      }\n    } catch (err) {\n      this.handleError(err, deps._console);\n      throw err;\n    }\n  }\n\n  async run(deps = {}) {\n    if (this.config.metadata === true) {\n      try {\n        await this.extractMetadata(deps);\n\n        // This is skipped in the code coverage because the\n        // test runs against un-instrumented code.\n        /* istanbul ignore if */\n        if (this.config.runAsBinary === true) {\n          process.exit(this.output.errors.length > 0 ? 1 : 0);\n        }\n\n        return this.output;\n      } catch (err) {\n        log.debug(err);\n        this.handleError(err, deps._console);\n        throw err;\n      }\n    }\n\n    await this.scan(deps);\n    return this.output;\n  }\n\n  async markSpecialFiles(addonMetadata) {\n    let _addonMetadata = await this._markEmptyFiles(addonMetadata);\n    _addonMetadata = await this._markJSLibs(_addonMetadata);\n    _addonMetadata = this._markBannedLibs(_addonMetadata);\n    return this._markUnknownOrMinifiedCode(_addonMetadata);\n  }\n\n  _markBannedLibs(addonMetadata, _unadvisedLibraries = UNADVISED_LIBRARIES) {\n    Object.keys(addonMetadata.jsLibs).forEach((pathToFile) => {\n      if (BANNED_LIBRARIES.includes(addonMetadata.jsLibs[pathToFile])) {\n        this.collector.addError(\n          Object.assign({}, messages.BANNED_LIBRARY, {\n            file: pathToFile,\n          })\n        );\n      }\n\n      if (_unadvisedLibraries.includes(addonMetadata.jsLibs[pathToFile])) {\n        this.collector.addWarning(\n          Object.assign({}, messages.UNADVISED_LIBRARY, {\n            file: pathToFile,\n          })\n        );\n      }\n    });\n\n    return addonMetadata;\n  }\n\n  async _markEmptyFiles(addonMetadata) {\n    const emptyFiles = [];\n\n    const files = await this.io.getFiles();\n    Object.keys(files).forEach((filename) => {\n      if (typeof files[filename].size === 'undefined' &&\n          typeof files[filename].uncompressedSize === 'undefined') {\n        throw new Error(`No size available for ${filename}`);\n      }\n\n      if (files[filename].size === 0 ||\n          files[filename].uncompressedSize === 0) {\n        emptyFiles.push(filename);\n      }\n    });\n\n    // eslint-disable-next-line no-param-reassign\n    addonMetadata.emptyFiles = emptyFiles;\n    return addonMetadata;\n  }\n\n  async _markJSLibs(addonMetadata) {\n    const dispensary = new Dispensary();\n    const jsLibs = {};\n    const files = await this.io.getFilesByExt('.js');\n\n    await Promise.all(files.map(async (filename) => {\n      const file = await this.io.getFile(filename);\n      const hashResult = dispensary.match(file);\n\n      if (hashResult !== false) {\n        log.debug(`${hashResult} detected in ${filename}`);\n        jsLibs[filename] = hashResult;\n\n        this.collector.addNotice(\n          Object.assign({}, messages.KNOWN_LIBRARY, {\n            file: filename,\n          })\n        );\n      }\n    }));\n\n    // eslint-disable-next-line no-param-reassign\n    addonMetadata.jsLibs = jsLibs;\n    return addonMetadata;\n  }\n\n  async _markUnknownOrMinifiedCode(addonMetadata) {\n    const unknownMinifiedFiles = [];\n\n    const files = await this.io.getFilesByExt('.js');\n\n    await Promise.all(files.map(async (filename) => {\n      if (filename in addonMetadata.jsLibs) {\n        return;\n      }\n      const fileData = await this.io.getFile(filename);\n      if (couldBeMinifiedCode(fileData)) {\n        log.debug(`Minified code detected in ${filename}`);\n        unknownMinifiedFiles.push(filename);\n      }\n    }));\n\n    // eslint-disable-next-line no-param-reassign\n    addonMetadata.unknownMinifiedFiles = unknownMinifiedFiles;\n    return addonMetadata;\n  }\n\n  _markBadwordUsage(filename, fileData) {\n    if (fileData && fileData.trim()) {\n      const matches = fileData.match(constants.BADWORDS_RE.en);\n\n      if (matches) {\n        this.collector.addNotice(\n          Object.assign({}, messages.MOZILLA_COND_OF_USE, {\n            file: filename,\n          })\n        );\n      }\n    }\n  }\n\n  _markCoinMinerUsage(filename, fileData) {\n    if (fileData && fileData.trim()) {\n      MINER_BLOCKLIST.filenames.forEach((nameRegex) => {\n        const filenameMatch = filename.match(nameRegex);\n\n        if (filenameMatch) {\n          this.collector.addWarning(\n            Object.assign({}, messages.COINMINER_USAGE_DETECTED, {\n              file: filename,\n            }));\n        }\n\n        const fileDataMatch = fileData.match(nameRegex);\n\n        if (fileDataMatch) {\n          const { matchedLine, matchedColumn } = getLineAndColumnFromMatch(\n            fileDataMatch);\n\n          this.collector.addWarning(\n            Object.assign({}, messages.COINMINER_USAGE_DETECTED, {\n              file: filename,\n              column: matchedColumn,\n              line: matchedLine,\n            }));\n        }\n      });\n\n      MINER_BLOCKLIST.code.forEach((codeRegex) => {\n        const match = fileData.match(codeRegex);\n\n        if (match) {\n          const { matchedLine, matchedColumn } = getLineAndColumnFromMatch(match);\n\n          this.collector.addWarning(\n            Object.assign({}, messages.COINMINER_USAGE_DETECTED, {\n              file: filename,\n              line: matchedLine,\n              column: matchedColumn,\n              // use dataPath for our actual match to avoid any obvious\n              // duplicates\n              dataPath: match[0],\n            }));\n        }\n      });\n    }\n  }\n}\n","module.exports = require(\"regenerator-runtime\");\n","module.exports = require(\"regenerator-runtime\");","\"use strict\";\n\nexports.__esModule = true;\n\nvar _promise = require(\"../core-js/promise\");\n\nvar _promise2 = _interopRequireDefault(_promise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (fn) {\n  return function () {\n    var gen = fn.apply(this, arguments);\n    return new _promise2.default(function (resolve, reject) {\n      function step(key, arg) {\n        try {\n          var info = gen[key](arg);\n          var value = info.value;\n        } catch (error) {\n          reject(error);\n          return;\n        }\n\n        if (info.done) {\n          resolve(value);\n        } else {\n          return _promise2.default.resolve(value).then(function (value) {\n            step(\"next\", value);\n          }, function (err) {\n            step(\"throw\", err);\n          });\n        }\n      }\n\n      return step(\"next\");\n    });\n  };\n};","module.exports = { \"default\": require(\"core-js/library/fn/promise\"), __esModule: true };","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.promise');\nrequire('../modules/es7.promise.finally');\nrequire('../modules/es7.promise.try');\nmodule.exports = require('../modules/_core').Promise;\n","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n","module.exports = require('./_hide');\n","module.exports = {};\n","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","module.exports = function () { /* empty */ };\n","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n","'use strict';\nvar LIBRARY = require('./_library');\nvar global = require('./_global');\nvar ctx = require('./_ctx');\nvar classof = require('./_classof');\nvar $export = require('./_export');\nvar isObject = require('./_is-object');\nvar aFunction = require('./_a-function');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar speciesConstructor = require('./_species-constructor');\nvar task = require('./_task').set;\nvar microtask = require('./_microtask')();\nvar newPromiseCapabilityModule = require('./_new-promise-capability');\nvar perform = require('./_perform');\nvar userAgent = require('./_user-agent');\nvar promiseResolve = require('./_promise-resolve');\nvar PROMISE = 'Promise';\nvar TypeError = global.TypeError;\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8 || '';\nvar $Promise = global[PROMISE];\nvar isNode = classof(process) == 'process';\nvar empty = function () { /* empty */ };\nvar Internal, newGenericPromiseCapability, OwnPromiseCapability, Wrapper;\nvar newPromiseCapability = newGenericPromiseCapability = newPromiseCapabilityModule.f;\n\nvar USE_NATIVE = !!function () {\n  try {\n    // correct subclassing with @@species support\n    var promise = $Promise.resolve(1);\n    var FakePromise = (promise.constructor = {})[require('./_wks')('species')] = function (exec) {\n      exec(empty, empty);\n    };\n    // unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    return (isNode || typeof PromiseRejectionEvent == 'function')\n      && promise.then(empty) instanceof FakePromise\n      // v8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n      // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n      // we can't detect it synchronously, so just check versions\n      && v8.indexOf('6.6') !== 0\n      && userAgent.indexOf('Chrome/66') === -1;\n  } catch (e) { /* empty */ }\n}();\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\nvar notify = function (promise, isReject) {\n  if (promise._n) return;\n  promise._n = true;\n  var chain = promise._c;\n  microtask(function () {\n    var value = promise._v;\n    var ok = promise._s == 1;\n    var i = 0;\n    var run = function (reaction) {\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (promise._h == 2) onHandleUnhandled(promise);\n            promise._h = 1;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // may throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (e) {\n        if (domain && !exited) domain.exit();\n        reject(e);\n      }\n    };\n    while (chain.length > i) run(chain[i++]); // variable length - can't use forEach\n    promise._c = [];\n    promise._n = false;\n    if (isReject && !promise._h) onUnhandled(promise);\n  });\n};\nvar onUnhandled = function (promise) {\n  task.call(global, function () {\n    var value = promise._v;\n    var unhandled = isUnhandled(promise);\n    var result, handler, console;\n    if (unhandled) {\n      result = perform(function () {\n        if (isNode) {\n          process.emit('unhandledRejection', value, promise);\n        } else if (handler = global.onunhandledrejection) {\n          handler({ promise: promise, reason: value });\n        } else if ((console = global.console) && console.error) {\n          console.error('Unhandled promise rejection', value);\n        }\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      promise._h = isNode || isUnhandled(promise) ? 2 : 1;\n    } promise._a = undefined;\n    if (unhandled && result.e) throw result.v;\n  });\n};\nvar isUnhandled = function (promise) {\n  return promise._h !== 1 && (promise._a || promise._c).length === 0;\n};\nvar onHandleUnhandled = function (promise) {\n  task.call(global, function () {\n    var handler;\n    if (isNode) {\n      process.emit('rejectionHandled', promise);\n    } else if (handler = global.onrejectionhandled) {\n      handler({ promise: promise, reason: promise._v });\n    }\n  });\n};\nvar $reject = function (value) {\n  var promise = this;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  promise._v = value;\n  promise._s = 2;\n  if (!promise._a) promise._a = promise._c.slice();\n  notify(promise, true);\n};\nvar $resolve = function (value) {\n  var promise = this;\n  var then;\n  if (promise._d) return;\n  promise._d = true;\n  promise = promise._w || promise; // unwrap\n  try {\n    if (promise === value) throw TypeError(\"Promise can't be resolved itself\");\n    if (then = isThenable(value)) {\n      microtask(function () {\n        var wrapper = { _w: promise, _d: false }; // wrap\n        try {\n          then.call(value, ctx($resolve, wrapper, 1), ctx($reject, wrapper, 1));\n        } catch (e) {\n          $reject.call(wrapper, e);\n        }\n      });\n    } else {\n      promise._v = value;\n      promise._s = 1;\n      notify(promise, false);\n    }\n  } catch (e) {\n    $reject.call({ _w: promise, _d: false }, e); // wrap\n  }\n};\n\n// constructor polyfill\nif (!USE_NATIVE) {\n  // 25.4.3.1 Promise(executor)\n  $Promise = function Promise(executor) {\n    anInstance(this, $Promise, PROMISE, '_h');\n    aFunction(executor);\n    Internal.call(this);\n    try {\n      executor(ctx($resolve, this, 1), ctx($reject, this, 1));\n    } catch (err) {\n      $reject.call(this, err);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars\n  Internal = function Promise(executor) {\n    this._c = [];             // <- awaiting reactions\n    this._a = undefined;      // <- checked in isUnhandled reactions\n    this._s = 0;              // <- state\n    this._d = false;          // <- done\n    this._v = undefined;      // <- value\n    this._h = 0;              // <- rejection state, 0 - default, 1 - handled, 2 - unhandled\n    this._n = false;          // <- notify\n  };\n  Internal.prototype = require('./_redefine-all')($Promise.prototype, {\n    // 25.4.5.3 Promise.prototype.then(onFulfilled, onRejected)\n    then: function then(onFulfilled, onRejected) {\n      var reaction = newPromiseCapability(speciesConstructor(this, $Promise));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = isNode ? process.domain : undefined;\n      this._c.push(reaction);\n      if (this._a) this._a.push(reaction);\n      if (this._s) notify(this, false);\n      return reaction.promise;\n    },\n    // 25.4.5.1 Promise.prototype.catch(onRejected)\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    this.promise = promise;\n    this.resolve = ctx($resolve, promise, 1);\n    this.reject = ctx($reject, promise, 1);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === $Promise || C === Wrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Promise: $Promise });\nrequire('./_set-to-string-tag')($Promise, PROMISE);\nrequire('./_set-species')(PROMISE);\nWrapper = require('./_core')[PROMISE];\n\n// statics\n$export($export.S + $export.F * !USE_NATIVE, PROMISE, {\n  // 25.4.4.5 Promise.reject(r)\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    var $$reject = capability.reject;\n    $$reject(r);\n    return capability.promise;\n  }\n});\n$export($export.S + $export.F * (LIBRARY || !USE_NATIVE), PROMISE, {\n  // 25.4.4.6 Promise.resolve(x)\n  resolve: function resolve(x) {\n    return promiseResolve(LIBRARY && this === Wrapper ? $Promise : this, x);\n  }\n});\n$export($export.S + $export.F * !(USE_NATIVE && require('./_iter-detect')(function (iter) {\n  $Promise.all(iter)['catch'](empty);\n})), PROMISE, {\n  // 25.4.4.1 Promise.all(iterable)\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var values = [];\n      var index = 0;\n      var remaining = 1;\n      forOf(iterable, false, function (promise) {\n        var $index = index++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        C.resolve(promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[$index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  },\n  // 25.4.4.4 Promise.race(iterable)\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      forOf(iterable, false, function (promise) {\n        C.resolve(promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.e) reject(result.v);\n    return capability.promise;\n  }\n});\n","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","// 7.3.20 SpeciesConstructor(O, defaultConstructor)\nvar anObject = require('./_an-object');\nvar aFunction = require('./_a-function');\nvar SPECIES = require('./_wks')('species');\nmodule.exports = function (O, D) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? D : aFunction(S);\n};\n","var ctx = require('./_ctx');\nvar invoke = require('./_invoke');\nvar html = require('./_html');\nvar cel = require('./_dom-create');\nvar global = require('./_global');\nvar process = global.process;\nvar setTask = global.setImmediate;\nvar clearTask = global.clearImmediate;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\nvar run = function () {\n  var id = +this;\n  // eslint-disable-next-line no-prototype-builtins\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\nvar listener = function (event) {\n  run.call(event.data);\n};\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!setTask || !clearTask) {\n  setTask = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func\n      invoke(typeof fn == 'function' ? fn : Function(fn), args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clearTask = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (require('./_cof')(process) == 'process') {\n    defer = function (id) {\n      process.nextTick(ctx(run, id, 1));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(ctx(run, id, 1));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  } else if (MessageChannel) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = ctx(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (global.addEventListener && typeof postMessage == 'function' && !global.importScripts) {\n    defer = function (id) {\n      global.postMessage(id + '', '*');\n    };\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in cel('script')) {\n    defer = function (id) {\n      html.appendChild(cel('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run.call(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(ctx(run, id, 1), 0);\n    };\n  }\n}\nmodule.exports = {\n  set: setTask,\n  clear: clearTask\n};\n","// fast apply, http://jsperf.lnkit.com/fast-apply/5\nmodule.exports = function (fn, args, that) {\n  var un = that === undefined;\n  switch (args.length) {\n    case 0: return un ? fn()\n                      : fn.call(that);\n    case 1: return un ? fn(args[0])\n                      : fn.call(that, args[0]);\n    case 2: return un ? fn(args[0], args[1])\n                      : fn.call(that, args[0], args[1]);\n    case 3: return un ? fn(args[0], args[1], args[2])\n                      : fn.call(that, args[0], args[1], args[2]);\n    case 4: return un ? fn(args[0], args[1], args[2], args[3])\n                      : fn.call(that, args[0], args[1], args[2], args[3]);\n  } return fn.apply(that, args);\n};\n","var global = require('./_global');\nvar macrotask = require('./_task').set;\nvar Observer = global.MutationObserver || global.WebKitMutationObserver;\nvar process = global.process;\nvar Promise = global.Promise;\nvar isNode = require('./_cof')(process) == 'process';\n\nmodule.exports = function () {\n  var head, last, notify;\n\n  var flush = function () {\n    var parent, fn;\n    if (isNode && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (e) {\n        if (head) notify();\n        else last = undefined;\n        throw e;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // Node.js\n  if (isNode) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // browsers with MutationObserver, except iOS Safari - https://github.com/zloirock/core-js/issues/339\n  } else if (Observer && !(global.navigator && global.navigator.standalone)) {\n    var toggle = true;\n    var node = document.createTextNode('');\n    new Observer(flush).observe(node, { characterData: true }); // eslint-disable-line no-new\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    var promise = Promise.resolve(undefined);\n    notify = function () {\n      promise.then(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n\n  return function (fn) {\n    var task = { fn: fn, next: undefined };\n    if (last) last.next = task;\n    if (!head) {\n      head = task;\n      notify();\n    } last = task;\n  };\n};\n","'use strict';\n// 25.4.1.5 NewPromiseCapability(C)\nvar aFunction = require('./_a-function');\n\nfunction PromiseCapability(C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n}\n\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","module.exports = function (exec) {\n  try {\n    return { e: false, v: exec() };\n  } catch (e) {\n    return { e: true, v: e };\n  }\n};\n","var global = require('./_global');\nvar navigator = global.navigator;\n\nmodule.exports = navigator && navigator.userAgent || '';\n","var anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar newPromiseCapability = require('./_new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n","// https://github.com/tc39/proposal-promise-finally\n'use strict';\nvar $export = require('./_export');\nvar core = require('./_core');\nvar global = require('./_global');\nvar speciesConstructor = require('./_species-constructor');\nvar promiseResolve = require('./_promise-resolve');\n\n$export($export.P + $export.R, 'Promise', { 'finally': function (onFinally) {\n  var C = speciesConstructor(this, core.Promise || global.Promise);\n  var isFunction = typeof onFinally == 'function';\n  return this.then(\n    isFunction ? function (x) {\n      return promiseResolve(C, onFinally()).then(function () { return x; });\n    } : onFinally,\n    isFunction ? function (e) {\n      return promiseResolve(C, onFinally()).then(function () { throw e; });\n    } : onFinally\n  );\n} });\n","'use strict';\n// https://github.com/tc39/proposal-promise-try\nvar $export = require('./_export');\nvar newPromiseCapability = require('./_new-promise-capability');\nvar perform = require('./_perform');\n\n$export($export.S, 'Promise', { 'try': function (callbackfn) {\n  var promiseCapability = newPromiseCapability.f(this);\n  var result = perform(callbackfn);\n  (result.e ? promiseCapability.reject : promiseCapability.resolve)(result.v);\n  return promiseCapability.promise;\n} });\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _isIterable2 = require(\"../core-js/is-iterable\");\n\nvar _isIterable3 = _interopRequireDefault(_isIterable2);\n\nvar _getIterator2 = require(\"../core-js/get-iterator\");\n\nvar _getIterator3 = _interopRequireDefault(_getIterator2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = (0, _getIterator3.default)(arr), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if ((0, _isIterable3.default)(Object(arr))) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/is-iterable\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.is-iterable');\n","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').isIterable = function (it) {\n  var O = Object(it);\n  return O[ITERATOR] !== undefined\n    || '@@iterator' in O\n    // eslint-disable-next-line no-prototype-builtins\n    || Iterators.hasOwnProperty(classof(O));\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/get-iterator\"), __esModule: true };","require('../modules/web.dom.iterable');\nrequire('../modules/es6.string.iterator');\nmodule.exports = require('../modules/core.get-iterator');\n","var anObject = require('./_an-object');\nvar get = require('./core.get-iterator-method');\nmodule.exports = require('./_core').getIterator = function (it) {\n  var iterFn = get(it);\n  if (typeof iterFn != 'function') throw TypeError(it + ' is not iterable!');\n  return anObject(iterFn.call(it));\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nexports.default = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      (0, _defineProperty2.default)(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();","module.exports = { \"default\": require(\"core-js/library/fn/object/define-property\"), __esModule: true };","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","module.exports = require(\"path\");","module.exports = require(\"columnify\");","module.exports = require(\"chalk\");","module.exports = require(\"dispensary\");","import { lstat, readdir } from 'fs';\nimport * as path from 'path';\n\nimport promisify from 'es6-promisify';\nimport upath from 'upath';\n\nimport log from 'logger';\n\nexport const lstatPromise = promisify(lstat);\nexport const readdirPromise = promisify(readdir);\n\nexport function walkPromise(curPath, { shouldIncludePath = () => true } = {}) {\n  const result = {};\n  // Set a basePath var with the initial path\n  // so all file paths (the result keys) can\n  // be relative to the starting point.\n  const basePath = curPath;\n  return (async function walk(_curPath) {\n    const stat = await lstatPromise(_curPath);\n    const relPath = upath.toUnix(path.relative(basePath, _curPath));\n\n    if (!shouldIncludePath(relPath, stat.isDirectory())) {\n      log.debug(`Skipping file path: ${relPath}`);\n    } else if (stat.isFile()) {\n      const { size } = stat;\n      result[relPath] = { size };\n    } else if (stat.isDirectory()) {\n      const files = await readdirPromise(_curPath);\n\n      // Map the list of files and make a list of readdir\n      // promises to pass to Promise.all so we can recursively\n      // get the data on all the files in the directory.\n      await Promise.all(files.map(async (fileName) => {\n        await walk(path.join(_curPath, fileName));\n      }));\n    }\n    return result;\n  }(curPath));\n}\n","module.exports = require(\"fs\");","module.exports = require(\"es6-promisify\");","module.exports = require(\"upath\");","// eslint-disable-next-line import/extensions\nimport badwords from './badwords.json';\n\nexport const DEFLATE_COMPRESSION = 8;\nexport const NO_COMPRESSION = 0;\n\nexport const ESLINT_ERROR = 2;\nexport const ESLINT_WARNING = 1;\n\n// 3rd party / eslint-internal rules\nexport const EXTERNAL_RULE_MAPPING = {\n  'no-eval': [ESLINT_WARNING, { allowIndirect: false }],\n  'no-implied-eval': ESLINT_WARNING,\n  'no-new-func': ESLINT_WARNING,\n  'no-unsafe-innerhtml/no-unsafe-innerhtml': ESLINT_WARNING,\n};\n\nexport const ESLINT_RULE_MAPPING = Object.assign({\n  'deprecated-entities': ESLINT_WARNING,\n  'event-listener-fourth': ESLINT_WARNING,\n  'global-require-arg': ESLINT_WARNING,\n  'opendialog-nonlit-uri': ESLINT_WARNING,\n  'opendialog-remote-uri': ESLINT_WARNING,\n  'webextension-api': ESLINT_WARNING,\n  'webextension-unsupported-api': ESLINT_WARNING,\n  'content-scripts-file-absent': ESLINT_ERROR,\n}, EXTERNAL_RULE_MAPPING);\n\nexport const VALIDATION_ERROR = 'error';\nexport const VALIDATION_NOTICE = 'notice';\nexport const VALIDATION_WARNING = 'warning';\n\nexport const ESLINT_TYPES = {\n  0: VALIDATION_NOTICE,\n  1: VALIDATION_WARNING,\n  2: VALIDATION_ERROR,\n};\n\nexport const MESSAGE_TYPES = [\n  VALIDATION_ERROR,\n  VALIDATION_NOTICE,\n  VALIDATION_WARNING,\n];\n\n// Package type constants.\nexport const PACKAGE_ANY = 0;\nexport const PACKAGE_EXTENSION = 1;\nexport const PACKAGE_THEME = 2;\nexport const PACKAGE_DICTIONARY = 3;\nexport const PACKAGE_LANGPACK = 4;\nexport const PACKAGE_SEARCHPROV = 5;\nexport const PACKAGE_MULTI = 1; // A multi extension is an extension\nexport const PACKAGE_SUBPACKAGE = 7;\n\nexport const PACKAGE_TYPES = {\n  PACKAGE_ANY,\n  PACKAGE_EXTENSION,\n  PACKAGE_THEME,\n  PACKAGE_DICTIONARY,\n  PACKAGE_LANGPACK,\n  PACKAGE_SEARCHPROV,\n  PACKAGE_MULTI,\n  PACKAGE_SUBPACKAGE,\n};\n\nexport const LOCAL_PROTOCOLS = ['chrome:', 'resource:'];\n\nexport const MANIFEST_JSON = 'manifest.json';\n\nexport const VALID_MANIFEST_VERSION = 2;\n\n// The max file size in MB that the\n// io classes will open as strings or streams.\nexport const MAX_FILE_SIZE_MB = 100;\n// This is the limit in megabytes of a file we will parse (eg. CSS, JS, etc.)\n// A singular CSS/JS file over 4MB seems bad and may actually be full of data\n// best stored in JSON/some other data format rather than code.\n// https://github.com/mozilla/addons-linter/issues/730\n// We increased this limit from 2MB to 4MB as per:\n// https://github.com/mozilla/addons/issues/181\n//\n// We should be careful about increasing this any further.\nexport const MAX_FILE_SIZE_TO_PARSE_MB = 4;\n\nexport const HIDDEN_FILE_REGEX = /^__MACOSX\\//;\nexport const FLAGGED_FILE_REGEX = /thumbs\\.db$|\\.DS_Store$|\\.orig$|\\.old$|~$/i;\nexport const ALREADY_SIGNED_REGEX = /^META-INF\\/manifest\\.mf/;\n\nexport const FLAGGED_FILE_EXTENSIONS = [\n  '.class',\n  '.dll',\n  '.dylib',\n  '.exe',\n  '.jar',\n  '.sh',\n  '.so',\n  '.swf',\n];\n\nexport const IMAGE_FILE_EXTENSIONS = [\n  'jpg',\n  'jpeg',\n  'webp',\n  'gif',\n  'png',\n  'svg',\n];\n\n// A list of magic numbers that we won't allow.\nexport const FLAGGED_FILE_MAGIC_NUMBERS = [\n  [0x4d, 0x5a], // EXE or DLL,\n  [0x5a, 0x4d], // Alternative EXE or DLL\n  [0x7f, 0x45, 0x4c, 0x46], // UNIX elf\n  [0x23, 0x21], // Shell script\n  [0xca, 0xfe, 0xba, 0xbe], // Java + Mach-O (dylib)\n  [0xca, 0xfe, 0xd0, 0x0d], // Java packed\n  [0x43, 0x57, 0x53], // Compressed SWF\n];\n\n// Based on the above, this is how deep we need to look into a file.\nexport const FLAGGED_FILE_MAGIC_NUMBERS_LENGTH = 4;\n\nexport const DEPRECATED_APIS = [\n  'app.getDetails',\n  'extension.onRequest',\n  'extension.onRequestExternal',\n  'extension.sendRequest',\n  'tabs.getAllInWindow',\n  'tabs.getSelected',\n  'tabs.onActiveChanged',\n  'tabs.onSelectionChanged',\n  'tabs.sendRequest',\n];\n\n// These are APIs that will cause problems when loaded temporarily\n// in about:debugging.\nexport const TEMPORARY_APIS = [\n  'identity.getRedirectURL',\n  'storage.local',\n  'storage.sync',\n];\n\n// All valid CSP keywords that are options to keys like `default-src` and\n// `script-src`. Used in manifest.json parser for validation.\n// See https://mzl.la/2vwqbGU for more details and allowed options.\nexport const CSP_KEYWORD_RE = new RegExp([\n  '(self|none|unsafe-inline|strict-dynamic|unsafe-hashed-attributes)',\n  // Only match these keywords, anything else is forbidden\n  '(?!.)',\n  '|(sha(256|384|512)-|nonce-)',\n].join(''));\n\n// All badwords grouped by language as pre-compild regular expression.\n// Note: \\b matches a very limited set of 'word boundaries' which might\n// not work properly once other languages should be matched too.\n// See http://www.ecma-international.org/ecma-262/5.1/#sec-15.10.2.6\nexport const BADWORDS_RE = {\n  en: new RegExp(`\\\\b(?:${badwords.en.join('|')})\\\\b`, 'gi'),\n};\n\nexport const MESSAGES_JSON = 'messages.json';\nexport const LOCALES_DIRECTORY = '_locales';\n\n// This is a string, since it has to be matched globally on a message string.\n// This should match\n// https://searchfox.org/mozilla-central/rev/3abf6fa7e2a6d9a7bfb88796141b0f012e68c2db/toolkit/components/extensions/ExtensionCommon.jsm#1711\nexport const MESSAGE_PLACEHOLDER_REGEXP = '\\\\$([a-zA-Z0-9_@]+)\\\\$';\n\n// yauzl should trow error with this message in case of corrupt zip file\nexport const ZIP_LIB_CORRUPT_FILE_ERROR = 'end of central directory record signature not found';\n","export const BANNED_LIBRARIES = [\n  'angularjs.1.0.2.angular.js',\n  'angularjs.1.0.2.angular.min.js',\n  'angularjs.1.0.3.angular.js',\n  'angularjs.1.0.3.angular.min.js',\n  'angularjs.1.0.4.angular.js',\n  'angularjs.1.0.4.angular.min.js',\n  'angularjs.1.0.5.angular.js',\n  'angularjs.1.0.5.angular.min.js',\n  'angularjs.1.0.6.angular.js',\n  'angularjs.1.0.6.angular.min.js',\n  'angularjs.1.0.7.angular.js',\n  'angularjs.1.0.7.angular.min.js',\n  'angularjs.1.0.8.angular.js',\n  'angularjs.1.0.8.angular.min.js',\n  'angularjs.1.1.0.angular.js',\n  'angularjs.1.1.0.angular.min.js',\n  'angularjs.1.1.1.angular.js',\n  'angularjs.1.1.1.angular.min.js',\n  'angularjs.1.1.2.angular.js',\n  'angularjs.1.1.2.angular.min.js',\n  'angularjs.1.1.3.angular.js',\n  'angularjs.1.1.3.angular.min.js',\n  'angularjs.1.1.4.angular.js',\n  'angularjs.1.1.4.angular.min.js',\n  'angularjs.1.1.5.angular.js',\n  'angularjs.1.1.5.angular.min.js',\n  'angularjs.1.2.0.angular.js',\n  'angularjs.1.2.0.angular.min.js',\n  'angularjs.1.2.1.angular.js',\n  'angularjs.1.2.1.angular.min.js',\n  'angularjs.1.2.2.angular.js',\n  'angularjs.1.2.2.angular.min.js',\n  'angularjs.1.2.3.angular.js',\n  'angularjs.1.2.3.angular.min.js',\n  'angularjs.1.2.4.angular.js',\n  'angularjs.1.2.4.angular.min.js',\n  'angularjs.1.2.5.angular.js',\n  'angularjs.1.2.5.angular.min.js',\n  'angularjs.1.2.6.angular.js',\n  'angularjs.1.2.6.angular.min.js',\n  'angularjs.1.2.7.angular.js',\n  'angularjs.1.2.7.angular.min.js',\n  'angularjs.1.2.8.angular.js',\n  'angularjs.1.2.8.angular.min.js',\n  'angularjs.1.2.9.angular.js',\n  'angularjs.1.2.9.angular.min.js',\n  'angularjs.1.2.10.angular.js',\n  'angularjs.1.2.10.angular.min.js',\n  'angularjs.1.2.11.angular.js',\n  'angularjs.1.2.11.angular.min.js',\n  'angularjs.1.2.12.angular.js',\n  'angularjs.1.2.12.angular.min.js',\n  'angularjs.1.2.13.angular.js',\n  'angularjs.1.2.13.angular.min.js',\n  'angularjs.1.2.14.angular.js',\n  'angularjs.1.2.14.angular.min.js',\n  'angularjs.1.2.15.angular.js',\n  'angularjs.1.2.15.angular.min.js',\n  'angularjs.1.2.16.angular.js',\n  'angularjs.1.2.16.angular.min.js',\n  'angularjs.1.2.17.angular.js',\n  'angularjs.1.2.17.angular.min.js',\n  'angularjs.1.2.18.angular.js',\n  'angularjs.1.2.18.angular.min.js',\n  'angularjs.1.2.19.angular.js',\n  'angularjs.1.2.19.angular.min.js',\n  'angularjs.1.2.20.angular.js',\n  'angularjs.1.2.20.angular.min.js',\n  'angularjs.1.2.21.angular.js',\n  'angularjs.1.2.21.angular.min.js',\n  'angularjs.1.2.22.angular.js',\n  'angularjs.1.2.22.angular.min.js',\n  'angularjs.1.2.23.angular.js',\n  'angularjs.1.2.23.angular.min.js',\n  'angularjs.1.2.24.angular.js',\n  'angularjs.1.2.24.angular.min.js',\n  'angularjs.1.2.25.angular.js',\n  'angularjs.1.2.25.angular.min.js',\n  'angularjs.1.2.26.angular.js',\n  'angularjs.1.2.26.angular.min.js',\n  'angularjs.1.2.27.angular.js',\n  'angularjs.1.2.27.angular.min.js',\n  'angularjs.1.2.28.angular.js',\n  'angularjs.1.2.28.angular.min.js',\n  'angularjs.1.2.29.angular.js',\n  'angularjs.1.2.29.angular.min.js',\n  'angularjs.1.2.30.angular.js',\n  'angularjs.1.2.30.angular.min.js',\n  'angularjs.1.3.0.angular.js',\n  'angularjs.1.3.0.angular.min.js',\n  'angularjs.1.3.1.angular.js',\n  'angularjs.1.3.1.angular.min.js',\n  'angularjs.1.3.2.angular.js',\n  'angularjs.1.3.2.angular.min.js',\n  'angularjs.1.3.3.angular.js',\n  'angularjs.1.3.3.angular.min.js',\n  'angularjs.1.3.4.angular.js',\n  'angularjs.1.3.4.angular.min.js',\n  'angularjs.1.3.5.angular.js',\n  'angularjs.1.3.5.angular.min.js',\n  'angularjs.1.3.6.angular.js',\n  'angularjs.1.3.6.angular.min.js',\n  'angularjs.1.3.7.angular.js',\n  'angularjs.1.3.7.angular.min.js',\n  'angularjs.1.3.8.angular.js',\n  'angularjs.1.3.8.angular.min.js',\n  'angularjs.1.3.9.angular.js',\n  'angularjs.1.3.9.angular.min.js',\n  'angularjs.1.3.10.angular.js',\n  'angularjs.1.3.10.angular.min.js',\n  'angularjs.1.3.11.angular.js',\n  'angularjs.1.3.11.angular.min.js',\n  'angularjs.1.3.12.angular.js',\n  'angularjs.1.3.12.angular.min.js',\n  'angularjs.1.3.13.angular.js',\n  'angularjs.1.3.13.angular.min.js',\n  'angularjs.1.3.14.angular.js',\n  'angularjs.1.3.14.angular.min.js',\n  'angularjs.1.3.15.angular.js',\n  'angularjs.1.3.15.angular.min.js',\n  'angularjs.1.3.16.angular.js',\n  'angularjs.1.3.16.angular.min.js',\n  'angularjs.1.3.17.angular.js',\n  'angularjs.1.3.17.angular.min.js',\n  'angularjs.1.3.18.angular.js',\n  'angularjs.1.3.18.angular.min.js',\n  'angularjs.1.3.19.angular.js',\n  'angularjs.1.3.19.angular.min.js',\n  'angularjs.1.3.20.angular.js',\n  'angularjs.1.3.20.angular.min.js',\n  'angularjs.1.4.0.angular.js',\n  'angularjs.1.4.0.angular.min.js',\n  'angularjs.1.4.1.angular.js',\n  'angularjs.1.4.1.angular.min.js',\n  'angularjs.1.4.2.angular.js',\n  'angularjs.1.4.2.angular.min.js',\n  'angularjs.1.4.3.angular.js',\n  'angularjs.1.4.3.angular.min.js',\n  'angularjs.1.4.4.angular.js',\n  'angularjs.1.4.4.angular.min.js',\n  'angularjs.1.4.5.angular.js',\n  'angularjs.1.4.5.angular.min.js',\n  'angularjs.1.4.6.angular.js',\n  'angularjs.1.4.6.angular.min.js',\n  'angularjs.1.4.7.angular.js',\n  'angularjs.1.4.7.angular.min.js',\n  'angularjs.1.4.8.angular.js',\n  'angularjs.1.4.8.angular.min.js',\n  'angularjs.1.4.9.angular.js',\n  'angularjs.1.4.9.angular.min.js',\n  'angularjs.1.4.10.angular.js',\n  'angularjs.1.4.10.angular.min.js',\n  'angularjs.1.4.11.angular.js',\n  'angularjs.1.4.11.angular.min.js',\n  'angularjs.1.4.12.angular.js',\n  'angularjs.1.4.12.angular.min.js',\n  'angularjs.1.5.0.angular.js',\n  'angularjs.1.5.0.angular.min.js',\n  'angularjs.1.5.1.angular.js',\n  'angularjs.1.5.1.angular.min.js',\n  'angularjs.1.5.2.angular.js',\n  'angularjs.1.5.2.angular.min.js',\n  'angularjs.1.5.3.angular.js',\n  'angularjs.1.5.3.angular.min.js',\n  'angularjs.1.5.4.angular.js',\n  'angularjs.1.5.4.angular.min.js',\n  'angularjs.1.5.5.angular.js',\n  'angularjs.1.5.5.angular.min.js',\n  'angularjs.1.5.6.angular.js',\n  'angularjs.1.5.6.angular.min.js',\n  'angularjs.1.5.7.angular.js',\n  'angularjs.1.5.7.angular.min.js',\n  'angularjs.1.5.8.angular.js',\n  'angularjs.1.5.8.angular.min.js',\n  'angularjs.1.5.9.angular.js',\n  'angularjs.1.5.9.angular.min.js',\n  'angularjs.1.6.0.angular.js',\n  'angularjs.1.6.0.angular.min.js',\n  'angularjs.1.6.1.angular.js',\n  'angularjs.1.6.1.angular.min.js',\n  'angularjs.1.6.2.angular.js',\n  'angularjs.1.6.2.angular.min.js',\n  'angularjs.1.6.3.angular.js',\n  'angularjs.1.6.3.angular.min.js',\n  'angularjs.1.6.4.angular.js',\n  'angularjs.1.6.4.angular.min.js',\n  'angularjs.1.6.5.angular.js',\n  'angularjs.1.6.5.angular.min.js',\n  'angularjs.1.6.6.angular.js',\n  'angularjs.1.6.6.angular.min.js',\n  'angularjs.1.6.7.angular.js',\n  'angularjs.1.6.7.angular.min.js',\n  'angularjs.1.6.8.angular.js',\n  'angularjs.1.6.8.angular.min.js',\n  'angularjs.1.6.9.angular.js',\n  'angularjs.1.6.9.angular.min.js',\n  'angularjs.1.6.10.angular.js',\n  'angularjs.1.6.10.angular.min.js',\n  'angularjs.1.7.0.angular.js',\n  'angularjs.1.7.0.angular.min.js',\n  'angularjs.1.7.1.angular.js',\n  'angularjs.1.7.1.angular.min.js',\n  'angularjs.1.7.2.angular.js',\n  'angularjs.1.7.2.angular.min.js',\n  'jquery.1.2.1.jquery.js',\n  'jquery.1.2.1.jquery.min.js',\n  'jquery.1.2.2.jquery.js',\n  'jquery.1.2.2.jquery.min.js',\n  'jquery.1.2.3.jquery.js',\n  'jquery.1.2.3.jquery.min.js',\n  'jquery.1.2.4.jquery.js',\n  'jquery.1.2.4.jquery.min.js',\n  'jquery.1.2.5.jquery.js',\n  'jquery.1.2.5.jquery.min.js',\n  'jquery.1.2.6.jquery.js',\n  'jquery.1.2.6.jquery.min.js',\n  'jquery.1.2.jquery.js',\n  'jquery.1.2.jquery.min.js',\n  'jquery.1.3.1.jquery.js',\n  'jquery.1.3.1.jquery.min.js',\n  'jquery.1.3.2.jquery.js',\n  'jquery.1.3.2.jquery.min.js',\n  'jquery.1.3.jquery.js',\n  'jquery.1.3.jquery.min.js',\n  'jquery.1.4.1.jquery.js',\n  'jquery.1.4.1.jquery.min.js',\n  'jquery.1.4.2.jquery.js',\n  'jquery.1.4.2.jquery.min.js',\n  'jquery.1.4.3.jquery.js',\n  'jquery.1.4.3.jquery.min.js',\n  'jquery.1.4.4.jquery.js',\n  'jquery.1.4.4.jquery.min.js',\n  'jquery.1.4.jquery.js',\n  'jquery.1.4.jquery.min.js',\n  'jquery.1.5.1.jquery.js',\n  'jquery.1.5.1.jquery.min.js',\n  'jquery.1.5.2.jquery.js',\n  'jquery.1.5.2.jquery.min.js',\n  'jquery.1.5.jquery.js',\n  'jquery.1.5.jquery.min.js',\n  'jquery.1.6.1.jquery.js',\n  'jquery.1.6.1.jquery.min.js',\n  'jquery.1.6.2.jquery.js',\n  'jquery.1.6.2.jquery.min.js',\n  'jquery.1.6.3.jquery.js',\n  'jquery.1.6.3.jquery.min.js',\n  'jquery.1.6.4.jquery.js',\n  'jquery.1.6.4.jquery.min.js',\n  'jquery.1.6.jquery.js',\n  'jquery.1.6.jquery.min.js',\n  'jquery.1.7.0.jquery.js',\n  'jquery.1.7.0.jquery.min.js',\n  'jquery.1.7.1.jquery.js',\n  'jquery.1.7.1.jquery.min.js',\n  'jquery.1.7.2.jquery.js',\n  'jquery.1.7.2.jquery.min.js',\n  'jquery.1.8.0.jquery.js',\n  'jquery.1.8.0.jquery.min.js',\n  'jquery.1.8.1.jquery.js',\n  'jquery.1.8.1.jquery.min.js',\n  'jquery.1.8.2.jquery.js',\n  'jquery.1.8.2.jquery.min.js',\n  'jquery.1.8.3.jquery.js',\n  'jquery.1.8.3.jquery.min.js',\n  'jquery.1.9.0.jquery.js',\n  'jquery.1.9.0.jquery.min.js',\n  'jquery.1.9.1.jquery.js',\n  'jquery.1.9.1.jquery.min.js',\n  'jquery.1.10.0.jquery.js',\n  'jquery.1.10.0.jquery.min.js',\n  'jquery.1.10.1.jquery.js',\n  'jquery.1.10.1.jquery.min.js',\n  'jquery.1.10.2.jquery.js',\n  'jquery.1.10.2.jquery.min.js',\n  'jquery.1.11.0.jquery.js',\n  'jquery.1.11.0.jquery.min.js',\n  'jquery.1.11.1.jquery.js',\n  'jquery.1.11.1.jquery.min.js',\n  'jquery.1.11.2.jquery.js',\n  'jquery.1.11.2.jquery.min.js',\n  'jquery.1.11.3.jquery.js',\n  'jquery.1.11.3.jquery.min.js',\n  'jquery.1.12.0.jquery.js',\n  'jquery.1.12.0.jquery.min.js',\n  'jquery.1.12.1.jquery.js',\n  'jquery.1.12.1.jquery.min.js',\n  'jquery.1.12.2.jquery.js',\n  'jquery.1.12.2.jquery.min.js',\n  'jquery.1.12.3.jquery.js',\n  'jquery.1.12.3.jquery.min.js',\n  'jquery.1.12.4.jquery.js',\n  'jquery.1.12.4.jquery.min.js',\n];\n\nexport const UNADVISED_LIBRARIES = [\n  'jquery.2.0.0.jquery.js',\n  'jquery.2.0.0.jquery.min.js',\n  'jquery.2.0.1.jquery.js',\n  'jquery.2.0.1.jquery.min.js',\n  'jquery.2.0.2.jquery.js',\n  'jquery.2.0.2.jquery.min.js',\n  'jquery.2.0.3.jquery.js',\n  'jquery.2.0.3.jquery.min.js',\n  'jquery.2.1.0.jquery.js',\n  'jquery.2.1.0.jquery.min.js',\n  'jquery.2.1.1.jquery.js',\n  'jquery.2.1.1.jquery.min.js',\n  'jquery.2.1.2.jquery.js',\n  'jquery.2.1.2.jquery.min.js',\n  'jquery.2.1.3.jquery.js',\n  'jquery.2.1.3.jquery.min.js',\n  'jquery.2.1.4.jquery.js',\n  'jquery.2.1.4.jquery.min.js',\n  'jquery.2.2.0.jquery.js',\n  'jquery.2.2.0.jquery.min.js',\n  'jquery.2.2.1.jquery.js',\n  'jquery.2.2.1.jquery.min.js',\n  'jquery.2.2.2.jquery.js',\n  'jquery.2.2.2.jquery.min.js',\n  'jquery.2.2.3.jquery.js',\n  'jquery.2.2.3.jquery.min.js',\n  'jquery.2.2.4.jquery.js',\n  'jquery.2.2.4.jquery.min.js',\n];\n","// Here we can re-export all our message so one can just do\n// import * as messages from 'messages';\n\nexport * from './css';\nexport * from './html';\nexport * from './javascript';\nexport * from './json';\nexport * from './layout';\nexport * from './manifestjson';\nexport * from './fluent';\nexport * from './locale-messagesjson';\n","import { oneLine } from 'common-tags';\n\nimport { i18n } from 'utils';\n\n\nexport const CSS_SYNTAX_ERROR = {\n  code: 'CSS_SYNTAX_ERROR',\n  // This will be overriden by the reason passed from the error.\n  message: i18n._('A CSS syntax error was encountered'),\n  description: i18n._(oneLine`An error was found in the CSS file being\n    processed as a result further processing of that file is not possible`),\n};\n\nexport const INVALID_SELECTOR_NESTING = {\n  code: 'INVALID_SELECTOR_NESTING',\n  message: i18n._('Invalid nesting of selectors found'),\n  description: i18n._(oneLine`Selectors should not be nested`),\n};\n","import url from 'url';\n\nimport upath from 'upath';\nimport { URL } from 'whatwg-url';\nimport Jed from 'jed';\nimport semver from 'semver';\nimport { oneLine } from 'common-tags';\nimport osLocale from 'os-locale';\n\nimport log from 'logger';\nimport { PACKAGE_TYPES, LOCAL_PROTOCOLS } from 'const';\n\n/* global nodeRequire, localesRoot */\n\n\nconst SOURCE_MAP_RE = new RegExp(/\\/\\/[#@]\\s(source(?:Mapping)?URL)=\\s*(\\S+)/);\n\n\nexport function normalizePath(iconPath) {\n  // Convert the icon path to a URL so we can strip any fragments and resolve\n  // . and .. automatically. We need an absolute URL to use as a base so we're\n  // using https://example.com/.\n  const { pathname } = new URL(iconPath, 'https://example.com/');\n\n  // Convert filename to unix path separator (as the ones stored\n  // into the scanned files map).\n  return upath.toUnix(decodeURIComponent(pathname).slice(1));\n}\n\n/*\n * Takes an AST node and returns the root property.\n *\n * example: foo().bar.baz() will return the AST node for foo.\n */\nexport function getRootExpression(node) {\n  let root = node.callee;\n\n  // If we encounter a member, grab the parent\n  if (node.callee.type === 'MemberExpression') {\n    let parent = node.callee.object;\n    while (parent.type !== 'Identifier') {\n      if (parent.callee.type === 'MemberExpression') {\n        parent = parent.callee.object;\n      } else {\n        parent = parent.callee;\n      }\n    }\n    root = parent;\n  }\n\n  return root;\n}\n\n/*\n * Returns the name of the reference node passed.\n *\n * example: var foo = document;\n *  The node for foo will return 'document'\n */\nexport function getNodeReference(context, node) {\n  const { variables } = context.getScope();\n  let scopeVar;\n\n  // Just return the value if the node passed in is a reference to a literal.\n  if (typeof node === 'undefined' || node.type === 'Literal') {\n    return node;\n  }\n\n  // Finds variable reference in current scope.\n  for (let i = 0; i < variables.length; i++) {\n    const variable = variables[i];\n    if (variable.name === node.name) {\n      scopeVar = variable;\n      break;\n    }\n  }\n\n  if (scopeVar && scopeVar.defs && scopeVar.defs[0] &&\n      scopeVar.defs[0].parent && scopeVar.defs[0].parent.parent &&\n      scopeVar.defs[0].parent.parent.body) {\n    // This represents all occurrences of the variable\n    const occurances = scopeVar.defs[0].parent.parent.body;\n    let lastAssignment;\n\n    if (occurances instanceof Array) {\n      occurances.forEach((occurance) => {\n        if (occurance.type === 'VariableDeclaration' &&\n            occurance.declarations[0].init !== null) {\n          // Get what the name of what it was assigned to or the raw\n          // value depending on the initalization\n          lastAssignment = occurance.declarations[0].init;\n        } else if (occurance.type === 'ExpressionStatement' &&\n                   occurance.expression.type === 'AssignmentExpression') {\n          // Get the right hand side of the assignment\n          lastAssignment = occurance.expression.right;\n        }\n      });\n    }\n\n    // Return the name of the first definition of the variable which\n    // corresponds to the node passed in.\n    if (lastAssignment) {\n      return lastAssignment;\n    }\n  }\n\n  // If that variable doesn't exist in scope, then just return the node's\n  // name.\n  return node;\n}\n\n/*\n * Get a variable from a eslint context object if it exists, otherwise\n * undefined.\n */\nexport function getVariable(context, name) {\n  const { variables } = context.getScope();\n  let result;\n  variables.forEach((variable) => {\n    if (variable.name === name && variable.defs && variable.defs[0] &&\n      variable.defs[0].name && variable.defs[0].name.parent) {\n      result = variable.defs[0].name.parent.init;\n    }\n  });\n  return result;\n}\n\nexport function getLocale() {\n  return osLocale.sync();\n}\n\nexport function getI18Data(locale) {\n  let i18ndata = {};\n  try {\n    // eslint-disable-next-line global-require, import/no-dynamic-require\n    i18ndata = nodeRequire(`${localesRoot}/${locale}/messages.js`);\n  } catch (err) {\n    log.info('Initialize locales using extract-locales command');\n  }\n\n  return i18ndata;\n}\n\n/*\n * Gettext utils. Used for translating strings.\n */\nexport function buildI18nObject(i18nData) {\n  const _jed = new Jed(i18nData);\n\n  return {\n    jed: _jed,\n    getI18Data,\n    _: (str) => { return _jed.gettext(str); },\n    gettext: (str) => { return _jed.gettext(str); },\n    sprintf: (fmt, args) => { return _jed.sprintf(fmt, args); },\n  };\n}\n\nexport const i18n = buildI18nObject(getI18Data(getLocale()));\n\n/*\n * Check the minimum node version is met\n */\nexport async function checkMinNodeVersion(minVersion, _process = process) {\n  // eslint-disable-next-line no-param-reassign\n  minVersion = minVersion || '0.12.0';\n  if (!semver.gte(_process.version, minVersion)) {\n    throw new Error(oneLine`Node version must be ${minVersion} or\n                    greater. You are using ${_process.version}.`);\n  }\n}\n\nexport function getPackageTypeAsString(numericPackageType) {\n  const packageKeys = Object.keys(PACKAGE_TYPES);\n  for (let i = 0; i < packageKeys.length; i++) {\n    const packageType = packageKeys[i];\n    if (parseInt(numericPackageType, 10) === PACKAGE_TYPES[packageType]) {\n      return packageType;\n    }\n  }\n  throw new Error(`Invalid package type constant \"${numericPackageType}\"`);\n}\n\n/*\n * Looks through all exported functions and returns only\n * \"public\" *functions* that aren't prefixed with an _\n *\n * Used for ignoring private functions and constants in rules files.\n * Rules can have private functions we don't run; anything that\n * starts with an \"_\" shouldn't be returned.\n *\n * This exists because we export private functions in rule files\n * for testing.\n */\nexport function ignorePrivateFunctions(list) {\n  const filteredList = {};\n\n  Object.keys(list).forEach((functionName) => {\n    if (functionName.startsWith('_') === false &&\n        typeof list[functionName] === 'function') {\n      filteredList[functionName] = list[functionName];\n    }\n  });\n\n  return filteredList;\n}\n\n\n/*\n * Check a filename to make sure it's valid; used by scanners so we never\n * accept new scanners that don't specify which file they're referencing.\n */\nexport function ensureFilenameExists(filename) {\n  if (typeof filename !== 'string' || filename.length < 1) {\n    throw new Error('Filename is required');\n  }\n}\n\n\nexport function isLocalUrl(urlInput) {\n  const parsedUrl = url.parse(urlInput);\n  const { protocol, path } = parsedUrl;\n\n  // Check protocol is chrome: or resource: if set.\n  // Details on the chrome protocol are here: https://goo.gl/W52T0Q\n  // Details on resource protocol are here: https://goo.gl/HHqeJA\n  if (protocol && !LOCAL_PROTOCOLS.includes(protocol)) {\n    return false;\n  }\n  // Disallow protocol-free remote urls.\n  if (path.startsWith('//')) {\n    return false;\n  }\n  return true;\n}\n\nexport function apiToMessage(string) {\n  return string\n    .replace(/^extension/, 'ext')\n    .replace(/\\./g, '_')\n    .toUpperCase()\n    .substr(0, 25);\n}\n\nexport function isBrowserNamespace(string) {\n  return ['browser', 'chrome'].includes(string);\n}\n\nexport function parseCspPolicy(policy) {\n  if (!policy) {\n    return {};\n  }\n\n  // eslint-disable-next-line no-param-reassign\n  policy = policy.toLowerCase();\n\n  const parsedPolicy = {};\n  const directives = policy.split(';');\n\n  directives.forEach((directive) => {\n    // eslint-disable-next-line no-param-reassign\n    directive = directive.trim();\n    const tokens = directive.split(/\\s+/);\n\n    const name = tokens[0];\n\n    if (name) {\n      parsedPolicy[name] = tokens.slice(1, tokens.length);\n    }\n  });\n\n  return parsedPolicy;\n}\n\n\nexport function getLineAndColumnFromMatch(match) {\n  const matchedLines = match.input\n    .substr(0, match.index)\n    .split('\\n');\n  const matchedColumn = matchedLines.slice(-1)[0].length + 1;\n  const matchedLine = matchedLines.length;\n\n  return { matchedLine, matchedColumn };\n}\n\n\n/**\n * Determines if the source text is minified.\n * Using the percentage no. of the indented lines from a sample set of lines\n * to determine if the js file is minified.\n * Inspired by code for the Firefox Developer Toolbar.\n */\nexport function couldBeMinifiedCode(code) {\n  // Fast exit if `code` is empty. Could happen in tests, but also in real\n  // files.\n  if (!code) {\n    return false;\n  }\n\n  // If there's a source map reference it's very certainly minified code.\n  if (SOURCE_MAP_RE.test(code)) {\n    return true;\n  }\n\n  // Number of lines to look at, taken from the head of the code.\n  const sampleSize = 30;\n\n  // Threshold in percent of indented lines to mark a file as not\n  // minified.\n  const indentCountThreshold = 20; // percentage\n\n  // Length of a line that looks suspicious of being minified\n  const hugeLinesLength = 500;\n\n  // Number of huge lines to also mark a file as potentially minified\n  // Hint: Minified AngularJS has 12 lines, jQuery 4\n  const hugeLinesThreshold = 4;\n\n  let lineEndIndex = 0;\n  let lineStartIndex = 0;\n  let lines = 1;\n  let indentCount = 0;\n  let hugeLinesCount = 0;\n\n  // Strip comments.\n  const normalizedCode = code.replace(/\\/\\*[\\S\\s]*?\\*\\/|\\/\\/.+/g, '');\n\n  while (lines < sampleSize) {\n    lineEndIndex = normalizedCode.indexOf('\\n', lineStartIndex);\n\n    if (lineEndIndex === -1) {\n      break;\n    }\n\n    const currentLine = normalizedCode.slice(lineStartIndex, lineEndIndex);\n\n    if (/^\\s+/.test(currentLine)) {\n      indentCount++;\n    }\n\n    if (currentLine.length >= hugeLinesLength) {\n      hugeLinesCount++;\n    }\n\n    lineStartIndex = lineEndIndex + 1;\n    lines++;\n  }\n\n  return (\n    ((indentCount / lines) * 100) < indentCountThreshold ||\n    hugeLinesCount > hugeLinesThreshold\n  );\n}\n","module.exports = require(\"url\");","module.exports = require(\"whatwg-url\");","module.exports = require(\"jed\");","module.exports = require(\"semver\");","module.exports = require(\"os-locale\");","import { oneLine } from 'common-tags';\n\nimport { i18n } from 'utils';\n\n\nexport const INLINE_SCRIPT = {\n  code: 'INLINE_SCRIPT',\n  message: i18n._('Inline scripts blocked by default'),\n  description: i18n._(oneLine`Default CSP rules prevent inline JavaScript\n    from running (https://mzl.la/2pn32nd).`),\n};\n\n\nexport const REMOTE_SCRIPT = {\n  code: 'REMOTE_SCRIPT',\n  message: i18n._('Remote scripts are not allowed as per the Add-on Policies.'),\n  description: i18n._(oneLine`Please include all scripts in the add-on.\n    For more information, refer to https://mzl.la/2uEOkYp.`),\n};\n","import { oneLine } from 'common-tags';\n\nimport { apiToMessage, i18n } from 'utils';\n\nexport const JS_SYNTAX_ERROR = {\n  code: 'JS_SYNTAX_ERROR',\n  message: i18n._('JavaScript syntax error'),\n  description: i18n._(oneLine`There is a JavaScript syntax error in your\n    code; validation cannot continue on this file.`),\n};\n\nexport const EVENT_LISTENER_FOURTH = {\n  code: 'EVENT_LISTENER_FOURTH',\n  message: i18n._('addEventListener` called with truthy fourth argument.'),\n  description: i18n._(oneLine`When called with a truthy forth argument,\n    listeners can be triggered potentially unsafely by untrusted code. This\n    requires careful review.`),\n};\n\nexport const CONTENT_SCRIPT_NOT_FOUND = {\n  code: 'CONTENT_SCRIPT_NOT_FOUND',\n  legacyCode: null,\n  message: i18n._('Content script file could not be found.'),\n  description: i18n._('Content script file could not be found'),\n};\n\nexport const CONTENT_SCRIPT_EMPTY = {\n  code: 'CONTENT_SCRIPT_EMPTY',\n  legacyCode: null,\n  message: i18n._('Content script file name should not be empty.'),\n  description: i18n._('Content script file name should not be empty'),\n};\n\nexport function _nonLiteralUri(method) {\n  return {\n    code: `${method}_NONLIT_URI`.toUpperCase(),\n    message: i18n._(`'${method}' called with a non-literal uri`),\n    description: i18n._(oneLine`Calling '${method}' with variable\n      parameters can result in potential security vulnerabilities if the\n      variable contains a remote URI. Consider using 'window.open' with\n      the 'chrome=no' flag.`),\n  };\n}\n\nexport function _methodPassedRemoteUri(method) {\n  return {\n    code: `${method}_REMOTE_URI`.toUpperCase(),\n    message: i18n._(`'${method}' called with non-local URI`),\n    description: i18n._(oneLine`Calling '${method}' with a non-local\n      URI will result in the dialog being opened with chrome privileges.`),\n  };\n}\n\nexport const OPENDIALOG_REMOTE_URI = _methodPassedRemoteUri('openDialog');\nexport const OPENDIALOG_NONLIT_URI = _nonLiteralUri('openDialog');\n\nexport const DANGEROUS_EVAL = {\n  code: 'DANGEROUS_EVAL',\n  message: null,\n  description: i18n._(oneLine`Evaluation of strings as code can lead to\n    security vulnerabilities and performance issues, even in the\n    most innocuous of circumstances. Please avoid using \\`eval\\` and the\n    \\`Function\\` constructor when at all possible.'`),\n};\n\nexport const NO_IMPLIED_EVAL = {\n  code: 'NO_IMPLIED_EVAL',\n  message: null,\n  description: i18n._(oneLine`setTimeout, setInterval and execScript\n    functions should be called only with function expressions as their\n    first argument`),\n};\n\nexport const UNEXPECTED_GLOGAL_ARG = {\n  code: 'UNEXPECTED_GLOGAL_ARG',\n  message: i18n._('Unexpected global passed as an argument'),\n  description: i18n._(oneLine`Passing a global as an argument\n    is not recommended. Please make this a var instead.`),\n};\n\nexport const NO_DOCUMENT_WRITE = {\n  code: 'NO_DOCUMENT_WRITE',\n  message: i18n._('Use of document.write strongly discouraged.'),\n  description: i18n._(oneLine`document.write will fail in many\n    circumstances when used in extensions, and has potentially severe security\n    repercussions when used improperly. Therefore, it should not be used.`),\n};\n\nexport const BANNED_LIBRARY = {\n  code: 'BANNED_LIBRARY',\n  message: i18n._('Banned 3rd-party JS library'),\n  description: i18n._(oneLine`Your add-on uses a JavaScript library we\n    consider unsafe. Read more: https://bit.ly/1TRIyZY`),\n};\n\nexport const UNADVISED_LIBRARY = {\n  code: 'UNADVISED_LIBRARY',\n  message: i18n._('Unadvised 3rd-party JS library'),\n  description: i18n._(oneLine`Your add-on uses a JavaScript library we do\n    not recommend. Read more: https://bit.ly/1TRIyZY`),\n};\n\nexport const KNOWN_LIBRARY = {\n  code: 'KNOWN_LIBRARY',\n  message: i18n._('Known JS library detected'),\n  description: i18n._(oneLine`JavaScript libraries are discouraged for\n    simple add-ons, but are generally accepted.`),\n};\n\nexport const UNSAFE_DYNAMIC_VARIABLE_ASSIGNMENT = {\n  code: 'UNSAFE_VAR_ASSIGNMENT',\n  // Uses original message from eslint\n  message: null,\n  description: i18n._(oneLine`Due to both security and performance\n    concerns, this may not be set using dynamic values which have\n    not been adequately sanitized. This can lead to security issues or fairly\n    serious performance degradation.`),\n};\n\nexport const UNSUPPORTED_API = {\n  code: 'UNSUPPORTED_API',\n  message: null,\n  messageFormat: i18n._('{{api}} is not supported'),\n  description: i18n._('This API has not been implemented by Firefox.'),\n};\n\nfunction deprecatedAPI(api) {\n  return {\n    code: apiToMessage(api),\n    message: i18n._(`\"${api}\" is deprecated or unimplemented`),\n    description: i18n._(oneLine`This API has been deprecated by Chrome\n      and has not been implemented by Firefox.`),\n  };\n}\n\nexport const APP_GETDETAILS = deprecatedAPI('app.getDetails');\nexport const EXT_ONREQUEST = deprecatedAPI('extension.onRequest');\nexport const EXT_ONREQUESTEXTERNAL = deprecatedAPI(\n  'extension.onRequestExternal');\nexport const EXT_SENDREQUEST = deprecatedAPI('extension.sendRequest');\nexport const TABS_GETALLINWINDOW = deprecatedAPI('tabs.getAllInWindow');\nexport const TABS_GETSELECTED = deprecatedAPI('tabs.getSelected');\nexport const TABS_ONACTIVECHANGED = deprecatedAPI('tabs.onActiveChanged');\nexport const TABS_ONSELECTIONCHANGED = deprecatedAPI(\n  'tabs.onSelectionChanged');\nexport const TABS_SENDREQUEST = deprecatedAPI('tabs.sendRequest');\n\nfunction temporaryAPI(api) {\n  return {\n    code: apiToMessage(api),\n    message: i18n._(`\"${api}\" can cause issues when loaded temporarily`),\n    description: i18n._(oneLine`This API can cause issues when loaded\n      temporarily using about:debugging in Firefox unless you specify\n      applications > gecko > id in the manifest. Please see:\n      https://mzl.la/2hizK4a for more.`),\n  };\n}\n\nexport const STORAGE_LOCAL = temporaryAPI('storage.local');\nexport const STORAGE_SYNC = temporaryAPI('storage.sync');\nexport const IDENTITY_GETREDIRECTURL = temporaryAPI('identity.getRedirectURL');\n\nexport const ESLINT_OVERWRITE_MESSAGE = {\n  'no-eval': DANGEROUS_EVAL,\n  'no-implied-eval': NO_IMPLIED_EVAL,\n  'no-new-func': DANGEROUS_EVAL,\n  'no-unsafe-innerhtml/no-unsafe-innerhtml': UNSAFE_DYNAMIC_VARIABLE_ASSIGNMENT,\n  'webextension-unsupported-api': UNSUPPORTED_API,\n};\n","import { oneLine } from 'common-tags';\n\nimport { i18n } from 'utils';\n\nexport const JSON_INVALID = {\n  code: 'JSON_INVALID',\n  message: i18n._('Your JSON is not valid.'),\n  description: i18n._('Your JSON file could not be parsed.'),\n};\n\nexport const JSON_BLOCK_COMMENTS = {\n  code: 'JSON_BLOCK_COMMENTS',\n  message: i18n._('Your JSON contains block comments.'),\n  description: i18n._(oneLine`Only line comments (comments beginning with\n    \"//\") are allowed in JSON files. Please remove block comments (comments\n    beginning with \"/*\")`),\n};\n\nexport const JSON_DUPLICATE_KEY = {\n  code: 'JSON_DUPLICATE_KEY',\n  message: i18n._('Duplicate keys are not allowed in JSON files.'),\n  description: i18n._(oneLine`Duplicate key found in JSON file.`),\n};\n","import { oneLine } from 'common-tags';\n\nimport { MAX_FILE_SIZE_TO_PARSE_MB } from 'const';\nimport { i18n } from 'utils';\n\n\nexport const DUPLICATE_XPI_ENTRY = {\n  code: 'DUPLICATE_XPI_ENTRY',\n  message: i18n._('Package contains duplicate entries'),\n  description: i18n._(oneLine`The package contains multiple entries\n    with the same name. This practice has been banned. Try unzipping\n    and re-zipping your add-on package and try again.`),\n};\n\nexport const BAD_ZIPFILE = {\n  code: 'BAD_ZIPFILE',\n  message: 'Corrupt ZIP file',\n  description: i18n._('We were unable to decompress the zip file.'),\n};\n\nexport const TYPE_NO_MANIFEST_JSON = {\n  code: 'TYPE_NO_MANIFEST_JSON',\n  message: i18n._('manifest.json was not found'),\n  description: i18n._(oneLine`No manifest.json was found at the root of the extension.\n    The package file must be a ZIP of the extension's files themselves, not of the\n    containing directory. See: https://mzl.la/2r2McKv for more on packaging.`),\n};\n\nexport const FILE_TOO_LARGE = {\n  code: 'FILE_TOO_LARGE',\n  message: i18n._('File is too large to parse.'),\n  description: i18n._(oneLine`This file is not binary and is too large to\n    parse. Files larger than ${MAX_FILE_SIZE_TO_PARSE_MB}MB will not be\n    parsed. If your JavaScript file has a large list, consider removing the\n    list and loading it as a separate JSON file instead.`),\n};\n\nexport const HIDDEN_FILE = {\n  code: 'HIDDEN_FILE',\n  message: i18n._('Hidden file flagged'),\n  description: i18n._(oneLine`Hidden files complicate the\n    review process and can contain sensitive information about the system that\n    generated the add-on. Please modify the packaging process so that these\n    files aren't included.`),\n};\n\nexport const FLAGGED_FILE = {\n  code: 'FLAGGED_FILE',\n  message: i18n._('Flagged filename found'),\n  description: i18n._(oneLine`Files were found that are either unnecessary\n    or have been included unintentionally. They should be removed.`),\n};\n\nexport const FLAGGED_FILE_EXTENSION = {\n  code: 'FLAGGED_FILE_EXTENSION',\n  message: i18n._('Flagged file extensions found'),\n  description: i18n._(oneLine`Files were found that are either unnecessary\n    or have been included unintentionally. They should be removed.`),\n};\n\nexport const FLAGGED_FILE_TYPE = {\n  code: 'FLAGGED_FILE_TYPE',\n  message: i18n._('Flagged file type found'),\n  description: i18n._(oneLine`Files whose names end with flagged extensions\n    have been found in the add-on. The extension of these files are flagged\n    because they usually identify binary components. Please see\n    https://bit.ly/review-policy for more information on the binary content\n    review process.`),\n};\n\nexport const ALREADY_SIGNED = {\n  code: 'ALREADY_SIGNED',\n  message: i18n._('Package already signed'),\n  description: i18n._(oneLine`Add-ons which are already signed will be\n    re-signed when published on AMO. This will replace any existing signatures\n    on the add-on.`),\n};\n\nexport const MOZILLA_COND_OF_USE = {\n  code: 'MOZILLA_COND_OF_USE',\n  message: i18n._('Violation of Mozilla conditions of use.'),\n  description: i18n._(oneLine`Words found that violate the Mozilla\n    conditions of use.\n    See https://www.mozilla.org/en-US/about/legal/acceptable-use/ for more\n    details.`),\n};\n\nexport const COINMINER_USAGE_DETECTED = {\n  code: 'COINMINER_USAGE_DETECTED',\n  message: i18n._('Firefox add-ons are not allowed to run coin miners.'),\n  description: i18n._(oneLine`We do not allow coinminer scripts to be run inside\n    WebExtensions.\n    See https://github.com/mozilla/addons-linter/issues/1643 for more\n    details.`),\n};\n","import { oneLine } from 'common-tags';\n\nimport { i18n } from 'utils';\nimport { MANIFEST_JSON } from 'const';\n\n\nexport const MANIFEST_FIELD_REQUIRED = {\n  code: 'MANIFEST_FIELD_REQUIRED',\n  message: i18n._('The field is required.'),\n  description: i18n._('See https://mzl.la/1ZOhoEN (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_FIELD_INVALID = {\n  code: 'MANIFEST_FIELD_INVALID',\n  message: i18n._('The field is invalid.'),\n  description: i18n._('See https://mzl.la/1ZOhoEN (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_BAD_PERMISSION = {\n  code: 'MANIFEST_BAD_PERMISSION',\n  message: i18n._('The permission type is unsupported.'),\n  description: i18n._(oneLine`See https://mzl.la/1R1n1t0\n    (MDN Docs) for more information.`),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_PERMISSIONS = {\n  code: 'MANIFEST_PERMISSIONS',\n  message: i18n._('Unknown permission.'),\n  description: i18n._('See https://mzl.la/1R1n1t0 (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_VERSION_INVALID = {\n  code: 'MANIFEST_VERSION_INVALID',\n  message: i18n._('\"manifest_version\" in the manifest.json is not a valid value'),\n  description: i18n._('See https://mzl.la/20PenXl (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_CSP = {\n  // Note: don't change this 'code' without updating addons-server first, as\n  // it depends on it to detect add-ons with a custom content security policy.\n  code: 'MANIFEST_CSP',\n  message: i18n._(oneLine`\n    \"content_security_policy\" allows remote code execution in manifest.json`),\n  description: i18n._('A custom content_security_policy needs additional review.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_CSP_UNSAFE_EVAL = {\n  code: 'MANIFEST_CSP_UNSAFE_EVAL',\n  message: i18n._(oneLine`\n    Using 'eval' has strong security and performance implications.`),\n  description: i18n._(oneLine`\n    In most cases the same result can be achieved differently,\n    therefore it is generally prohibited`),\n  file: MANIFEST_JSON,\n};\n\nexport const PROP_NAME_INVALID = {\n  code: 'PROP_NAME_INVALID',\n  message: i18n._('The \"name\" property must be a string.'),\n  description: i18n._('See http://mzl.la/1STmr48 (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const PROP_VERSION_INVALID = {\n  code: 'PROP_VERSION_INVALID',\n  message: i18n._('The \"version\" property must be a string.'),\n  description: i18n._('See http://mzl.la/1kXIADa (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const PROP_VERSION_TOOLKIT_ONLY = {\n  code: 'PROP_VERSION_TOOLKIT_ONLY',\n  message: i18n._('The \"version\" property uses a Firefox-specific format.'),\n  description: i18n._('See http://mzl.la/1kXIADa (MDN Docs) for more information.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_UPDATE_URL = {\n  code: 'MANIFEST_UPDATE_URL',\n  message: i18n._('\"update_url\" is not allowed.'),\n  description: i18n._(oneLine`\"applications.gecko.update_url\" is not allowed\n    for Mozilla-hosted add-ons.`),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_UNUSED_UPDATE = {\n  code: 'MANIFEST_UNUSED_UPDATE',\n  message: i18n._('The \"update_url\" property is not used by Firefox.'),\n  description: i18n._(oneLine`The \"update_url\" is not used by Firefox in\n    the root of a manifest; your add-on will be updated via the Add-ons\n    site and not your \"update_url\". See: https://mzl.la/25zqk4O`),\n  file: MANIFEST_JSON,\n};\n\nexport const STRICT_MAX_VERSION = {\n  code: 'STRICT_MAX_VERSION',\n  message: i18n._('\"strict_max_version\" not required.'),\n  description: i18n._(oneLine`\"strict_max_version\" shouldn't be used unless\n    the add-on is expected not to work with future versions of Firefox.`),\n  file: MANIFEST_JSON,\n};\n\nexport function manifestPropMissing(property) {\n  return {\n    code: `PROP_${property.toUpperCase()}_MISSING`,\n    message: i18n._(`No \"${property}\" property found in manifest.json`),\n    description: i18n._(`\"${property}\" is required`),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const MANIFEST_ICON_NOT_FOUND = 'MANIFEST_ICON_NOT_FOUND';\nexport function manifestIconMissing(path) {\n  return {\n    code: MANIFEST_ICON_NOT_FOUND,\n    message: i18n._(\n      'An icon defined in the manifest could not be found in the package.'),\n    description: i18n.sprintf(\n      i18n._('Icon could not be found at \"%(path)s\".'),\n      { path }),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const MANIFEST_BACKGROUND_FILE_NOT_FOUND = 'MANIFEST_BACKGROUND_FILE_NOT_FOUND';\nexport function manifestBackgroundMissing(path, type) {\n  return {\n    code: MANIFEST_BACKGROUND_FILE_NOT_FOUND,\n    legacyCode: null,\n    message: type === 'script' ?\n      i18n._('A background script defined in the manifest could not be found.') :\n      i18n._('A background page defined in the manifest could not be found.'),\n    description:\n      i18n.sprintf(\n        type === 'script' ?\n          i18n._('Background script could not be found at \"%(path)s\".') :\n          i18n._('Background page could not be found at \"%(path)s\".'),\n        { path }\n      ),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const MANIFEST_CONTENT_SCRIPT_FILE_NOT_FOUND = 'MANIFEST_CONTENT_SCRIPT_FILE_NOT_FOUND';\nexport function manifestContentScriptFileMissing(path, type) {\n  return {\n    code: MANIFEST_CONTENT_SCRIPT_FILE_NOT_FOUND,\n    legacyCode: null,\n    message: type === 'script' ?\n      i18n._('A content script defined in the manifest could not be found.') :\n      i18n._('A content script css file defined in the manifest could not be found.'),\n    description:\n      i18n.sprintf(\n        type === 'script' ?\n          i18n._('Content script defined in the manifest could not be found at \"%(path)s\".') :\n          i18n._('Content script css file defined in the manifest could not be found at \"%(path)s\".'),\n        { path }\n      ),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const MANIFEST_DICT_NOT_FOUND = 'MANIFEST_DICT_NOT_FOUND';\nexport function manifestDictionaryFileMissing(path) {\n  return {\n    code: MANIFEST_DICT_NOT_FOUND,\n    legacyCode: null,\n    message: i18n._('A dictionary file defined in the manifest could not be found.'),\n    description:\n      i18n.sprintf(\n        i18n._('Dictionary file defined in the manifest could not be found at \"%(path)s\".'),\n        { path }\n      ),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const MANIFEST_MULTIPLE_DICTS = {\n  code: 'MANIFEST_MULTIPLE_DICTS',\n  legacyCode: null,\n  message: i18n._('The manifest contains multiple dictionaries.'),\n  description:\n      i18n._('Multiple dictionaries were defined in the manifest, which is unsupported.'),\n  file: MANIFEST_JSON,\n};\n\nexport const MANIFEST_EMPTY_DICTS = {\n  code: 'MANIFEST_EMPTY_DICTS',\n  legacyCode: null,\n  message: i18n._('The manifest contains a dictionaries object, but it is empty.'),\n  description:\n      i18n._('A dictionaries object was defined in the manifest, but it was empty.'),\n  file: MANIFEST_JSON,\n};\n\n// https://github.com/mozilla/addons-linter/issues/1650\n// Potentially temporary\nexport const MANIFEST_INVALID_CONTENT = {\n  code: 'MANIFEST_INVALID_CONTENT',\n  message: i18n._('Forbidden content found in add-on.'),\n  description: i18n._('This add-on contains forbidden content.'),\n  file: MANIFEST_JSON,\n};\n\nexport const ICON_NOT_SQUARE = 'ICON_NOT_SQUARE';\nexport function iconIsNotSquare(path) {\n  return {\n    code: ICON_NOT_SQUARE,\n    message: i18n._('Icons must be square.'),\n    description: i18n.sprintf(i18n._('Icon at \"%(path)s\" must be square.'), { path }),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const ICON_SIZE_INVALID = 'ICON_SIZE_INVALID';\nexport function iconSizeInvalid({ path, expected, actual }) {\n  return {\n    code: ICON_SIZE_INVALID,\n    message: i18n._('The size of the icon does not match the manifest.'),\n    description: i18n.sprintf(i18n._(oneLine`\n      Expected icon at \"%(path)s\" to be %(expected)d pixels wide but was %(actual)d.\n    `), { path, expected, actual }),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const CORRUPT_ICON_FILE = 'CORRUPT_ICON_FILE';\nexport function corruptIconFile({ path }) {\n  return {\n    code: CORRUPT_ICON_FILE,\n    message: i18n._('Corrupt image file'),\n    description: i18n.sprintf(\n      i18n._('Expected icon file at \"%(path)s\" is corrupted'),\n      { path }),\n    file: MANIFEST_JSON,\n  };\n}\n\nexport const PROP_NAME_MISSING = manifestPropMissing('name');\nexport const PROP_VERSION_MISSING = manifestPropMissing('version');\n\nexport const NO_MESSAGES_FILE = {\n  code: 'NO_MESSAGES_FILE',\n  message: i18n._('The \"default_locale\" is missing localizations.'),\n  description: i18n._(oneLine`The \"default_locale\" value is specified in\n    the manifest, but no matching \"messages.json\" in the \"_locales\" directory\n    exists. See: https://mzl.la/2hjcaEE`),\n  file: MANIFEST_JSON,\n};\n\nexport const NO_DEFAULT_LOCALE = {\n  code: 'NO_DEFAULT_LOCALE',\n  message: i18n._('The \"default_locale\" is missing but \"_locales\" exist.'),\n  description: i18n._(oneLine`The \"default_locale\" value is not specifed in\n    the manifest, but a \"_locales\" directory exists.\n    See: https://mzl.la/2hjcaEE`),\n  file: MANIFEST_JSON,\n};\n\nexport const WRONG_ICON_EXTENSION = {\n  code: 'WRONG_ICON_EXTENSION',\n  message: i18n._('Unsupported image extension'),\n  description: i18n._('Icons should be one of JPG/JPEG, WebP, GIF, PNG or SVG.'),\n  file: MANIFEST_JSON,\n};\n\nexport const NO_MESSAGES_FILE_IN_LOCALES = 'NO_MESSAGES_FILE_IN_LOCALES';\nexport function noMessagesFileInLocales(path) {\n  return {\n    code: NO_MESSAGES_FILE_IN_LOCALES,\n    message: i18n._('Empty language directory'),\n    description: i18n.sprintf(i18n._('messages.json file missing in \"%(path)s\"'), { path }),\n    file: MANIFEST_JSON,\n  };\n}\n","import { i18n } from 'utils';\n\nexport const FLUENT_INVALID = {\n  code: 'FLUENT_INVALID',\n  message: i18n._('Your FTL is not valid.'),\n  description: i18n._('Your FTL file could not be parsed.'),\n};\n","import { oneLine } from 'common-tags';\n\nimport { i18n } from 'utils';\n\nexport const NO_MESSAGE = {\n  code: 'NO_MESSAGE',\n  message: i18n._('Translation string is missing the message property'),\n  description: i18n._('No \"message\" message property is set for a string (https://mzl.la/2DSBTjA).'),\n};\n\nexport const PREDEFINED_MESSAGE_NAME = {\n  code: 'PREDEFINED_MESSAGE_NAME',\n  message: i18n._('String name is reserved for a predefined message'),\n  description: i18n._(oneLine`String names starting with @@ get translated to built-in\n    constants (https://mzl.la/2BL9ZjE).`),\n};\n\nexport const INVALID_MESSAGE_NAME = {\n  code: 'INVALID_MESSAGE_NAME',\n  message: 'String name contains invalid characters',\n  description: i18n._(oneLine`String name should only contain alpha-numeric\n    characters, _ and @ (https://mzl.la/2Eztyi5).`),\n};\n\nexport const MISSING_PLACEHOLDER = {\n  code: 'MISSING_PLACEHOLDER',\n  message: i18n._('Placeholder for message is missing'),\n  description: i18n._('A placeholder used in the message is not defined.'),\n};\n\nexport const INVALID_PLACEHOLDER_NAME = {\n  code: 'INVALID_PLACEHOLDER_NAME',\n  message: i18n._('Placeholder name contains invalid characters'),\n  description: i18n._(oneLine`Placeholder name should only contain alpha-numeric\n    characters, _ and @ (https://mzl.la/2ExbYez).`),\n};\n\nexport const NO_PLACEHOLDER_CONTENT = {\n  code: 'NO_PLACEHOLDER_CONTENT',\n  message: i18n._('Placeholder is missing the content property'),\n  description: i18n._(oneLine`A placeholder needs a content property defining the\n    replacement of it (https://mzl.la/2DT1MQd)`),\n};\n","import upath from 'upath';\n\n// eslint-disable-next-line import/no-named-default\nimport { default as Message } from 'message';\nimport * as constants from 'const';\n\n// \"I have a display case ready and waiting for our newest acquisitions!\"\n// --Taneleer Tivan\n\n\nexport default class Collector {\n  constructor(config = {}) {\n    this.config = config;\n    this.messagesByDataPath = {};\n    this.scannedFiles = {};\n\n    constants.MESSAGE_TYPES.forEach((type) => {\n      this[`${type}s`] = [];\n    });\n  }\n\n  get length() {\n    let len = 0;\n    constants.MESSAGE_TYPES.forEach((type) => {\n      len += this[`${type}s`].length;\n    });\n    return len;\n  }\n\n  _addMessage(type, opts, _Message = Message) {\n    // Filter the messages reported by file when the Linter has been configured\n    // with a custom scanFile array using --scan-file CLI option.\n    if (this.config.scanFile && opts.file) {\n      if (!this.config.scanFile.some((v) => v === opts.file)) {\n        return;\n      }\n    }\n\n    // Message will throw for incorrect types.\n    // we have a test to ensure that is the case.\n    const message = new _Message(type, opts);\n    if (typeof this.messageList(type) === 'undefined') {\n      throw new Error(`Message type \"${type}\" not currently collected`);\n    }\n\n    if (!this.isDuplicateMessage(message)) {\n      this._recordMessage(message, type);\n    }\n  }\n\n  messageList(type) {\n    return this[`${type}s`];\n  }\n\n  messagesAtDataPath(dataPath) {\n    if (dataPath === undefined) {\n      throw new Error('dataPath is required');\n    }\n    if (!this.messagesByDataPath[dataPath]) {\n      this.messagesByDataPath[dataPath] = [];\n    }\n    return this.messagesByDataPath[dataPath];\n  }\n\n  _recordMessage(message, type) {\n    if (message.dataPath) {\n      this.messagesAtDataPath(message.dataPath).push(message);\n    }\n    this.messageList(type).push(message);\n  }\n\n  isDuplicateMessage(message) {\n    if (message.dataPath) {\n      const previousMessages = this.messagesAtDataPath(message.dataPath);\n      if (message.file === 'manifest.json') {\n        return previousMessages.length > 0;\n      }\n      return previousMessages.some((prevMessage) => {\n        return prevMessage.matches(message);\n      });\n    }\n    return false;\n  }\n\n  recordScannedFile(originalFilename, scanner) {\n    // Convert filename to unix path separator before\n    // storing it into the scanned files.\n    const filename = upath.toUnix(originalFilename);\n\n    // TODO: Add some code that verifies and normalizes `filename`\n    // to better avoid duplicates.\n    // See https://github.com/mozilla/addons-linter/issues/1310\n    if (filename in this.scannedFiles) {\n      if (!this.scannedFiles[filename].includes(scanner)) {\n        this.scannedFiles[filename].push(scanner);\n      }\n    } else {\n      this.scannedFiles[filename] = [scanner];\n    }\n  }\n\n  addError(opts) {\n    this._addMessage(constants.VALIDATION_ERROR, opts);\n  }\n\n  addNotice(opts) {\n    this._addMessage(constants.VALIDATION_NOTICE, opts);\n  }\n\n  addWarning(opts) {\n    this._addMessage(constants.VALIDATION_WARNING, opts);\n  }\n}\n","import { oneLine } from 'common-tags';\n\nimport { MESSAGE_TYPES } from 'const';\n\n\n// These are the props we expect to pull out of\n// the data object passed to the Message constructor.\nexport const props = [\n  'code',\n  'message',\n  'description',\n  'column',\n  'file',\n  'line',\n  'dataPath',\n];\n\nexport const requiredProps = [\n  'code',\n  'message',\n  'description',\n];\n\nexport default class Message {\n  constructor(type, data = {}) {\n    this.type = type;\n\n    if (Object.prototype.hasOwnProperty.call(data, 'filename')) {\n      throw new Error('The key for the file is \"file\" not \"filename\"');\n    }\n\n    props.forEach((prop) => {\n      this[prop] = data[prop];\n    });\n    const missingProps = [];\n    requiredProps.forEach((prop) => {\n      if (typeof this[prop] === 'undefined') {\n        missingProps.push(prop);\n      }\n    });\n    if (missingProps.length) {\n      throw new Error(oneLine`Message data object is missing the\n        following props: ${missingProps.join(', ')}`);\n    }\n  }\n\n  get type() {\n    return this._type;\n  }\n\n  set type(type) {\n    if (!MESSAGE_TYPES.includes(type)) {\n      throw new Error(oneLine`Message type \"${type}\"\n        is not one of ${MESSAGE_TYPES.join(', ')}`);\n    }\n    this._type = type;\n  }\n\n  matches(other) {\n    return this.type === other.type && props.every((prop) => {\n      return this[prop] === other[prop];\n    });\n  }\n}\n","/* eslint-disable import/namespace */\nimport path from 'path';\nimport { readdirSync, existsSync, statSync } from 'fs';\n\nimport RJSON from 'relaxed-json';\nimport { oneLine } from 'common-tags';\nimport probeImageSize from 'probe-image-size';\nimport upath from 'upath';\n\nimport { getDefaultConfigValue } from 'yargs-options';\nimport {\n  validateAddon, validateDictionary, validateLangPack, validateStaticTheme,\n} from 'schema/validator';\nimport { MANIFEST_JSON, PACKAGE_EXTENSION, CSP_KEYWORD_RE, IMAGE_FILE_EXTENSIONS, LOCALES_DIRECTORY, MESSAGES_JSON } from 'const';\nimport log from 'logger';\nimport * as messages from 'messages';\nimport JSONParser from 'parsers/json';\nimport { isToolkitVersionString } from 'schema/formats';\nimport { parseCspPolicy, normalizePath } from 'utils';\nimport BLOCKED_CONTENT_SCRIPT_HOSTS from 'blocked_content_script_hosts.txt';\n\n\nasync function getImageMetadata(io, iconPath) {\n  // Get a non-utf8 input stream by setting encoding to null.\n  // (only needed for the 'io/directory' module which open the file using the utf-8\n  // encoding by default).\n  let encoding = null;\n\n  if (iconPath.endsWith('.svg')) {\n    encoding = 'utf-8';\n  }\n\n  const data = await io.getFileAsStream(iconPath, { encoding });\n  return probeImageSize(data);\n}\n\n\nexport default class ManifestJSONParser extends JSONParser {\n  constructor(jsonString, collector, {\n    filename = MANIFEST_JSON, RelaxedJSON = RJSON,\n    selfHosted = getDefaultConfigValue('self-hosted'),\n    io = null,\n  } = {}) {\n    super(jsonString, collector, { filename });\n\n    this.parse(RelaxedJSON);\n\n    // Set up some defaults in case parsing fails.\n    if (typeof this.parsedJSON === 'undefined' || this.isValid === false) {\n      this.parsedJSON = {\n        manifest_version: null,\n        name: null,\n        type: PACKAGE_EXTENSION,\n        version: null,\n      };\n    } else {\n      // We've parsed the JSON; now we can validate the manifest.\n      this.selfHosted = selfHosted;\n      this.isLanguagePack = Object.prototype.hasOwnProperty.call(\n        this.parsedJSON, 'langpack_id');\n      this.isDictionary = Object.prototype.hasOwnProperty.call(\n        this.parsedJSON, 'dictionaries');\n      this.isStaticTheme = Object.prototype.hasOwnProperty.call(\n        this.parsedJSON, 'theme');\n      this.io = io;\n      this._validate();\n    }\n  }\n\n  errorLookup(error) {\n    // This is the default message.\n    let baseObject = messages.JSON_INVALID;\n\n    // This is the default from webextension-manifest-schema, but it's not a\n    // super helpful error. We'll tidy it up a bit:\n    if (error && error.message) {\n      const lowerCaseMessage = error.message.toLowerCase();\n      if (lowerCaseMessage === 'should match some schema in anyof') {\n        // eslint-disable-next-line no-param-reassign\n        error.message = 'is not a valid key or has invalid extra properties';\n      }\n    }\n\n    const overrides = {\n      message: `\"${error.dataPath}\" ${error.message}`,\n      dataPath: error.dataPath,\n    };\n\n    if (error.keyword === 'required') {\n      baseObject = messages.MANIFEST_FIELD_REQUIRED;\n    } else if (error.dataPath.startsWith('/permissions') &&\n               typeof error.data !== 'undefined' &&\n               typeof error.data !== 'string') {\n      baseObject = messages.MANIFEST_BAD_PERMISSION;\n      overrides.message = `Permissions ${error.message}.`;\n    } else if (error.keyword === 'type') {\n      baseObject = messages.MANIFEST_FIELD_INVALID;\n    }\n\n    // Arrays can be extremely verbose, this tries to make them a little\n    // more sane. Using a regex because there will likely be more as we\n    // expand the schema.\n    const match = error.dataPath.match(/^\\/(permissions)\\/([\\d+])/);\n    if (match && baseObject.code !== messages.MANIFEST_BAD_PERMISSION.code) {\n      baseObject = messages[`MANIFEST_${match[1].toUpperCase()}`];\n      overrides.message = oneLine`/${match[1]}: Unknown ${match[1]}\n          \"${error.data}\" at ${match[2]}.`;\n    }\n\n    return Object.assign({}, baseObject, overrides);\n  }\n\n  _validate() {\n    // Not all messages returned by the schema are fatal to Firefox, messages\n    // that are just warnings should be added to this array.\n    const warnings = [messages.MANIFEST_PERMISSIONS.code];\n    let validate = validateAddon;\n\n    if (this.isStaticTheme) {\n      validate = validateStaticTheme;\n    } else if (this.isLanguagePack) {\n      validate = validateLangPack;\n    } else if (this.isDictionary) {\n      validate = validateDictionary;\n    }\n\n    this.isValid = validate(this.parsedJSON);\n    if (!this.isValid) {\n      log.debug('Schema Validation messages', validate.errors);\n\n      validate.errors.forEach((error) => {\n        const message = this.errorLookup(error);\n\n        if (warnings.includes(message.code)) {\n          this.collector.addWarning(message);\n        } else {\n          this.collector.addError(message);\n        }\n\n        // Add-ons with bad permissions will fail to install in Firefox, so\n        // we consider them invalid.\n        if (message.code === messages.MANIFEST_BAD_PERMISSION.code) {\n          this.isValid = false;\n        }\n      });\n    }\n\n    if (this.parsedJSON.content_security_policy) {\n      this.validateCspPolicy(this.parsedJSON.content_security_policy);\n    }\n\n    if (this.parsedJSON.update_url) {\n      this.collector.addNotice(messages.MANIFEST_UNUSED_UPDATE);\n    }\n\n    if (this.parsedJSON.background) {\n      if (this.parsedJSON.background.scripts) {\n        this.parsedJSON.background.scripts.forEach((script) => {\n          this.validateFileExistsInPackage(script, 'script');\n        });\n      }\n      if (this.parsedJSON.background.page) {\n        this.validateFileExistsInPackage(this.parsedJSON.background.page, 'page');\n      }\n    }\n\n    if (this.parsedJSON.content_scripts && this.parsedJSON.content_scripts.length) {\n      this.parsedJSON.content_scripts.forEach((scriptRule) => {\n        if (scriptRule.matches && scriptRule.matches.length) {\n          // Since `include_globs` only get's checked for patterns that are in\n          // `matches` we only need to validate `matches`\n          scriptRule.matches.forEach((matchPattern) => {\n            this.validateContentScriptMatchPattern(matchPattern);\n          });\n        }\n\n        if (scriptRule.js && scriptRule.js.length) {\n          scriptRule.js.forEach((script) => {\n            this.validateFileExistsInPackage(\n              script, 'script', messages.manifestContentScriptFileMissing);\n          });\n        }\n        if (scriptRule.css && scriptRule.css.length) {\n          scriptRule.css.forEach((style) => {\n            this.validateFileExistsInPackage(\n              style, 'css', messages.manifestContentScriptFileMissing);\n          });\n        }\n      });\n    }\n\n    if (this.parsedJSON.dictionaries) {\n      const numberOfDictionaries = Object.keys(\n        this.parsedJSON.dictionaries).length;\n      if (numberOfDictionaries < 1) {\n        this.collector.addError(messages.MANIFEST_EMPTY_DICTS);\n        this.isValid = false;\n      } else if (numberOfDictionaries > 1) {\n        this.collector.addError(messages.MANIFEST_MULTIPLE_DICTS);\n        this.isValid = false;\n      }\n      Object.keys(this.parsedJSON.dictionaries).forEach((locale) => {\n        const filepath = this.parsedJSON.dictionaries[locale];\n        this.validateFileExistsInPackage(\n          filepath, 'binary', messages.manifestDictionaryFileMissing);\n        // A corresponding .aff file should exist for every .dic.\n        this.validateFileExistsInPackage(\n          filepath.replace(/\\.dic$/, '.aff'), 'binary',\n          messages.manifestDictionaryFileMissing);\n      });\n    }\n\n    if (!this.selfHosted && this.parsedJSON.applications &&\n        this.parsedJSON.applications.gecko &&\n        this.parsedJSON.applications.gecko.update_url) {\n      this.collector.addError(messages.MANIFEST_UPDATE_URL);\n      this.isValid = false;\n    }\n\n    if (!this.isLanguagePack &&\n        this.parsedJSON.applications &&\n        this.parsedJSON.applications.gecko &&\n        this.parsedJSON.applications.gecko.strict_max_version) {\n      if (this.isDictionary) {\n        // Dictionaries should not have a strict_max_version at all.\n        this.isValid = false;\n        this.collector.addError(messages.STRICT_MAX_VERSION);\n      } else {\n        // Rest of the extensions can, even though it's not recommended.\n        this.collector.addNotice(messages.STRICT_MAX_VERSION);\n      }\n    }\n\n    if (isToolkitVersionString(this.parsedJSON.version)) {\n      this.collector.addNotice(messages.PROP_VERSION_TOOLKIT_ONLY);\n    }\n\n    if (this.parsedJSON.default_locale) {\n      const msg = path.join(\n        LOCALES_DIRECTORY, this.parsedJSON.default_locale, 'messages.json');\n\n      // Convert filename to unix path separator before\n      // searching it into the scanned files map.\n      if (!this.io.files[upath.toUnix(msg)]) {\n        this.collector.addError(messages.NO_MESSAGES_FILE);\n        this.isValid = false;\n      }\n    }\n\n    if (!this.parsedJSON.default_locale && this.io && this.io.files) {\n      const matchRx = /^_locales\\/.*?\\/messages.json$/;\n      const fileList = Object.keys(this.io.files);\n      for (let i = 0; i < fileList.length; i++) {\n        const filePath = fileList[i];\n        if (filePath.match(matchRx)) {\n          this.collector.addError(messages.NO_DEFAULT_LOCALE);\n          this.isValid = false;\n          break;\n        }\n      }\n    }\n\n    if (this.parsedJSON.default_locale && this.io.path) {\n      const rootPath = path.join(this.io.path, LOCALES_DIRECTORY);\n      if (existsSync(rootPath)) {\n        readdirSync(rootPath).forEach((langDir) => {\n          if (statSync(path.join(rootPath, langDir)).isDirectory()) {\n            const filePath = path.join(LOCALES_DIRECTORY, langDir, MESSAGES_JSON);\n\n            // Convert filename to unix path separator before\n            // searching it into the scanned files map.\n            if (!this.io.files[upath.toUnix(filePath)]) {\n              this.collector.addError(messages.noMessagesFileInLocales(\n                path.join(LOCALES_DIRECTORY, langDir)));\n              this.isValid = false;\n            }\n          }\n        });\n      }\n    }\n  }\n\n  async validateIcon(iconPath, expectedSize) {\n    try {\n      const info = await getImageMetadata(this.io, iconPath);\n      if (info.width !== info.height) {\n        this.collector.addError(messages.iconIsNotSquare(iconPath));\n        this.isValid = false;\n      } else if (info.mime !== 'image/svg+xml' &&\n                  parseInt(info.width, 10) !== parseInt(expectedSize, 10)) {\n        this.collector.addWarning(messages.iconSizeInvalid({\n          path: iconPath,\n          expected: parseInt(expectedSize, 10),\n          actual: parseInt(info.width, 10),\n        }));\n      }\n    } catch (err) {\n      log.debug(`Unexpected error raised while validating icon \"${iconPath}\"`, err);\n      this.collector.addWarning(messages.corruptIconFile({\n        path: iconPath,\n      }));\n    }\n  }\n\n  validateIcons() {\n    const promises = [];\n    const { icons } = this.parsedJSON;\n    Object.keys(icons).forEach((size) => {\n      const _path = normalizePath(icons[size]);\n      if (!Object.prototype.hasOwnProperty.call(this.io.files, _path)) {\n        this.collector.addError(messages.manifestIconMissing(_path));\n        this.isValid = false;\n      } else if (!IMAGE_FILE_EXTENSIONS.includes(_path.split('.').pop().toLowerCase())) {\n        this.collector.addWarning(messages.WRONG_ICON_EXTENSION);\n      } else {\n        promises.push(this.validateIcon(_path, size));\n      }\n    });\n    return Promise.all(promises);\n  }\n\n  validateFileExistsInPackage(filePath, type, messageFunc = messages.manifestBackgroundMissing) {\n    const _path = normalizePath(filePath);\n    if (!Object.prototype.hasOwnProperty.call(this.io.files, _path)) {\n      this.collector.addError(messageFunc(\n        _path, type));\n      this.isValid = false;\n    }\n  }\n\n  validateContentScriptMatchPattern(matchPattern) {\n    BLOCKED_CONTENT_SCRIPT_HOSTS.split('\\n').forEach((value) => {\n      if (value && value.length > 0 && value.substr(0, 1) !== '#') {\n        if (matchPattern.includes(value.trim())) {\n          this.collector.addError(messages.MANIFEST_INVALID_CONTENT);\n          this.isValid = false;\n        }\n      }\n    });\n  }\n\n  validateCspPolicy(policy) {\n    const directives = parseCspPolicy(policy);\n\n    // Not sure about FTP here but CSP spec treats ws/wss as\n    // equivalent to http/https.\n    const validProtocols = ['ftp:', 'http:', 'https:', 'ws:', 'wss:'];\n    // The order is important here, 'default-src' needs to be before\n    // 'script-src' to ensure it can overwrite default-src security policies\n    const candidates = ['default-src', 'script-src', 'worker-src'];\n\n    let insecureSrcDirective = false;\n    for (let i = 0; i < candidates.length; i++) {\n      /* eslint-disable no-continue */\n      const candidate = candidates[i];\n      if (Object.prototype.hasOwnProperty.call(directives, candidate)) {\n        const values = directives[candidate];\n\n        // If the 'default-src' is insecure, check whether the 'script-src'\n        // makes it secure, ie 'script-src: self;'\n        if (insecureSrcDirective &&\n            candidate === 'script-src' &&\n            values.length === 1 &&\n            values[0] === '\\'self\\'') {\n          insecureSrcDirective = false;\n        }\n\n        for (let j = 0; j < values.length; j++) {\n          let value = values[j].trim();\n\n          if (value.startsWith('moz-extension:')) {\n            // Valid, continue...\n            continue;\n          }\n\n          const hasProtocol = (\n            (value.endsWith(':') && validProtocols.includes(value)) ||\n            (validProtocols.some((x) => value.startsWith(x))));\n\n          if (hasProtocol) {\n            if (candidate === 'default-src') {\n              // Remember insecure 'default-src' to check whether a later\n              // 'script-src' makes it secure\n              insecureSrcDirective = true;\n            } else {\n              this.collector.addWarning(messages.MANIFEST_CSP);\n            }\n            continue;\n          }\n\n          // strip leading and ending single quotes.\n          value = value.replace(/^[']/, '').replace(/[']$/, '');\n\n          // Add a more detailed message for unsafe-eval to avoid confusion\n          // about why it's forbidden.\n          if (value === 'unsafe-eval') {\n            this.collector.addWarning(messages.MANIFEST_CSP_UNSAFE_EVAL);\n            continue;\n          }\n\n          if (value === '*' || value.search(CSP_KEYWORD_RE) === -1) {\n            // everything else looks like something we don't understand\n            // / support otherwise is invalid so let's warn about that.\n            if (candidate === 'default-src') {\n              // Remember insecure 'default-src' to check whether a later\n              // 'script-src' makes it secure\n              insecureSrcDirective = true;\n            } else {\n              this.collector.addWarning(messages.MANIFEST_CSP);\n            }\n            continue;\n          }\n        }\n      }\n    }\n    if (insecureSrcDirective) {\n      this.collector.addWarning(messages.MANIFEST_CSP);\n    }\n  }\n\n  getAddonId() {\n    try {\n      const { id } = this.parsedJSON.applications.gecko;\n      return typeof id === 'undefined' ? null : id;\n    } catch (e) {\n      log.error('Failed to get the id from the manifest.');\n      return null;\n    }\n  }\n\n  getMetadata() {\n    return {\n      id: this.getAddonId(),\n      manifestVersion: this.parsedJSON.manifest_version,\n      name: this.parsedJSON.name,\n      type: PACKAGE_EXTENSION,\n      version: this.parsedJSON.version,\n    };\n  }\n}\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && ((typeof call === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(call)) === \"object\" || typeof call === \"function\") ? call : self;\n};","\"use strict\";\n\nexports.__esModule = true;\n\nvar _iterator = require(\"../core-js/symbol/iterator\");\n\nvar _iterator2 = _interopRequireDefault(_iterator);\n\nvar _symbol = require(\"../core-js/symbol\");\n\nvar _symbol2 = _interopRequireDefault(_symbol);\n\nvar _typeof = typeof _symbol2.default === \"function\" && typeof _iterator2.default === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = typeof _symbol2.default === \"function\" && _typeof(_iterator2.default) === \"symbol\" ? function (obj) {\n  return typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n} : function (obj) {\n  return obj && typeof _symbol2.default === \"function\" && obj.constructor === _symbol2.default && obj !== _symbol2.default.prototype ? \"symbol\" : typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj);\n};","module.exports = { \"default\": require(\"core-js/library/fn/symbol/iterator\"), __esModule: true };","require('../../modules/es6.string.iterator');\nrequire('../../modules/web.dom.iterable');\nmodule.exports = require('../../modules/_wks-ext').f('iterator');\n","exports.f = require('./_wks');\n","module.exports = { \"default\": require(\"core-js/library/fn/symbol\"), __esModule: true };","require('../../modules/es6.symbol');\nrequire('../../modules/es6.object.to-string');\nrequire('../../modules/es7.symbol.async-iterator');\nrequire('../../modules/es7.symbol.observable');\nmodule.exports = require('../../modules/_core').Symbol;\n","'use strict';\n// ECMAScript 6 symbols shim\nvar global = require('./_global');\nvar has = require('./_has');\nvar DESCRIPTORS = require('./_descriptors');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar META = require('./_meta').KEY;\nvar $fails = require('./_fails');\nvar shared = require('./_shared');\nvar setToStringTag = require('./_set-to-string-tag');\nvar uid = require('./_uid');\nvar wks = require('./_wks');\nvar wksExt = require('./_wks-ext');\nvar wksDefine = require('./_wks-define');\nvar enumKeys = require('./_enum-keys');\nvar isArray = require('./_is-array');\nvar anObject = require('./_an-object');\nvar isObject = require('./_is-object');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar createDesc = require('./_property-desc');\nvar _create = require('./_object-create');\nvar gOPNExt = require('./_object-gopn-ext');\nvar $GOPD = require('./_object-gopd');\nvar $DP = require('./_object-dp');\nvar $keys = require('./_object-keys');\nvar gOPD = $GOPD.f;\nvar dP = $DP.f;\nvar gOPN = gOPNExt.f;\nvar $Symbol = global.Symbol;\nvar $JSON = global.JSON;\nvar _stringify = $JSON && $JSON.stringify;\nvar PROTOTYPE = 'prototype';\nvar HIDDEN = wks('_hidden');\nvar TO_PRIMITIVE = wks('toPrimitive');\nvar isEnum = {}.propertyIsEnumerable;\nvar SymbolRegistry = shared('symbol-registry');\nvar AllSymbols = shared('symbols');\nvar OPSymbols = shared('op-symbols');\nvar ObjectProto = Object[PROTOTYPE];\nvar USE_NATIVE = typeof $Symbol == 'function';\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar setter = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDesc = DESCRIPTORS && $fails(function () {\n  return _create(dP({}, 'a', {\n    get: function () { return dP(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (it, key, D) {\n  var protoDesc = gOPD(ObjectProto, key);\n  if (protoDesc) delete ObjectProto[key];\n  dP(it, key, D);\n  if (protoDesc && it !== ObjectProto) dP(ObjectProto, key, protoDesc);\n} : dP;\n\nvar wrap = function (tag) {\n  var sym = AllSymbols[tag] = _create($Symbol[PROTOTYPE]);\n  sym._k = tag;\n  return sym;\n};\n\nvar isSymbol = USE_NATIVE && typeof $Symbol.iterator == 'symbol' ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return it instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(it, key, D) {\n  if (it === ObjectProto) $defineProperty(OPSymbols, key, D);\n  anObject(it);\n  key = toPrimitive(key, true);\n  anObject(D);\n  if (has(AllSymbols, key)) {\n    if (!D.enumerable) {\n      if (!has(it, HIDDEN)) dP(it, HIDDEN, createDesc(1, {}));\n      it[HIDDEN][key] = true;\n    } else {\n      if (has(it, HIDDEN) && it[HIDDEN][key]) it[HIDDEN][key] = false;\n      D = _create(D, { enumerable: createDesc(0, false) });\n    } return setSymbolDesc(it, key, D);\n  } return dP(it, key, D);\n};\nvar $defineProperties = function defineProperties(it, P) {\n  anObject(it);\n  var keys = enumKeys(P = toIObject(P));\n  var i = 0;\n  var l = keys.length;\n  var key;\n  while (l > i) $defineProperty(it, key = keys[i++], P[key]);\n  return it;\n};\nvar $create = function create(it, P) {\n  return P === undefined ? _create(it) : $defineProperties(_create(it), P);\n};\nvar $propertyIsEnumerable = function propertyIsEnumerable(key) {\n  var E = isEnum.call(this, key = toPrimitive(key, true));\n  if (this === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return false;\n  return E || !has(this, key) || !has(AllSymbols, key) || has(this, HIDDEN) && this[HIDDEN][key] ? E : true;\n};\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(it, key) {\n  it = toIObject(it);\n  key = toPrimitive(key, true);\n  if (it === ObjectProto && has(AllSymbols, key) && !has(OPSymbols, key)) return;\n  var D = gOPD(it, key);\n  if (D && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) D.enumerable = true;\n  return D;\n};\nvar $getOwnPropertyNames = function getOwnPropertyNames(it) {\n  var names = gOPN(toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (!has(AllSymbols, key = names[i++]) && key != HIDDEN && key != META) result.push(key);\n  } return result;\n};\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(it) {\n  var IS_OP = it === ObjectProto;\n  var names = gOPN(IS_OP ? OPSymbols : toIObject(it));\n  var result = [];\n  var i = 0;\n  var key;\n  while (names.length > i) {\n    if (has(AllSymbols, key = names[i++]) && (IS_OP ? has(ObjectProto, key) : true)) result.push(AllSymbols[key]);\n  } return result;\n};\n\n// 19.4.1.1 Symbol([description])\nif (!USE_NATIVE) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor!');\n    var tag = uid(arguments.length > 0 ? arguments[0] : undefined);\n    var $set = function (value) {\n      if (this === ObjectProto) $set.call(OPSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDesc(this, tag, createDesc(1, value));\n    };\n    if (DESCRIPTORS && setter) setSymbolDesc(ObjectProto, tag, { configurable: true, set: $set });\n    return wrap(tag);\n  };\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return this._k;\n  });\n\n  $GOPD.f = $getOwnPropertyDescriptor;\n  $DP.f = $defineProperty;\n  require('./_object-gopn').f = gOPNExt.f = $getOwnPropertyNames;\n  require('./_object-pie').f = $propertyIsEnumerable;\n  require('./_object-gops').f = $getOwnPropertySymbols;\n\n  if (DESCRIPTORS && !require('./_library')) {\n    redefine(ObjectProto, 'propertyIsEnumerable', $propertyIsEnumerable, true);\n  }\n\n  wksExt.f = function (name) {\n    return wrap(wks(name));\n  };\n}\n\n$export($export.G + $export.W + $export.F * !USE_NATIVE, { Symbol: $Symbol });\n\nfor (var es6Symbols = (\n  // 19.4.2.2, 19.4.2.3, 19.4.2.4, 19.4.2.6, 19.4.2.8, 19.4.2.9, 19.4.2.10, 19.4.2.11, 19.4.2.12, 19.4.2.13, 19.4.2.14\n  'hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'\n).split(','), j = 0; es6Symbols.length > j;)wks(es6Symbols[j++]);\n\nfor (var wellKnownSymbols = $keys(wks.store), k = 0; wellKnownSymbols.length > k;) wksDefine(wellKnownSymbols[k++]);\n\n$export($export.S + $export.F * !USE_NATIVE, 'Symbol', {\n  // 19.4.2.1 Symbol.for(key)\n  'for': function (key) {\n    return has(SymbolRegistry, key += '')\n      ? SymbolRegistry[key]\n      : SymbolRegistry[key] = $Symbol(key);\n  },\n  // 19.4.2.5 Symbol.keyFor(sym)\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol!');\n    for (var key in SymbolRegistry) if (SymbolRegistry[key] === sym) return key;\n  },\n  useSetter: function () { setter = true; },\n  useSimple: function () { setter = false; }\n});\n\n$export($export.S + $export.F * !USE_NATIVE, 'Object', {\n  // 19.1.2.2 Object.create(O [, Properties])\n  create: $create,\n  // 19.1.2.4 Object.defineProperty(O, P, Attributes)\n  defineProperty: $defineProperty,\n  // 19.1.2.3 Object.defineProperties(O, Properties)\n  defineProperties: $defineProperties,\n  // 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor,\n  // 19.1.2.7 Object.getOwnPropertyNames(O)\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // 19.1.2.8 Object.getOwnPropertySymbols(O)\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// 24.3.2 JSON.stringify(value [, replacer [, space]])\n$JSON && $export($export.S + $export.F * (!USE_NATIVE || $fails(function () {\n  var S = $Symbol();\n  // MS Edge converts symbol values to JSON as {}\n  // WebKit converts symbol values to JSON as null\n  // V8 throws on boxed symbols\n  return _stringify([S]) != '[null]' || _stringify({ a: S }) != '{}' || _stringify(Object(S)) != '{}';\n})), 'JSON', {\n  stringify: function stringify(it) {\n    var args = [it];\n    var i = 1;\n    var replacer, $replacer;\n    while (arguments.length > i) args.push(arguments[i++]);\n    $replacer = replacer = args[1];\n    if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n    if (!isArray(replacer)) replacer = function (key, value) {\n      if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n      if (!isSymbol(value)) return value;\n    };\n    args[1] = replacer;\n    return _stringify.apply($JSON, args);\n  }\n});\n\n// 19.4.3.4 Symbol.prototype[@@toPrimitive](hint)\n$Symbol[PROTOTYPE][TO_PRIMITIVE] || require('./_hide')($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n// 19.4.3.5 Symbol.prototype[@@toStringTag]\nsetToStringTag($Symbol, 'Symbol');\n// 20.2.1.9 Math[@@toStringTag]\nsetToStringTag(Math, 'Math', true);\n// 24.3.3 JSON[@@toStringTag]\nsetToStringTag(global.JSON, 'JSON', true);\n","var global = require('./_global');\nvar core = require('./_core');\nvar LIBRARY = require('./_library');\nvar wksExt = require('./_wks-ext');\nvar defineProperty = require('./_object-dp').f;\nmodule.exports = function (name) {\n  var $Symbol = core.Symbol || (core.Symbol = LIBRARY ? {} : global.Symbol || {});\n  if (name.charAt(0) != '_' && !(name in $Symbol)) defineProperty($Symbol, name, { value: wksExt.f(name) });\n};\n","// all enumerable object keys, includes symbols\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nmodule.exports = function (it) {\n  var result = getKeys(it);\n  var getSymbols = gOPS.f;\n  if (getSymbols) {\n    var symbols = getSymbols(it);\n    var isEnum = pIE.f;\n    var i = 0;\n    var key;\n    while (symbols.length > i) if (isEnum.call(it, key = symbols[i++])) result.push(key);\n  } return result;\n};\n","exports.f = Object.getOwnPropertySymbols;\n","exports.f = {}.propertyIsEnumerable;\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nvar toIObject = require('./_to-iobject');\nvar gOPN = require('./_object-gopn').f;\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return gOPN(it);\n  } catch (e) {\n    return windowNames.slice();\n  }\n};\n\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]' ? getWindowNames(it) : gOPN(toIObject(it));\n};\n","// 19.1.2.7 / 15.2.3.4 Object.getOwnPropertyNames(O)\nvar $keys = require('./_object-keys-internal');\nvar hiddenKeys = require('./_enum-bug-keys').concat('length', 'prototype');\n\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return $keys(O, hiddenKeys);\n};\n","var pIE = require('./_object-pie');\nvar createDesc = require('./_property-desc');\nvar toIObject = require('./_to-iobject');\nvar toPrimitive = require('./_to-primitive');\nvar has = require('./_has');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nexports.f = require('./_descriptors') ? gOPD : function getOwnPropertyDescriptor(O, P) {\n  O = toIObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return gOPD(O, P);\n  } catch (e) { /* empty */ }\n  if (has(O, P)) return createDesc(!pIE.f.call(O, P), O[P]);\n};\n","require('./_wks-define')('asyncIterator');\n","require('./_wks-define')('observable');\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _setPrototypeOf = require(\"../core-js/object/set-prototype-of\");\n\nvar _setPrototypeOf2 = _interopRequireDefault(_setPrototypeOf);\n\nvar _create = require(\"../core-js/object/create\");\n\nvar _create2 = _interopRequireDefault(_create);\n\nvar _typeof2 = require(\"../helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + (typeof superClass === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(superClass)));\n  }\n\n  subClass.prototype = (0, _create2.default)(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) _setPrototypeOf2.default ? (0, _setPrototypeOf2.default)(subClass, superClass) : subClass.__proto__ = superClass;\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/set-prototype-of\"), __esModule: true };","require('../../modules/es6.object.set-prototype-of');\nmodule.exports = require('../../modules/_core').Object.setPrototypeOf;\n","// 19.1.3.19 Object.setPrototypeOf(O, proto)\nvar $export = require('./_export');\n$export($export.S, 'Object', { setPrototypeOf: require('./_set-proto').set });\n","// Works with __proto__ only. Old v8 can't work with null proto objects.\n/* eslint-disable no-proto */\nvar isObject = require('./_is-object');\nvar anObject = require('./_an-object');\nvar check = function (O, proto) {\n  anObject(O);\n  if (!isObject(proto) && proto !== null) throw TypeError(proto + \": can't set as prototype!\");\n};\nmodule.exports = {\n  set: Object.setPrototypeOf || ('__proto__' in {} ? // eslint-disable-line\n    function (test, buggy, set) {\n      try {\n        set = require('./_ctx')(Function.call, require('./_object-gopd').f(Object.prototype, '__proto__').set, 2);\n        set(test, []);\n        buggy = !(test instanceof Array);\n      } catch (e) { buggy = true; }\n      return function setPrototypeOf(O, proto) {\n        check(O, proto);\n        if (buggy) O.__proto__ = proto;\n        else set(O, proto);\n        return O;\n      };\n    }({}, false) : undefined),\n  check: check\n};\n","module.exports = { \"default\": require(\"core-js/library/fn/object/create\"), __esModule: true };","require('../../modules/es6.object.create');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function create(P, D) {\n  return $Object.create(P, D);\n};\n","var $export = require('./_export');\n// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\n$export($export.S, 'Object', { create: require('./_object-create') });\n","module.exports = require(\"relaxed-json\");","module.exports = require(\"probe-image-size\");","import ajv from 'ajv';\nimport ajvMergePatch from 'ajv-merge-patch';\n\nimport merge from 'schema/deepmerge';\nimport schemaObject from 'schema/imported/manifest';\nimport themeSchemaObject from 'schema/imported/theme';\nimport messagesSchemaObject from 'schema/messages';\n\nimport {\n  imageDataOrStrictRelativeUrl,\n  isAnyUrl,\n  isAbsoluteUrl,\n  isStrictRelativeUrl,\n  isSecureUrl,\n  isUnresolvedRelativeUrl,\n  isValidVersionString,\n} from './formats';\nimport schemas from './imported';\n\nconst validator = ajv({\n  allErrors: true,\n  errorDataPath: 'property',\n  jsonPointers: true,\n  verbose: true,\n  schemas,\n  schemaId: 'auto',\n});\n\nvalidator.addMetaSchema(require('ajv/lib/refs/json-schema-draft-06.json'));\n\najvMergePatch(validator);\n\nvalidator.addFormat('versionString', isValidVersionString);\nvalidator.addFormat('deprecated', () => false);\nvalidator.addFormat('contentSecurityPolicy', () => true);\nvalidator.addFormat('ignore', () => true);\n\n// URL formats. The format names don't mean what you'd think, see bug 1354342.\n//\n// url -> MUST be absolute URL\n// relativeUrl -> CHOICE of absolute URL or relative URL (including protocol relative)\n// strictRelativeUrl -> MUST be relative, but not protocol relative (path only)\nvalidator.addFormat('url', isAbsoluteUrl);\nvalidator.addFormat('relativeUrl', isAnyUrl);\n// homepageUrl is the same as relativeUrl but Firefox will encode | characters.\nvalidator.addFormat('homepageUrl', isAnyUrl);\nvalidator.addFormat('strictRelativeUrl', isStrictRelativeUrl);\nvalidator.addFormat('unresolvedRelativeUrl', isUnresolvedRelativeUrl);\nvalidator.addFormat('secureUrl', isSecureUrl);\n\nvalidator.addFormat('imageDataOrStrictRelativeUrl', imageDataOrStrictRelativeUrl);\n\nfunction filterErrors(errors) {\n  if (errors) {\n    return errors.filter((error) => error.keyword !== '$merge');\n  }\n  return errors;\n}\n\nconst _validateAddon = validator.compile({\n  ...schemaObject,\n  id: 'manifest',\n  $ref: '#/types/WebExtensionManifest',\n});\n\nexport const validateAddon = (...args) => {\n  const isValid = _validateAddon(...args);\n  validateAddon.errors = filterErrors(_validateAddon.errors);\n  return isValid;\n};\n\n// Create a new schema object that merges theme.json and the regular\n// manifest.json schema.\n// Then modify the result of that to set `additionalProperties = false`\n// so that additional properties are not allowed for themes.\n// We have to use deepmerge here to make sure we can overwrite the nested\n// structure and can use object-destructuring at the root level\n// because we only overwrite `id` and `$ref` in root of the resulting object.\nconst _validateStaticTheme = validator.compile({\n  ...merge(\n    schemaObject,\n    merge(themeSchemaObject, {\n      types: {\n        ThemeManifest: {\n          $merge: {\n            with: {\n              additionalProperties: false,\n            },\n          },\n        },\n      },\n    }),\n  ),\n  id: 'static-theme-manifest',\n  $ref: '#/types/ThemeManifest',\n});\n\nexport const validateStaticTheme = (...args) => {\n  const isValid = _validateStaticTheme(...args);\n  validateStaticTheme.errors = filterErrors(_validateStaticTheme.errors);\n  return isValid;\n};\n\n// Like with static themes, we don't want additional properties in langpacks.\n// The only difference is, this time, there is no additional schema file, we\n// just need to reference WebExtensionLangpackManifest and merge it with the\n// object that has additionalProperties: false.\nconst _validateLangPack = validator.compile({\n  ...merge(\n    schemaObject, {\n      types: {\n        WebExtensionLangpackManifest: {\n          $merge: {\n            with: {\n              additionalProperties: false,\n            },\n          },\n        },\n      },\n    }\n  ),\n  id: 'langpack-manifest',\n  $ref: '#/types/WebExtensionLangpackManifest',\n});\n\nexport const validateLangPack = (...args) => {\n  const isValid = _validateLangPack(...args);\n  validateLangPack.errors = filterErrors(_validateLangPack.errors);\n  return isValid;\n};\n\n// Like with langpacks, we don't want additional properties in dictionaries,\n// and there is no separate schema file.\nconst _validateDictionary = validator.compile({\n  ...merge(\n    schemaObject, {\n      types: {\n        WebExtensionDictionaryManifest: {\n          $merge: {\n            with: {\n              additionalProperties: false,\n            },\n          },\n        },\n      },\n    }\n  ),\n  id: 'dictionary-manifest',\n  $ref: '#/types/WebExtensionDictionaryManifest',\n});\n\nexport const validateDictionary = (...args) => {\n  const isValid = _validateDictionary(...args);\n  validateDictionary.errors = filterErrors(_validateDictionary.errors);\n  return isValid;\n};\n\nconst _validateLocaleMessages = validator.compile({\n  ...messagesSchemaObject,\n  id: 'messages',\n  $ref: '#/types/WebExtensionMessages',\n});\n\nexport const validateLocaleMessages = (...args) => {\n  const isValid = _validateLocaleMessages(...args);\n  validateLocaleMessages.errors = filterErrors(_validateLocaleMessages.errors);\n  return isValid;\n};\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _assign = require(\"../core-js/object/assign\");\n\nvar _assign2 = _interopRequireDefault(_assign);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _assign2.default || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/assign\"), __esModule: true };","require('../../modules/es6.object.assign');\nmodule.exports = require('../../modules/_core').Object.assign;\n","// 19.1.3.1 Object.assign(target, source)\nvar $export = require('./_export');\n\n$export($export.S + $export.F, 'Object', { assign: require('./_object-assign') });\n","'use strict';\n// 19.1.2.1 Object.assign(target, source, ...)\nvar getKeys = require('./_object-keys');\nvar gOPS = require('./_object-gops');\nvar pIE = require('./_object-pie');\nvar toObject = require('./_to-object');\nvar IObject = require('./_iobject');\nvar $assign = Object.assign;\n\n// should work with symbols and should have deterministic property order (V8 bug)\nmodule.exports = !$assign || require('./_fails')(function () {\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line no-undef\n  var S = Symbol();\n  var K = 'abcdefghijklmnopqrst';\n  A[S] = 7;\n  K.split('').forEach(function (k) { B[k] = k; });\n  return $assign({}, A)[S] != 7 || Object.keys($assign({}, B)).join('') != K;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars\n  var T = toObject(target);\n  var aLen = arguments.length;\n  var index = 1;\n  var getSymbols = gOPS.f;\n  var isEnum = pIE.f;\n  while (aLen > index) {\n    var S = IObject(arguments[index++]);\n    var keys = getSymbols ? getKeys(S).concat(getSymbols(S)) : getKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) if (isEnum.call(S, key = keys[j++])) T[key] = S[key];\n  } return T;\n} : $assign;\n","module.exports = require(\"ajv\");","module.exports = require(\"ajv-merge-patch\");","/**\n * deepmerge 2.0 changed the way the array merge worked. This is the suggested\n * solution from their README for how to use the old version.\n *\n * https://github.com/KyleAMathews/deepmerge/blob/3ab89f2d2c938fc2e045c4ba822da0ffb81e4891/readme.md#arraymerge\n */\n\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport merge from 'deepmerge';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport isMergeableObject from 'is-mergeable-object';\n\nconst emptyTarget = (value) => (Array.isArray(value) ? [] : {});\nconst clone = (value, options) => merge(emptyTarget(value), value, options);\n\nfunction oldArrayMerge(target, source, optionsArgument) {\n  const destination = target.slice();\n\n  source.forEach((e, i) => {\n    if (typeof destination[i] === 'undefined') {\n      const cloneRequested = !optionsArgument || optionsArgument.clone !== false;\n      const shouldClone = cloneRequested && isMergeableObject(e);\n      destination[i] = shouldClone ? clone(e, optionsArgument) : e;\n    } else if (isMergeableObject(e)) {\n      destination[i] = merge(target[i], e, optionsArgument);\n    } else if (target.indexOf(e) === -1) {\n      destination.push(e);\n    }\n  });\n\n  return destination;\n}\n\nexport default (a, b, opts) => {\n  if (opts) {\n    throw new Error('opts are not supported, use the deepmerge package directly');\n  }\n  return merge(a, b, { arrayMerge: oldArrayMerge });\n};\n","module.exports = require(\"deepmerge\");","module.exports = require(\"is-mergeable-object\");","import { URL } from 'whatwg-url';\n\nconst VALIDNUMRX = /^[0-9]{1,5}$/;\n\n// Firefox's version format is laxer than Chrome's, it accepts:\n// https://developer.mozilla.org/en-US/docs/Toolkit_version_format\n// We choose a slightly restricted version of that format (but still more\n// permissive than Chrome) to allow Beta addons, per:\n// https://developer.mozilla.org/en-US/Add-ons/AMO/Policy/Maintenance\nconst TOOLKIT_VERSION_REGEX = /^(\\d+\\.?){1,3}\\.(\\d+([A-z]+(-?\\d+)?))$/;\n\nexport function isValidVersionString(version) {\n  // We should be starting with a string. Limit length, see bug 1393644\n  if (typeof version !== 'string' || version.length > 100) {\n    return false;\n  }\n  // If valid toolkit version string, return true early\n  if (TOOLKIT_VERSION_REGEX.test(version)) {\n    return true;\n  }\n  const parts = version.split('.');\n  if (parts.length > 4) {\n    return false;\n  }\n\n  for (let i = 0; i < parts.length; i++) {\n    let part = parts[i];\n    // Leading or multiple zeros not allowed.\n    if (part.startsWith('0') && part.length > 1) {\n      return false;\n    }\n    // Disallow things like 123e5 which parseInt will convert.\n    if (!VALIDNUMRX.test(part)) {\n      return false;\n    }\n    part = parseInt(part, 10);\n    if (Number.isNaN(part) || part < 0 || part > 65535) {\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function isToolkitVersionString(version) {\n  // We should be starting with a string. Limit length, see bug 1393644\n  if (typeof version !== 'string' || version.length > 100) {\n    return false;\n  }\n  return TOOLKIT_VERSION_REGEX.test(version) && isValidVersionString(version);\n}\n\nexport function isAbsoluteUrl(value) {\n  try {\n    // eslint-disable-next-line no-new\n    new URL(value);\n  } catch (e) {\n    // Couldn't parse, invalid.\n    return false;\n  }\n  // Could parse without a base, it's absolute.\n  return true;\n}\n\nfunction isRelativeUrl(value) {\n  // A dummy protocol that shouldn't exist.\n  const protocol = 'asdoiasjdpoaisjd:';\n  let url;\n  try {\n    url = new URL(value, `${protocol}//foo`);\n  } catch (e) {\n    // URL is invalid.\n    return false;\n  }\n\n  // If the URL is relative, then the protocol will stay the same, but host\n  // could change due to protocol relative. Also check that the URL isn't\n  // absolute, since then it is using the dummy protocol we defined.\n  return url.protocol === protocol && !isAbsoluteUrl(value);\n}\n\nexport function isAnyUrl(value) {\n  return isAbsoluteUrl(value) || isRelativeUrl(value);\n}\n\nexport function isStrictRelativeUrl(value) {\n  return !value.startsWith('//') && isRelativeUrl(value);\n}\n\nexport function isSecureUrl(value) {\n  let url;\n  try {\n    url = new URL(value);\n  } catch (e) {\n    // It's invalid or not absolute.\n    return false;\n  }\n  // URL is absolute, check against secure protocols.\n  return ['https:', 'wss:'].includes(url.protocol);\n}\n\nexport function imageDataOrStrictRelativeUrl(value) {\n  // Do not accept a string which resolves as an absolute URL, or any\n  // protocol-relative URL, except PNG or JPG data URLs.\n  return value.startsWith('data:image/png;base64,')\n    || value.startsWith('data:image/jpeg;base64,')\n    || isStrictRelativeUrl(value);\n}\n\nexport const isUnresolvedRelativeUrl = isStrictRelativeUrl;\n","// This file is generated by the schema import script.\n\nimport alarms from './alarms.json';\nimport bookmarks from './bookmarks.json';\nimport browserAction from './browser_action.json';\nimport browserSettings from './browser_settings.json';\nimport browsingData from './browsing_data.json';\nimport chrome_settings_overrides from './chrome_settings_overrides.json';\nimport clipboard from './clipboard.json';\nimport commands from './commands.json';\nimport contentScripts from './content_scripts.json';\nimport contextualIdentities from './contextual_identities.json';\nimport cookies from './cookies.json';\nimport devtools from './devtools.json';\nimport dns from './dns.json';\nimport downloads from './downloads.json';\nimport events from './events.json';\nimport experiments from './experiments.json';\nimport extension from './extension.json';\nimport extension_protocol_handlers from './extension_protocol_handlers.json';\nimport extensionTypes from './extension_types.json';\nimport find from './find.json';\nimport geckoProfiler from './geckoProfiler.json';\nimport history from './history.json';\nimport i18n from './i18n.json';\nimport identity from './identity.json';\nimport idle from './idle.json';\nimport management from './management.json';\nimport menus from './menus.json';\nimport menusInternal from './menus_internal.json';\nimport native_manifest from './native_manifest.json';\nimport notifications from './notifications.json';\nimport omnibox from './omnibox.json';\nimport pageAction from './page_action.json';\nimport permissions from './permissions.json';\nimport pkcs11 from './pkcs11.json';\nimport privacy from './privacy.json';\nimport proxy from './proxy.json';\nimport runtime from './runtime.json';\nimport sessions from './sessions.json';\nimport sidebarAction from './sidebar_action.json';\nimport storage from './storage.json';\nimport tabs from './tabs.json';\nimport test from './test.json';\nimport theme from './theme.json';\nimport topSites from './top_sites.json';\nimport types from './types.json';\nimport url_overrides from './url_overrides.json';\nimport webNavigation from './web_navigation.json';\nimport webRequest from './web_request.json';\nimport windows from './windows.json';\nimport contextMenus from './context_menus.json';\nexport default [\n  alarms,\n  bookmarks,\n  browserAction,\n  browserSettings,\n  browsingData,\n  chrome_settings_overrides,\n  clipboard,\n  commands,\n  contentScripts,\n  contextualIdentities,\n  cookies,\n  devtools,\n  dns,\n  downloads,\n  events,\n  experiments,\n  extension,\n  extension_protocol_handlers,\n  extensionTypes,\n  find,\n  geckoProfiler,\n  history,\n  i18n,\n  identity,\n  idle,\n  management,\n  menus,\n  menusInternal,\n  native_manifest,\n  notifications,\n  omnibox,\n  pageAction,\n  permissions,\n  pkcs11,\n  privacy,\n  proxy,\n  runtime,\n  sessions,\n  sidebarAction,\n  storage,\n  tabs,\n  test,\n  theme,\n  topSites,\n  types,\n  url_overrides,\n  webNavigation,\n  webRequest,\n  windows,\n  contextMenus,\n];\n","import esprima from 'esprima';\nimport RJSON from 'relaxed-json';\n\nimport * as messages from 'messages';\n\nexport default class JSONParser {\n  constructor(jsonString, collector, { filename = null } = {}) {\n    // Add the JSON string to the object; we'll use this for testing.\n    this._jsonString = jsonString;\n\n    // Provides ability to directly add messages to\n    // the collector.\n    this.collector = collector;\n\n    // Set the filename for this file\n    this.filename = filename;\n\n    // This marks whether a JSON file is valid; in the case of the base JSON\n    // parser, that's just whether it can be parsed and has duplicate keys.\n    this.isValid = null;\n  }\n\n  parse(RelaxedJSON = RJSON) {\n    try {\n      this.parsedJSON = JSON.parse(this._jsonString);\n    } catch (originalError) {\n      // First we'll try to remove comments with esprima;\n      // WebExtension manifests can contain comments, so we'll strip\n      // them out and see if we can parse the JSON.\n      // If not it's just garbage JSON and we error.\n      //\n      // Originally from https://github.com/abarreir/crx2ff/blob/d2b882056f902d751ad05e329efda7eddcb9d268/libs/ext-converter.js#L19-L37\n      const manifestString = `var o = ${this._jsonString}`;\n      try {\n        // This converts the JSON into a real JS object, and removes any\n        // comments from the JS code.\n        // This has some drawbacks because JSON and JS are not _100%_\n        // compatible. This is largely to do with Unicode characters we\n        // wouldn't expect to see in manifests anyway, and it should simply be\n        // a JSON parse error anyway.\n        // See:\n        // http://stackoverflow.com/questions/23752156/are-all-json-objects-also-valid-javascript-objects/23753148#23753148\n        // https://github.com/judofyr/timeless/issues/57#issuecomment-31872462\n        const tokens = esprima.tokenize(manifestString, { comment: true }).slice(3);\n        this._jsonString = tokens.reduce((json, token) => {\n          // Ignore line comments (`// comments`) and just return the existing\n          // json we've built.\n          if (token.type === 'LineComment') {\n            return json;\n          }\n\n          // Block comments are not allowed, so this is an error.\n          if (token.type === 'BlockComment') {\n            this.collector.addError(messages.JSON_BLOCK_COMMENTS);\n            this.isValid = false;\n          }\n\n          return `${json}${token.value}`;\n        }, '');\n\n        // We found block-level comments, so this manifest is not valid.\n        // Don't bother parsing it again.\n        if (this.isValid === false) {\n          return;\n        }\n\n        this.parsedJSON = JSON.parse(this._jsonString);\n      } catch (error) {\n        // There was still an error, so looks like this manifest is actually\n        // invalid.\n        const errorData = Object.assign({}, messages.JSON_INVALID, {\n          file: this.filename,\n          description: error.message,\n        });\n        this.collector.addError(errorData);\n        this.isValid = false;\n        return;\n      }\n    }\n\n    // Check for duplicate keys, which renders the manifest invalid.\n    this._checkForDuplicateKeys(RelaxedJSON);\n\n    // If never marked as invalid, this is a valid JSON file.\n    if (this.isValid !== false) {\n      this.isValid = true;\n    }\n  }\n\n  _checkForDuplicateKeys(RelaxedJSON = RJSON) {\n    try {\n      RelaxedJSON.parse(this._jsonString, { duplicate: true, tolerant: true });\n    } catch (err) {\n      if (err.warnings && err.warnings.length > 0) {\n        err.warnings.forEach((error) => {\n          if (error.message.startsWith('Duplicate key:')) {\n            const message = Object.assign({}, messages.JSON_DUPLICATE_KEY, {\n              file: this.filename,\n              line: error.line,\n              description: `${error.message} found in JSON`,\n            });\n            this.collector.addError(message);\n            this.isValid = false;\n          }\n        });\n      }\n    }\n  }\n}\n","module.exports = require(\"esprima\");","module.exports = \"wbgdrb.applythrunet.co.in\\n\"","import BaseScanner from 'scanners/base';\nimport * as messages from 'messages';\nimport * as constants from 'const';\n\n\nexport default class BinaryScanner extends BaseScanner {\n  static get fileStreamType() {\n    return 'chunk';\n  }\n\n  static get scannerName() {\n    return 'binary';\n  }\n\n  check(buffer, values) {\n    if (Object.keys(values).some((v) => values[v] !== buffer[v])) {\n      return;\n    }\n    this.linterMessages.push(\n      Object.assign({}, messages.FLAGGED_FILE_TYPE, {\n        type: constants.VALIDATION_NOTICE,\n        file: this.filename,\n      })\n    );\n  }\n\n  async scan() {\n    const buffer = this.contents;\n    constants.FLAGGED_FILE_MAGIC_NUMBERS.forEach((entry) => {\n      this.check(buffer, entry);\n    });\n\n    return {\n      linterMessages: this.linterMessages,\n      scannedFiles: this.scannedFiles,\n    };\n  }\n}\n","import { ensureFilenameExists, ignorePrivateFunctions } from 'utils';\n\n\nexport default class BaseScanner {\n  static get fileResultType() {\n    /*\n    Because each scanner expects a certain kind of data from the\n    io libraries, a string or stream for example, we'll let the\n    scanner define the type of data it expects. Most default to\n    string.\n\n    This can be overridden on the class.\n\n    Because contents is passed to the constructor, we need to be\n    able to access this before the constructor.\n    */\n    return 'string';\n  }\n\n  static get scannerName() {\n    /*\n    Each scanner has a unique name that identifies it. This value is currently\n    being used to organize scanned files and report them.\n\n    This must be overriden on the class.\n    */\n\n    throw new Error('scannerName is not implemented');\n  }\n\n  constructor(contents, filename, options = {}) {\n    this.contents = contents;\n    this.filename = filename;\n    this.options = options;\n    this.linterMessages = [];\n    this.scannedFiles = [];\n    this._defaultRules = [];\n    this._parsedContent = null;\n    this._rulesProcessed = 0;\n\n    ensureFilenameExists(this.filename);\n  }\n\n  async scan(_rules = this._defaultRules) {\n    const contents = await this.getContents();\n    // Ignore private functions exported in rule files.\n    //\n    // (These are exported for testing purposes, but we don't want\n    // to include them in our linter's rules.)\n    const rules = ignorePrivateFunctions(_rules);\n\n    const ruleResults = await Promise.all(Object.keys(rules).map((rule) => {\n      this._rulesProcessed++;\n      return rules[rule](contents, this.filename, this.options);\n    }));\n\n    ruleResults.forEach((messages) => {\n      this.linterMessages = this.linterMessages.concat(messages);\n    });\n\n    return {\n      linterMessages: this.linterMessages,\n      scannedFiles: [this.filename],\n    };\n  }\n\n  async getContents() {\n    if (this._parsedContent !== null) {\n      return this._parsedContent;\n    }\n    this._parsedContent = await this._getContents();\n    return this._parsedContent;\n  }\n\n  async _getContents() {\n    throw new Error('_getContents is not implemented');\n  }\n}\n","import * as postcss from 'postcss';\n\nimport BaseScanner from 'scanners/base';\nimport log from 'logger';\nimport { CSS_SYNTAX_ERROR } from 'messages';\nimport { VALIDATION_WARNING } from 'const';\nimport { ignorePrivateFunctions } from 'utils';\nimport * as cssRules from 'rules/css';\n\n\nexport default class CSSScanner extends BaseScanner {\n  _defaultRules = cssRules;\n\n  static get scannerName() {\n    return 'css';\n  }\n\n  processCode(cssNode, cssInstruction, _rules = this._defaultRules) {\n    const file = this.filename;\n    const cssOptions = Object.assign({}, this.options, {\n      startLine: cssNode.source.start.line,\n      startColumn: cssNode.source.start.column,\n    });\n\n    const info = {\n      file,\n      startLine: cssOptions.startLine,\n      startColumn: cssOptions.startColumn,\n    };\n\n    if (cssNode.type === 'comment') {\n      log.debug('Found CSS comment. Skipping', info);\n      return;\n    }\n\n    if (cssNode.type === 'atrule') {\n      log.debug('Processing media rules');\n      if (cssNode.nodes && cssNode.nodes.length) {\n        cssNode.nodes.forEach((mediaCssNode) => {\n          this.processCode(mediaCssNode, cssInstruction, _rules);\n        });\n      } else {\n        log.debug('No media rules found');\n      }\n      return;\n    }\n\n    log.debug('Passing CSS code to rule function \"%s\"',\n      cssInstruction, info);\n\n    this.linterMessages = this.linterMessages.concat(\n      _rules[cssInstruction](cssNode, file, cssOptions));\n  }\n\n  async scan(_rules = this._defaultRules) {\n    const ast = await this.getContents();\n    if (ast && ast.nodes) {\n      const rules = ignorePrivateFunctions(_rules);\n      const { nodes } = ast;\n\n      Object.keys(rules).forEach((cssInstruction) => {\n        this._rulesProcessed++;\n        nodes.forEach((cssNode) => {\n          this.processCode(cssNode, cssInstruction, rules);\n        });\n      });\n    }\n\n    return {\n      linterMessages: this.linterMessages,\n      scannedFiles: this.scannedFiles,\n    };\n  }\n\n  async _getContents(_cssParser = postcss) {\n    try {\n      return _cssParser.parse(this.contents, { from: this.filename });\n    } catch (e) {\n      if (!e.reason || e.name !== 'CssSyntaxError') {\n        throw e;\n      }\n\n      this.linterMessages.push(Object.assign({}, CSS_SYNTAX_ERROR, {\n        type: VALIDATION_WARNING,\n        // Use the reason for the error as the message.\n        // e.message includes an absolute path.\n        message: e.reason,\n        column: e.column,\n        line: e.line,\n        // We use our own ref to the file as postcss outputs\n        // absolute paths.\n        file: this.filename,\n      }));\n\n      // A syntax error has been encounted so it's game over.\n      return null;\n    }\n  }\n}\n","module.exports = require(\"postcss\");","export * from './invalidNesting';\n","import * as messages from 'messages';\n\n\nexport function invalidNesting(cssNode, filename,\n  { startLine, startColumn } = {}) {\n  const messageList = [];\n  if (cssNode.type === 'rule') {\n    for (let i = 0; i < cssNode.nodes.length; i++) {\n      const node = cssNode.nodes[i];\n      if (node.type === 'rule') {\n        messageList.push(\n          Object.assign({}, messages.INVALID_SELECTOR_NESTING, {\n            type: 'warning',\n            line: startLine,\n            column: startColumn,\n            file: filename,\n          }));\n        break;\n      }\n    }\n  }\n  return messageList;\n}\n","import { extname } from 'path';\n\nimport BaseScanner from 'scanners/base';\nimport * as messages from 'messages';\nimport * as constants from 'const';\n\n\nexport default class FilenameScanner extends BaseScanner {\n  static get scannerName() {\n    return 'filename';\n  }\n\n  async scan() {\n    const extension = extname(this.filename);\n\n    if (this.filename.match(constants.ALREADY_SIGNED_REGEX)) {\n      this.linterMessages.push(\n        Object.assign({}, messages.ALREADY_SIGNED, {\n          type: constants.VALIDATION_WARNING,\n          file: this.filename,\n        })\n      );\n    } else if (this.filename.match(constants.HIDDEN_FILE_REGEX)) {\n      this.linterMessages.push(\n        Object.assign({}, messages.HIDDEN_FILE, {\n          type: constants.VALIDATION_WARNING,\n          file: this.filename,\n        })\n      );\n    } else if (this.filename.match(constants.FLAGGED_FILE_REGEX)) {\n      this.linterMessages.push(\n        Object.assign({}, messages.FLAGGED_FILE, {\n          type: constants.VALIDATION_WARNING,\n          file: this.filename,\n        })\n      );\n    } else if (constants.FLAGGED_FILE_EXTENSIONS.includes(extension)) {\n      this.linterMessages.push(\n        Object.assign({}, messages.FLAGGED_FILE_EXTENSION, {\n          type: constants.VALIDATION_WARNING,\n          file: this.filename,\n        })\n      );\n    } else {\n      throw new Error(`Filename didn't match a regex: ${this.filename}.`);\n    }\n    return {\n      linterMessages: this.linterMessages,\n      scannedFiles: this.scannedFiles,\n    };\n  }\n}\n","import cheerio from 'cheerio';\n\nimport BaseScanner from 'scanners/base';\nimport * as rules from 'rules/html';\n\n\nexport default class HTMLScanner extends BaseScanner {\n  _defaultRules = rules;\n\n  static get scannerName() {\n    return 'html';\n  }\n\n  async _getContents() {\n    const htmlDoc = cheerio.load(this.contents);\n    return htmlDoc;\n  }\n}\n","module.exports = require(\"cheerio\");","export * from './warn-on-inline';\nexport * from './warn-on-remote-script';\n","import { VALIDATION_WARNING } from 'const';\nimport * as messages from 'messages';\n\n\nexport async function warnOnInline($, filename) {\n  const linterMessages = [];\n  $('script').each((i, element) => {\n    if ($(element).attr('src') === undefined &&\n        ($(element).attr('type') === undefined ||\n         $(element).attr('type') === 'text/javascript')) {\n      linterMessages.push(\n        Object.assign({}, messages.INLINE_SCRIPT, {\n          /* This could occur in any HTML file, so let's make it\n            * a warning in case they've included any other file.\n            */\n          type: VALIDATION_WARNING,\n          file: filename,\n        }));\n    }\n  });\n\n  return linterMessages;\n}\n","import { VALIDATION_WARNING } from 'const';\nimport { isStrictRelativeUrl } from 'schema/formats';\nimport * as messages from 'messages';\n\n\nexport async function warnOnRemoteScript($, filename) {\n  const linterMessages = [];\n\n  $('script').each((i, element) => {\n    const src = $(element).attr('src');\n\n    if (src !== undefined && !isStrictRelativeUrl(src)) {\n      linterMessages.push(\n        Object.assign({}, messages.REMOTE_SCRIPT, {\n          type: VALIDATION_WARNING,\n          file: filename,\n        })\n      );\n    }\n  });\n\n  return linterMessages;\n}\n","import ESLint from 'eslint';\nimport { oneLine } from 'common-tags';\nimport espree from 'espree';\nimport vk from 'eslint-visitor-keys';\n\nimport {\n  ESLINT_RULE_MAPPING,\n  ESLINT_TYPES,\n} from 'const';\nimport * as messages from 'messages';\nimport { rules } from 'rules/javascript';\nimport { ensureFilenameExists } from 'utils';\n\n\nconst ECMA_VERSION = 2019;\n\n\nexport function excludeRules(excludeFrom = {}, excludeWhat = []) {\n  return Object.keys(excludeFrom).reduce((result, ruleName) => {\n    if (excludeWhat.includes(ruleName)) return result;\n    return {\n      ...result,\n      [ruleName]: excludeFrom[ruleName],\n    };\n  }, {});\n}\n\nexport default class JavaScriptScanner {\n  _defaultRules = rules;\n  disabledRules = [];\n\n  constructor(code, filename, options = {}) {\n    this.code = code;\n    this.filename = filename;\n    this.options = options;\n    this.linterMessages = [];\n    this.scannedFiles = [];\n    this._rulesProcessed = 0;\n    this.disabledRules = typeof options.disabledRules === 'string' ? options.disabledRules.split(',')\n      .map((rule) => rule.trim())\n      .filter((notEmptyRule) => notEmptyRule) : [];\n    ensureFilenameExists(this.filename);\n  }\n\n  static get fileResultType() {\n    return 'string';\n  }\n\n  static get scannerName() {\n    return 'javascript';\n  }\n\n  async scan(_ESLint = ESLint, {\n    _rules = this._defaultRules,\n    _ruleMapping = ESLINT_RULE_MAPPING,\n    _messages = messages,\n  } = {}) {\n    this._ESLint = ESLint;\n    this.sourceType = this.detectSourceType(this.filename);\n\n    const configDefaults = {\n      baseConfig: {\n        env: {\n          es6: true,\n          webextension: true,\n          browser: true,\n        },\n        settings: {\n          addonMetadata: this.options.addonMetadata,\n          existingFiles: this.options.existingFiles,\n        },\n      },\n      // It's the default but also shouldn't change since we're using\n      // espree to parse javascript files below manually to figure out\n      // if they're modules or not\n      parser: 'espree',\n      parserOptions: {\n        ecmaVersion: ECMA_VERSION,\n        sourceType: this.sourceType,\n      },\n      rules: _ruleMapping,\n      plugins: ['no-unsafe-innerhtml'],\n      allowInlineConfig: false,\n\n      // Disable ignore-mode and overwrite eslint default ignore patterns\n      // so an add-on's bower and node module folders are included in\n      // the scan. See: https://github.com/mozilla/addons-linter/issues/1288\n      ignore: false,\n      patterns: ['!bower_components/*', '!node_modules/*'],\n\n      filename: this.filename,\n\n      // Avoid loading the addons-linter .eslintrc file\n      useEslintrc: false,\n    };\n\n    const cli = new _ESLint.CLIEngine(configDefaults);\n\n    const rulesAfterExclusion = excludeRules(_rules, this.disabledRules);\n    Object.keys(rulesAfterExclusion).forEach((name) => {\n      this._rulesProcessed++;\n      cli.linter.defineRule(name, rulesAfterExclusion[name]);\n    });\n\n    // Parse and lint the JavaScript code\n    const report = cli.executeOnText(this.code, this.filename, true);\n\n    // eslint prepends the filename with the current working directory,\n    // strip that out.\n    this.scannedFiles.push(this.filename);\n\n    report.results.forEach((result) => {\n      result.messages.forEach((message) => {\n        // Fatal error messages (like SyntaxErrors) are a bit different, we\n        // need to handle them specially.\n        if (message.fatal === true) {\n          // eslint-disable-next-line no-param-reassign\n          message.message = _messages.JS_SYNTAX_ERROR.code;\n        }\n\n        if (typeof message.message === 'undefined') {\n          throw new Error(\n            oneLine`JS rules must pass a valid message as\n            the second argument to context.report()`);\n        }\n\n        // Fallback to looking up the message object by the message\n        let code = message.message;\n        let shortDescription;\n        let description;\n\n        // Support 3rd party eslint rules that don't have our internal\n        // message structure and allow us to optionally overwrite\n        // their `message` and `description`.\n        if (Object.prototype.hasOwnProperty.call(_messages, code)) {\n          ({\n            message: shortDescription,\n            description,\n          } = _messages[code]);\n        } else if (Object.prototype.hasOwnProperty.call(\n          messages.ESLINT_OVERWRITE_MESSAGE, message.ruleId)) {\n          const overwrites = messages.ESLINT_OVERWRITE_MESSAGE[message.ruleId];\n          shortDescription = overwrites.message || message.message;\n          description = overwrites.description || message.description;\n\n          if (overwrites.code) {\n            ({ code } = overwrites);\n          }\n        } else {\n          shortDescription = code;\n          description = null;\n        }\n\n        this.linterMessages.push({\n          code,\n          column: message.column,\n          description,\n          file: this.filename,\n          line: message.line,\n          message: shortDescription,\n          sourceCode: message.source,\n          type: ESLINT_TYPES[message.severity],\n        });\n      });\n    });\n\n    return {\n      linterMessages: this.linterMessages,\n      scannedFiles: this.scannedFiles,\n    };\n  }\n\n  _getSourceType(node) {\n    const possibleImportExportTypes = [\n      'ExportAllDeclaration', 'ExportDefaultDeclaration',\n      'ExportNamedDeclaration', 'ExportSpecifier',\n      'ImportDeclaration', 'ImportDefaultSpecifier',\n      'ImportNamespaceSpecifier', 'ImportSpecifier',\n    ];\n\n    if (possibleImportExportTypes.includes(node.type)) {\n      return 'module';\n    }\n\n    const keys = vk.KEYS[node.type];\n\n    if (keys.length >= 1) {\n      for (let i = 0; i < keys.length; ++i) {\n        const child = node[keys[i]];\n\n        if (Array.isArray(child)) {\n          for (let j = 0; j < child.length; ++j) {\n            if (this._getSourceType(child[j]) === 'module') {\n              return 'module';\n            }\n          }\n        } else {\n          return this._getSourceType(child);\n        }\n      }\n    }\n\n    return 'script';\n  }\n\n  /*\n    Analyze the source-code by by parsing the source code manually and\n    check for import/export syntax errors.\n\n    This returns `script` or `module`.\n  */\n  detectSourceType(filename) {\n    // Default options taken from eslint/lib/linter:parse\n    const parserOptions = {\n      filePath: filename,\n      sourceType: 'module',\n      ecmaVersion: ECMA_VERSION,\n    };\n\n    let sourceType = 'module';\n\n    try {\n      const ast = espree.parse(this.code, parserOptions);\n      sourceType = this._getSourceType(ast);\n    } catch (exc) {\n      sourceType = 'script';\n    }\n\n    return sourceType;\n  }\n}\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _defineProperty = require(\"../core-js/object/define-property\");\n\nvar _defineProperty2 = _interopRequireDefault(_defineProperty);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function (obj, key, value) {\n  if (key in obj) {\n    (0, _defineProperty2.default)(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n};","module.exports = require(\"eslint\");","module.exports = require(\"espree\");","module.exports = require(\"eslint-visitor-keys\");","// We are using commonjs style imports here to avoid the need to import\n// and correctly export again so that it's only one line to add.\n/* eslint-disable global-require */\n\nmodule.exports = {\n  rules: {\n    'deprecated-entities': require('./deprecated-entities').default,\n    'event-listener-fourth': require('./event-listener-fourth').default,\n    'global-require-arg': require('./global-require-arg').default,\n    'opendialog-nonlit-uri': require('./opendialog-nonlit-uri').default,\n    'opendialog-remote-uri': require('./opendialog-remote-uri').default,\n    'webextension-api': require('./webextension-api').default,\n    'content-scripts-file-absent': require('./content-scripts-file-absent').default,\n    'webextension-unsupported-api':\n      require('./webextension-unsupported-api').default,\n  },\n};\n","import { NO_DOCUMENT_WRITE } from 'messages';\nimport { getNodeReference } from 'utils';\n\nexport const DEPRECATED_ENTITIES = [\n  {\n    error: NO_DOCUMENT_WRITE,\n    object: 'document',\n    property: 'write',\n  },\n];\n\n\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      CallExpression(node) {\n        const referenceNode = getNodeReference(context, node.callee);\n        // We're only looking for calls that look like `foo.bar()`.\n        if (typeof referenceNode.object !== 'undefined' &&\n            referenceNode.property.type === 'Identifier' &&\n            referenceNode.object.type === 'Identifier') {\n          const referenceObject = getNodeReference(context, referenceNode.object);\n\n          for (let i = 0; i < DEPRECATED_ENTITIES.length; i++) {\n            const entity = DEPRECATED_ENTITIES[i];\n            // Check to see if the node matches a deprecated entity.\n            if (referenceObject.name === entity.object &&\n                referenceNode.property.name === entity.property) {\n              return context.report(node, entity.error.code);\n            }\n          }\n        }\n      },\n    };\n  },\n};\n","import { EVENT_LISTENER_FOURTH } from 'messages/javascript';\nimport { getNodeReference } from 'utils';\n\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      CallExpression(node) {\n        let referenceNode = getNodeReference(context, node.callee);\n        if (typeof referenceNode.property !== 'undefined' &&\n            referenceNode.property.type === 'Identifier' &&\n            referenceNode.property.name === 'addEventListener') {\n          if (node.arguments.length > 3) {\n            const wantsUntrusted = node.arguments[3];\n            if (wantsUntrusted.type === 'Literal') {\n              if (wantsUntrusted.value) {\n                return context.report({\n                  node,\n                  message: EVENT_LISTENER_FOURTH.code,\n                });\n              }\n            } else if (wantsUntrusted.type === 'Identifier') {\n              referenceNode = getNodeReference(context, wantsUntrusted);\n              if (referenceNode.value) {\n                return context.report({\n                  node,\n                  message: EVENT_LISTENER_FOURTH.code,\n                });\n              }\n            }\n          }\n        }\n      },\n    };\n  },\n};\n","import { UNEXPECTED_GLOGAL_ARG } from 'messages';\nimport { getVariable } from 'utils';\n\n/*\n * This rule will detect a global passed to `require()` as the first arg\n *\n */\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      CallExpression(node) {\n        if (node.callee.name === 'require' &&\n            node.arguments &&\n            node.arguments.length) {\n          const firstArg = node.arguments[0];\n          if (firstArg.type === 'Identifier') {\n            const pathVar = getVariable(context, firstArg.name);\n            if (typeof pathVar === 'undefined') {\n              // We infer this is probably a global.\n              return context.report(node, UNEXPECTED_GLOGAL_ARG.code);\n            }\n          }\n        }\n      },\n    };\n  },\n};\n","import { OPENDIALOG_NONLIT_URI } from 'messages';\n\n\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      CallExpression(node) {\n        if (node.callee.type === 'MemberExpression' &&\n            node.callee.property.type === 'Identifier' &&\n            node.callee.property.name === 'openDialog') {\n          if (node.arguments.length) {\n            const uri = node.arguments[0];\n            if (uri.type !== 'Literal') {\n              return context.report(node, OPENDIALOG_NONLIT_URI.code);\n            }\n          }\n        }\n      },\n    };\n  },\n};\n","import { isLocalUrl } from 'utils';\nimport { OPENDIALOG_REMOTE_URI } from 'messages';\n\n\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      CallExpression(node) {\n        if (node.callee.type === 'MemberExpression' &&\n            node.callee.property.type === 'Identifier' &&\n            node.callee.property.name === 'openDialog') {\n          if (node.arguments.length) {\n            const uri = node.arguments[0];\n            if (uri.type === 'Literal' &&\n                isLocalUrl(uri.value) === false) {\n              return context.report(node, OPENDIALOG_REMOTE_URI.code);\n            }\n          }\n        }\n      },\n    };\n  },\n};\n","import { isDeprecatedApi, isTemporaryApi } from 'schema/browser-apis';\nimport { apiToMessage, isBrowserNamespace } from 'utils';\n\nexport default {\n  create(context) {\n    return {\n      // eslint-disable-next-line consistent-return\n      MemberExpression(node) {\n        if (node.object.object && isBrowserNamespace(node.object.object.name)) {\n          const namespace = node.object.property.name;\n          const property = node.property.name;\n          const api = `${namespace}.${property}`;\n\n          if (isDeprecatedApi(namespace, property)) {\n            return context.report(node, apiToMessage(api));\n          }\n\n          if (!context.settings.addonMetadata.id &&\n              isTemporaryApi(namespace, property)) {\n            return context.report(node, apiToMessage(api));\n          }\n        }\n      },\n    };\n  },\n};\n","import { DEPRECATED_APIS, TEMPORARY_APIS } from 'const';\nimport schemaList from 'schema/imported';\n\nconst schemaArrayNames = ['functions', 'events'];\nconst schemaObjectNames = ['types', 'properties'];\nconst schemas = schemaList.reduce((all, current) => ({\n  ...all,\n  [current.id]: current,\n}), {});\n\nexport function isDeprecatedApi(namespace, property) {\n  return DEPRECATED_APIS.includes(`${namespace}.${property}`);\n}\n\nexport function isTemporaryApi(namespace, property) {\n  return TEMPORARY_APIS.includes(`${namespace}.${property}`);\n}\n\nfunction hasObjectProperty(schema, property) {\n  return schemaObjectNames.some((schemaProperty) => {\n    return schema[schemaProperty] && property in schema[schemaProperty];\n  });\n}\n\nfunction hasArrayProperty(schema, property) {\n  return schemaArrayNames.some((schemaProperty) => {\n    const namespaceProperties = schema[schemaProperty];\n    return Array.isArray(namespaceProperties) &&\n      namespaceProperties.some((schemaItem) => {\n        return schemaItem.name === property;\n      });\n  });\n}\n\nexport function hasBrowserApi(namespace, property) {\n  const schema = schemas[namespace];\n  // We \"have\" the API if it's deprecated or temporary so\n  // we don't double warn.\n  if (isDeprecatedApi(namespace, property)\n    || isTemporaryApi(namespace, property)) {\n    return true;\n  }\n  if (!schema) {\n    return false;\n  }\n  return hasObjectProperty(schema, property)\n    || hasArrayProperty(schema, property);\n}\n","import * as path from 'path';\n\nimport { isBrowserNamespace } from 'utils';\nimport { CONTENT_SCRIPT_NOT_FOUND, CONTENT_SCRIPT_EMPTY } from 'messages/javascript';\n\nexport default {\n  create(context) {\n    const existingFiles = Object.keys(\n      context.settings.existingFiles || {}\n    ).map((fileName) => {\n      return path.resolve('/', fileName);\n    });\n\n    return {\n      MemberExpression(node) {\n        if (!node.object.object || !isBrowserNamespace(node.object.object.name)) {\n          // Early return when it's not our case.\n          return;\n        }\n        const namespace = node.object.property.name;\n        const property = node.property.name;\n        // Namespace should be tabs function should be executeScript and it should be a call.\n        // I.E. browser.tabs.executeScript().\n        if (namespace !== 'tabs' || property !== 'executeScript' || node.parent.type !== 'CallExpression') {\n          return;\n        }\n        node.parent.arguments.forEach((arg) => {\n          // Skipping the argument if it's not an object.\n          if (arg.type !== 'ObjectExpression') {\n            return;\n          }\n          const fileProperty = arg.properties.find((prop) => prop.key && prop.key.name === 'file');\n          const fileValue = fileProperty && fileProperty.value && fileProperty.value.value;\n          // Skipping the argument if there is no file property, or value is not a static string.\n          if (!fileProperty || fileProperty.value.type !== 'Literal' || typeof fileValue !== 'string') {\n            return;\n          }\n          // If filename is empty, report an issue.\n          if (fileValue === '') {\n            context.report({\n              loc: fileProperty.value.loc,\n              message: CONTENT_SCRIPT_EMPTY.code,\n            });\n            return;\n          }\n\n          // We can't reliably validate relative file names because they\n          // are resolved as relative to the current page url on Firefox\n          // and the rule itself doesn't know the path of the html file (or\n          // files) where the js file is going to be loaded, and so we chose\n          // to validate only the absolute file paths to avoid false positive.\n          // (Also note that Firefox and Chrome behave differently when\n          // resolving relative content script paths used in a tabs.executeScript API call).\n          if (!path.isAbsolute(fileValue)) {\n            return;\n          }\n\n          const normalizedName = path.resolve('/', path.normalize(fileValue));\n\n          // If file exists then we are good.\n          if (existingFiles.includes(normalizedName)) {\n            return;\n          }\n\n          // File not exists report an issue.\n          context.report({\n            loc: fileProperty.value.loc,\n            message: CONTENT_SCRIPT_NOT_FOUND.code,\n          });\n        });\n      },\n    };\n  },\n};\n","import { UNSUPPORTED_API } from 'messages/javascript';\nimport { hasBrowserApi } from 'schema/browser-apis';\nimport { isBrowserNamespace } from 'utils';\n\nexport default {\n  create(context) {\n    return {\n      MemberExpression(node) {\n        if (!node.computed &&\n            node.object.object &&\n            isBrowserNamespace(node.object.object.name)) {\n          const namespace = node.object.property.name;\n          const property = node.property.name;\n          const api = `${namespace}.${property}`;\n\n          if (!hasBrowserApi(namespace, property)) {\n            context.report(node, UNSUPPORTED_API.messageFormat, { api });\n          }\n        }\n      },\n    };\n  },\n};\n","import JSONParser from 'parsers/json';\nimport LocaleMessagesJSONParser from 'parsers/locale-messagesjson';\nimport BaseScanner from 'scanners/base';\nimport { MESSAGES_JSON, LOCALES_DIRECTORY } from 'const';\n\n\nexport default class JSONScanner extends BaseScanner {\n  static get scannerName() {\n    return 'json';\n  }\n\n  async _getContents() {\n    return this.contents;\n  }\n\n  async scan() {\n    const json = await this.getContents();\n\n    if (this.filename.endsWith(MESSAGES_JSON) && this.filename.startsWith(LOCALES_DIRECTORY)) {\n      const localeMessagesJSONParser = new LocaleMessagesJSONParser(\n        json,\n        this.options.collector,\n        { filename: this.filename }\n      );\n      localeMessagesJSONParser.parse();\n    } else {\n      const jsonParser = new JSONParser(\n        json,\n        this.options.collector,\n        { filename: this.filename }\n      );\n      jsonParser.parse();\n    }\n\n    return {\n      linterMessages: [],\n      scannedFiles: [this.filename],\n    };\n  }\n}\n","import RJSON from 'relaxed-json';\n\nimport * as messages from 'messages';\nimport JSONParser from 'parsers/json';\nimport { MESSAGES_JSON, MESSAGE_PLACEHOLDER_REGEXP } from 'const';\nimport { validateLocaleMessages } from 'schema/validator';\nimport log from 'logger';\n\nexport default class LocaleMessagesJSONParser extends JSONParser {\n  constructor(jsonString, collector, {\n    filename = MESSAGES_JSON, RelaxedJSON = RJSON,\n  } = {}) {\n    super(jsonString, collector, { filename });\n    this.relaxedJSON = RelaxedJSON;\n  }\n\n  parse() {\n    super.parse(this.relaxedJSON);\n    this.lowercasePlaceholders = {};\n\n    // Set up some defaults in case parsing fails.\n    if (typeof this.parsedJSON === 'undefined' || this.isValid === false) {\n      this.parsedJSON = {};\n    } else {\n      // We've parsed the JSON; now we can validate the manifest.\n      this._validate();\n    }\n  }\n\n  errorLookup(error) {\n    // This is the default message.\n    let baseObject = messages.JSON_INVALID;\n\n    const overrides = {\n      dataPath: error.dataPath,\n      line: error.line,\n      file: this.filename,\n    };\n\n    // Missing the message property.\n    if (error.keyword === 'required') {\n      if (error.params.missingProperty === 'message') {\n        baseObject = messages.NO_MESSAGE;\n      } else if (error.params.missingProperty === 'content') {\n        baseObject = messages.NO_PLACEHOLDER_CONTENT;\n      }\n    } else if (error.keyword === 'additionalProperties') {\n      if (error.schemaPath === '#/properties/placeholders/additionalProperties') {\n        baseObject = messages.INVALID_PLACEHOLDER_NAME;\n      }\n    }\n\n    return Object.assign({}, baseObject, overrides);\n  }\n\n  getLowercasePlaceholders(message) {\n    const messageObj = this.parsedJSON[message];\n    if (!Object.prototype.hasOwnProperty.call(messageObj, 'placeholders')) {\n      return undefined;\n    }\n    if (!Object.prototype.hasOwnProperty.call(this.lowercasePlaceholders, message)) {\n      this.lowercasePlaceholders[message] = Object.keys(messageObj.placeholders)\n        .map((placeholder) => placeholder.toLowerCase());\n    }\n    return this.lowercasePlaceholders[message];\n  }\n\n  hasPlaceholder(message, placeholder) {\n    const messageObj = this.parsedJSON[message];\n    return Object.prototype.hasOwnProperty.call(messageObj, 'placeholders') &&\n      this.getLowercasePlaceholders(message).includes(placeholder.toLowerCase());\n  }\n\n  _validate() {\n    this.isValid = validateLocaleMessages(this.parsedJSON);\n    if (!this.isValid) {\n      log.debug('Schema Validation messages', validateLocaleMessages.errors);\n\n      validateLocaleMessages.errors.forEach((error) => {\n        const message = this.errorLookup(error);\n        this.collector.addError(message);\n      });\n    }\n\n    const regexp = new RegExp(MESSAGE_PLACEHOLDER_REGEXP, 'ig');\n    const visitedLowercaseMessages = [];\n    Object.keys(this.parsedJSON).forEach((message) => {\n      if (!visitedLowercaseMessages.includes(message.toLowerCase())) {\n        visitedLowercaseMessages.push(message.toLowerCase());\n      } else {\n        this.collector.addError(Object.assign({}, messages.JSON_DUPLICATE_KEY, {\n          file: this.filename,\n          description: `Case-insensitive duplicate message name: ${message} found in JSON`,\n          dataPath: `/${message}`,\n        }));\n        this.isValid = false;\n      }\n\n      if (message.startsWith('@@')) {\n        this.collector.addWarning(Object.assign({\n          file: this.filename,\n          dataPath: `/${message}`,\n        }, messages.PREDEFINED_MESSAGE_NAME));\n      }\n\n      const messageContent = this.parsedJSON[message].message;\n      let matches = regexp.exec(messageContent);\n      while (matches !== null) {\n        if (!this.hasPlaceholder(message, matches[1])) {\n          this.collector.addWarning(Object.assign({\n            file: this.filename,\n            dataPath: `/${message}/placeholders/${matches[1]}`,\n          }, messages.MISSING_PLACEHOLDER));\n        }\n        matches = regexp.exec(messageContent);\n      }\n\n      if (Object.prototype.hasOwnProperty.call(this.parsedJSON[message], 'placeholders')) {\n        const visitedLowercasePlaceholders = [];\n        Object.keys(this.parsedJSON[message].placeholders).forEach((placeholder) => {\n          if (!visitedLowercasePlaceholders.includes(placeholder.toLowerCase())) {\n            visitedLowercasePlaceholders.push(placeholder.toLowerCase());\n          } else {\n            this.collector.addError(Object.assign({}, messages.JSON_DUPLICATE_KEY, {\n              file: this.filename,\n              description: `Case-insensitive duplicate placeholder name: ${placeholder} found in JSON`,\n              dataPath: `/${message}/placeholders/${placeholder}`,\n            }));\n            this.isValid = false;\n          }\n        });\n      }\n\n      // Reset the regexp\n      regexp.lastIndex = 0;\n    });\n  }\n}\n","\"use strict\";\n\nexports.__esModule = true;\n\nvar _getPrototypeOf = require(\"../core-js/object/get-prototype-of\");\n\nvar _getPrototypeOf2 = _interopRequireDefault(_getPrototypeOf);\n\nvar _getOwnPropertyDescriptor = require(\"../core-js/object/get-own-property-descriptor\");\n\nvar _getOwnPropertyDescriptor2 = _interopRequireDefault(_getOwnPropertyDescriptor);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = (0, _getOwnPropertyDescriptor2.default)(object, property);\n\n  if (desc === undefined) {\n    var parent = (0, _getPrototypeOf2.default)(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};","module.exports = { \"default\": require(\"core-js/library/fn/object/get-prototype-of\"), __esModule: true };","require('../../modules/es6.object.get-prototype-of');\nmodule.exports = require('../../modules/_core').Object.getPrototypeOf;\n","// 19.1.2.9 Object.getPrototypeOf(O)\nvar toObject = require('./_to-object');\nvar $getPrototypeOf = require('./_object-gpo');\n\nrequire('./_object-sap')('getPrototypeOf', function () {\n  return function getPrototypeOf(it) {\n    return $getPrototypeOf(toObject(it));\n  };\n});\n","module.exports = { \"default\": require(\"core-js/library/fn/object/get-own-property-descriptor\"), __esModule: true };","require('../../modules/es6.object.get-own-property-descriptor');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function getOwnPropertyDescriptor(it, key) {\n  return $Object.getOwnPropertyDescriptor(it, key);\n};\n","// 19.1.2.6 Object.getOwnPropertyDescriptor(O, P)\nvar toIObject = require('./_to-iobject');\nvar $getOwnPropertyDescriptor = require('./_object-gopd').f;\n\nrequire('./_object-sap')('getOwnPropertyDescriptor', function () {\n  return function getOwnPropertyDescriptor(it, key) {\n    return $getOwnPropertyDescriptor(toIObject(it), key);\n  };\n});\n","import { extname } from 'path';\n\nimport FluentParser from 'parsers/fluent';\nimport PropertiesParser from 'parsers/properties';\nimport DoctypeParser from 'parsers/doctype';\nimport BaseScanner from 'scanners/base';\n\n\nexport default class LangpackScanner extends BaseScanner {\n  static get scannerName() {\n    return 'langpack';\n  }\n\n  async _getContents() {\n    return this.contents;\n  }\n\n  async scan() {\n    const data = await this.getContents();\n\n    const ext = extname(this.filename);\n    let ParserClass = null;\n\n    if (ext === '.properties') {\n      ParserClass = PropertiesParser;\n    } else if (ext === '.ftl') {\n      ParserClass = FluentParser;\n    } else if (ext === '.dtd') {\n      ParserClass = DoctypeParser;\n    } else {\n      throw new Error('Unsupported file type');\n    }\n\n    const parser = new ParserClass(data, this.options.collector, {\n      filename: this.filename,\n    });\n\n    parser.parse();\n\n    // The parsers report directly to the collector so we don't have to\n    // forward them anymore.\n    return {\n      linterMessages: [],\n      scannedFiles: [this.filename],\n    };\n  }\n}\n","import {\n  FluentParser as FluentSyntaxParser,\n  lineOffset,\n  columnOffset,\n} from 'fluent-syntax';\n\nimport * as messages from 'messages';\n\n\nexport default class FluentParser {\n  /*\n   * Parse FTL files (https://projectfluent.io)\n   * We are using FTL files in our language packs to specify translations.\n   *\n   */\n\n  constructor(source, collector, { filename = null } = {}) {\n    this._sourceString = source;\n\n    this.collector = collector;\n    this.filename = filename;\n    this.isValid = null;\n  }\n\n  parse() {\n    const parser = new FluentSyntaxParser();\n    const resource = parser.parse(this._sourceString);\n\n    this.parsedData = {};\n\n    resource.body.forEach((entry) => {\n      if (entry.type === 'Junk') {\n        this.isValid = false;\n\n        // There is always just one annotation for a junk entry\n        const annotation = entry.annotations[0];\n        const matchedLine = lineOffset(this._sourceString, annotation.span.end) + 1;\n        const matchedColumn = columnOffset(this._sourceString, annotation.span.end);\n\n        const errorData = {\n          ...messages.FLUENT_INVALID,\n          file: this.filename,\n          description: entry.annotations[0].message,\n          column: matchedColumn,\n          line: matchedLine,\n        };\n\n        this.collector.addError(errorData);\n      } else if (entry.id !== undefined) {\n        this.parsedData[entry.id.name] = entry;\n      }\n    });\n\n    if (this.isValid !== false) {\n      this.isValid = true;\n    }\n  }\n}\n","module.exports = require(\"fluent-syntax\");","\nexport default class PropertiesParser {\n  /*\n   * Parser for .properties files.\n   * We are using .properties files in our language packs to specify\n   * translations.\n   *\n   * See http://bit.ly/2xTdYgY (Properties File Format Specification) for\n   * more details.\n   */\n\n  constructor(propertiesString, collector, { filename = null } = {}) {\n    this._propertiesString = propertiesString;\n\n    this.collector = collector;\n    this.filename = filename;\n    this.isValid = null;\n  }\n\n  parse() {\n    this.parsedData = {};\n\n    const lines = this._propertiesString.split('\\n');\n\n    let lineBuffer = null;\n\n    lines.forEach((line) => {\n      const cleanedLine = line.trim();\n\n      // Skip empty lines and comments\n      if (!cleanedLine) {\n        return;\n      } else if (cleanedLine.startsWith('#')) {\n        return;\n      }\n\n      // Line wraps multiple lines\n      if (cleanedLine.indexOf('=') === -1) {\n        if (lineBuffer) {\n          lineBuffer[1] += cleanedLine;\n        }\n      } else {\n        if (lineBuffer) {\n          // This line terminates a wrapped line\n          this.parsedData[lineBuffer[0].trim()] = lineBuffer[1].trim();\n        }\n\n        lineBuffer = cleanedLine.split('=', 2);\n      }\n    });\n\n    // Handle any left-over wrapped line data\n    if (lineBuffer) {\n      this.parsedData[lineBuffer[0].trim()] = lineBuffer[1].trim();\n    }\n\n    this.isValid = true;\n  }\n}\n","const ENTITY_RE = /<!ENTITY\\s+([\\w.]*)\\s+(\"[^\"]*\"|'[^']*')\\s*>/;\n\n\nexport default class DoctypeParser {\n  /*\n   * Minimalistic parser for DTD files.\n   * We are using DTD files in our language packs to specify translations.\n   *\n   * It doesn't do any proper XML parsing because our DTD files are only\n   * using a very small subset of what's needed so a simple regular expression\n   * works just fine.\n   *\n   * The parsing code is largely inspired by scattered code from mozilla-central.\n   */\n\n  constructor(dtdString, collector, { filename = null } = {}) {\n    this._dtdString = dtdString;\n    this.collector = collector;\n    this.filename = filename;\n    this.isValid = null;\n  }\n\n  parse() {\n    const entities = this._dtdString.match(new RegExp(ENTITY_RE, 'gi'));\n    this.parsedData = {};\n\n    if (!entities) {\n      // Some files have no entities defined. Mark this as valid since we\n      // expect this unfortunately...\n      this.isValid = true;\n      return;\n    }\n\n    entities.forEach((entity) => {\n      const [, key, value] = entity.match(new RegExp(ENTITY_RE, 'i'));\n\n      // strip enclosing quotation marks\n      const normalizedValue = value.slice(1, -1);\n\n      this.parsedData[key] = normalizedValue;\n    });\n\n    this.isValid = true;\n  }\n}\n","export * from 'io/crx';\nexport * from 'io/directory';\nexport * from 'io/xpi';\n","import fs from 'fs';\n\nimport parseCRX from 'crx-parser';\nimport yauzl from 'yauzl';\n\nimport log from 'logger';\n\nimport { Xpi } from './xpi';\n\n\n/*\n * A CRX file is just a ZIP file (eg an XPI) with some extra header\n * information. So we handle opening the file with a CRX parser, then treat\n * it like an XPI after that.\n *\n */\nexport class Crx extends Xpi {\n  constructor(filePath, zipLib = yauzl, _parseCRX = parseCRX, _fs = fs) {\n    super(filePath, zipLib);\n    this.fs = _fs;\n    this.parseCRX = _parseCRX;\n  }\n\n  open() {\n    return new Promise((resolve, reject) => {\n      /* eslint-disable consistent-return, no-shadow */\n      // First, read the file manually, as we need to pass the whole thing\n      // to crx-parser.\n      this.fs.readFile(this.path, (err, buffer) => {\n        if (err) {\n          return reject(err);\n        }\n        // Parse out the CRX header data from the actual ZIP contents.\n        this.parseCRX(buffer, (err, data) => {\n          if (err) {\n            return reject(err);\n          }\n\n          log.debug('Obtained zip data from CRX file', data);\n          // Finally we can read in the zip data as a buffer into yauzl.\n          this.zipLib.fromBuffer(data.body, (err, zipFile) => {\n            if (err) {\n              return reject(err);\n            }\n\n            resolve(zipFile);\n          });\n        });\n      });\n    });\n  }\n\n  async getFiles(_onEventsSubscribed) {\n    // If we have already processed the file and have data\n    // on this instance return that.\n    if (Object.keys(this.files).length) {\n      return this.files;\n    }\n\n    const zipfile = await this.open();\n\n    // We use the 'end' event here because we're reading the CRX in\n    // from a buffer (because we have to unpack the header info from it\n    // first). The 'close' event is never fired when using yauzl's\n    // `fromBuffer()` method.\n    return new Promise((resolve, reject) => {\n      zipfile.on('entry', (entry) => {\n        this.handleEntry(entry, reject);\n      });\n\n      zipfile.on('end', () => {\n        resolve(this.files);\n      });\n\n      if (_onEventsSubscribed) {\n        // Run optional callback when we know the event handlers\n        // have been inited. Useful for testing.\n        if (typeof _onEventsSubscribed === 'function') {\n          Promise.resolve().then(() => _onEventsSubscribed());\n        }\n      }\n    });\n  }\n}\n","module.exports = require(\"crx-parser\");","module.exports = require(\"yauzl\");","import yauzl from 'yauzl';\nimport stripBomStream from 'strip-bom-stream';\nimport firstChunkStream from 'first-chunk-stream';\nimport { oneLine } from 'common-tags';\n\nimport { IOBase } from 'io/base';\nimport log from 'logger';\n\n\n/*\n * Simple Promise wrapper for the Yauzl unzipping lib to unpack add-on .xpis.\n * Note: We're using the autoclose feature of yauzl as a result every operation\n * will open the zip, do something and then close it implicitly.\n * This makes the API easy to use and the consumer doesn't need to remember to\n * close the zipfile.\n *\n */\n\nexport class Xpi extends IOBase {\n  constructor(filePath, zipLib = yauzl) {\n    super(filePath);\n    this.zipLib = zipLib;\n  }\n\n  open() {\n    return new Promise((resolve, reject) => {\n      this.zipLib.open(this.path, (err, zipfile) => {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(zipfile);\n      });\n    });\n  }\n\n  handleEntry(entry, reject) {\n    if (/\\/$/.test(entry.fileName)) {\n      return;\n    }\n    if (!this.shouldScanFile(entry.fileName)) {\n      log.debug(`Skipping file: ${entry.fileName}`);\n      return;\n    }\n    if (this.entries.includes(entry.fileName)) {\n      log.info('Found duplicate file entry: \"%s\" in package', entry.fileName);\n      reject(new Error(oneLine`DuplicateZipEntry: Entry\n        \"${entry.fileName}\" has already been seen`));\n      return;\n    }\n    this.entries.push(entry.fileName);\n    this.files[entry.fileName] = entry;\n  }\n\n  async getFiles(_onEventsSubscribed) {\n    // If we have already processed the file and have data\n    // on this instance return that.\n    if (Object.keys(this.files).length) {\n      const wantedFiles = {};\n      Object.keys(this.files).forEach((fileName) => {\n        if (this.shouldScanFile(fileName)) {\n          wantedFiles[fileName] = this.files[fileName];\n        } else {\n          log.debug(`Skipping cached file: ${fileName}`);\n        }\n      });\n      return wantedFiles;\n    }\n\n    const zipfile = await this.open();\n\n    return new Promise((resolve, reject) => {\n      zipfile.on('entry', (entry) => {\n        this.handleEntry(entry, reject);\n      });\n\n      // When the last entry has been processed\n      // and the fd is closed resolve the promise.\n      // Note: we cannot use 'end' here as 'end' is fired\n      // after the last entry event is emitted and streams\n      // may still be being read with openReadStream.\n      zipfile.on('close', () => {\n        resolve(this.files);\n      });\n\n      if (_onEventsSubscribed) {\n        // Run optional callback when we know the event handlers\n        // have been inited. Useful for testing.\n        if (typeof _onEventsSubscribed === 'function') {\n          Promise.resolve().then(() => _onEventsSubscribed());\n        }\n      }\n    });\n  }\n\n  checkPath(path) {\n    if (!Object.prototype.hasOwnProperty.call(this.files, path)) {\n      throw new Error(`Path \"${path}\" does not exist in this XPI`);\n    }\n\n    if (this.files[path].uncompressedSize > this.maxSizeBytes) {\n      throw new Error(`File \"${path}\" is too large. Aborting.`);\n    }\n  }\n\n  async getFileAsStream(path) {\n    this.checkPath(path);\n    const zipfile = await this.open();\n    return new Promise((resolve, reject) => {\n      zipfile.openReadStream(this.files[path], (err, readStream) => {\n        if (err) {\n          return reject(err);\n        }\n        return resolve(readStream.pipe(stripBomStream()));\n      });\n    });\n  }\n\n  async getFileAsString(path) {\n    const fileStream = await this.getFileAsStream(path);\n\n    return new Promise((resolve, reject) => {\n      let buf = Buffer.from('');\n      fileStream.on('data', (chunk) => {\n        buf = Buffer.concat([buf, chunk]);\n      });\n\n      // Once the file is assembled, resolve the promise.\n      fileStream.on('end', () => {\n        const fileString = buf.toString('utf8');\n        resolve(fileString);\n      });\n\n      fileStream.on('error', reject);\n    });\n  }\n\n  async getChunkAsBuffer(path, chunkLength) {\n    this.checkPath(path);\n    const zipfile = await this.open();\n    return new Promise((resolve, reject) => {\n      zipfile.openReadStream(this.files[path], (err, readStream) => {\n        if (err) {\n          reject(err);\n          return;\n        }\n        readStream.pipe(\n          firstChunkStream({ chunkLength },\n            (_, enc) => {\n              resolve(enc);\n            }\n          )\n        );\n      });\n    });\n  }\n}\n","module.exports = require(\"strip-bom-stream\");","module.exports = require(\"first-chunk-stream\");","import { oneLine } from 'common-tags';\n\nimport { FLAGGED_FILE_MAGIC_NUMBERS_LENGTH, MAX_FILE_SIZE_MB } from 'const';\n\n\n/*\n * Base class for io operations for both an Xpi or\n * a directory\n */\nexport class IOBase {\n  constructor(packageOrDirPath) {\n    this.path = packageOrDirPath;\n    this.files = {};\n    this.entries = [];\n    // If this is too large the node process will hit a RangeError\n    // when it runs out of memory.\n    this.maxSizeBytes = 1024 * 1024 * MAX_FILE_SIZE_MB;\n    // A callback that accepts a relative file path and returns\n    // true if the path should be included in results for scanning.\n    this.shouldScanFile = () => true;\n  }\n\n  setScanFileCallback(callback) {\n    if (typeof callback === 'function') {\n      this.shouldScanFile = callback;\n    }\n  }\n\n  getFile(path, fileStreamType = 'string') {\n    switch (fileStreamType) {\n      case 'stream':\n        return this.getFileAsStream(path);\n      case 'string':\n        return this.getFileAsString(path);\n      case 'chunk':\n        // Assuming that chunk is going to be primarily used for finding magic\n        // numbers in files, then there's no need to have the default be longer\n        // than that.\n        return this.getChunkAsBuffer(path, FLAGGED_FILE_MAGIC_NUMBERS_LENGTH);\n\n      default:\n        throw new Error(oneLine`Unexpected fileStreamType\n          value \"${fileStreamType}\" should be one of \"string\",\n          \"stream\" or \"chunk\"`);\n    }\n  }\n\n  async getFilesByExt(...extensions) {\n    for (let i = 0; i < extensions.length; i++) {\n      const ext = extensions[i];\n      if (ext.indexOf('.') !== 0) {\n        throw new Error(\"File extension must start with '.'\");\n      }\n    }\n\n    const filesObject = await this.getFiles();\n    const files = [];\n\n    Object.keys(filesObject).forEach((filename) => {\n      extensions.forEach((ext) => {\n        if (filename.endsWith(ext)) {\n          files.push(filename);\n        }\n      });\n    });\n\n    return files;\n  }\n\n  async getFiles() {\n    throw new Error('getFiles is not implemented');\n  }\n\n  async getFileAsStream() {\n    throw new Error('getFileAsStream is not implemented');\n  }\n\n  async getFileAsString() {\n    throw new Error('getFileAsString is not implemented');\n  }\n\n  async getChunkAsBuffer() {\n    throw new Error('getChunkAsBuffer is not implemented');\n  }\n}\n","import * as path from 'path';\nimport { createReadStream } from 'fs';\n\nimport firstChunkStream from 'first-chunk-stream';\nimport stripBomStream from 'strip-bom-stream';\nimport { oneLine } from 'common-tags';\n\nimport { IOBase } from 'io/base';\nimport { walkPromise } from 'io/utils';\nimport log from 'logger';\n\n\nexport class Directory extends IOBase {\n  async getFiles(_walkPromise = walkPromise) {\n    // If we have already processed this directory and have data\n    // on this instance return that.\n    if (Object.keys(this.files).length) {\n      log.info(oneLine`Files already exist for directory\n               \"${this.path}\" returning cached data`);\n      return this.files;\n    }\n\n    const files = await _walkPromise(\n      this.path, {\n        shouldIncludePath: (...args) => this.shouldScanFile(...args),\n      });\n\n    this.files = files;\n    this.entries = Object.keys(files);\n    return files;\n  }\n\n  async getPath(relativeFilePath) {\n    if (!Object.prototype.hasOwnProperty.call(this.files, relativeFilePath)) {\n      throw new Error(`Path \"${relativeFilePath}\" does not exist in this dir.`);\n    }\n\n    if (this.files[relativeFilePath].size > this.maxSizeBytes) {\n      throw new Error(`File \"${relativeFilePath}\" is too large. Aborting`);\n    }\n\n    const absoluteDirPath = path.resolve(this.path);\n    const filePath = path.resolve(path.join(absoluteDirPath, relativeFilePath));\n\n    // This is belt and braces. Should never happen that a file was in\n    // the files object and yet doesn't meet these requirements.\n    if (!filePath.startsWith(absoluteDirPath) ||\n        relativeFilePath.startsWith('/')) {\n      throw new Error(`Path argument must be relative to ${this.path}`);\n    }\n\n    return filePath;\n  }\n\n  async getFileAsStream(relativeFilePath, { encoding } = { encoding: 'utf8' }) {\n    const filePath = await this.getPath(relativeFilePath);\n\n    const readStream = createReadStream(filePath, {\n      autoClose: true,\n      encoding,\n      flags: 'r',\n    });\n\n    return !encoding ? readStream : readStream.pipe(stripBomStream());\n  }\n\n  async getFileAsString(_path) {\n    const readStream = await this.getFileAsStream(_path);\n\n    return new Promise((resolve, reject) => {\n      let content = '';\n      readStream.on('readable', () => {\n        let chunk;\n        // eslint-disable-next-line no-cond-assign\n        while ((chunk = readStream.read()) !== null) {\n          content += chunk.toString();\n        }\n      });\n\n      readStream.on('end', () => {\n        resolve(content);\n      });\n\n      readStream.on('error', reject);\n    });\n  }\n\n  async getChunkAsBuffer(relativeFilePath, chunkLength) {\n    const filePath = await this.getPath(relativeFilePath);\n\n    return new Promise((resolve) => {\n      createReadStream(filePath, {\n        flags: 'r',\n        // This is important because you don't want to encode the\n        // bytes if you are doing a binary check.\n        encoding: null,\n        autoClose: true,\n      })\n        .pipe(\n          firstChunkStream({ chunkLength },\n            (_, enc) => {\n              resolve(enc);\n            }\n          )\n        );\n    });\n  }\n}\n","export const MINER_BLOCKLIST = {\n  code: [\n    // CoinHive\n    /window.CoinHive=window.CoinHive/,\n    /CoinHive\\.CONFIG/,\n    /\\bcryptonight_hash\\b/,\n    /CryptonightWASMWrapper/,\n  ],\n  filenames: [\n    /coinhive(\\.min)?\\.js/,\n    /cryptonight(\\.min)\\.js/,\n  ],\n};\n"],"sourceRoot":""}